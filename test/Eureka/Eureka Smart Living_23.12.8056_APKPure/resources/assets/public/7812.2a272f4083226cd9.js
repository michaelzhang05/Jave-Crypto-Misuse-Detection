"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7812],{77812:(F,D,g)=>{g.r(D),g.d(D,{AdvancedDevicePropertiesPageModule:()=>Ce});var A=g(96814),b=g(56223),r=g(73582),T=g(70160),h=g(15861),y=g(46729),L=g(56544),l=g(8873),O=g(77144),C=g(1901),j=g(51141),S=g(9315),I=g(28002),V=g(2411),R=g(7110),e=g(65879),M=g(34414),k=g(63999),E=g(77935),H=g(59764),G=g(48753);let Q=(()=>{var a;class s{updateCheckbox(n){this.valueChange.emit(this.value)}constructor(){this.width="auto",this.valueChange=new e.vpe}}return(a=s).\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["large-toggle"]],inputs:{width:"width",labelOff:"labelOff",labelOn:"labelOn",value:"value"},outputs:{valueChange:"valueChange"},decls:5,vars:4,consts:[[1,"container"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"title"],[1,"checkmark"]],template:function(n,t){1&n&&(e.TgZ(0,"label",0)(1,"input",1),e.NdJ("ngModelChange",function(c){return t.value=c})("ngModelChange",function(c){return t.updateCheckbox(c)}),e.qZA(),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"span",3),e.qZA()),2&n&&(e.Akn("width:{{width}};"),e.xp6(1),e.Q6J("ngModel",t.value),e.xp6(2),e.Oqu(t.value?t.labelOn:t.labelOff?t.labelOff:t.labelOn))},dependencies:[b.Wl,b.JJ,b.On],styles:['.container[_ngcontent-%COMP%]{direction:ltr;display:inline-block;position:relative;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:20px;border:2px solid gray;background:#eee;height:30px}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;height:22px;width:22px;background-color:#777;transition:all linear .3s;border-radius:100px}.title[_ngcontent-%COMP%]{padding-right:30px;padding-left:8px;color:#777;font-size:small;vertical-align:middle;display:inline-block;margin-bottom:6px}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .title[_ngcontent-%COMP%]{padding-left:30px;padding-right:8px;color:#333}.container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#555;transition:all linear .3s}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background:linear-gradient(0,rgb(14,71,162),rgb(9,142,247));left:2px;transition:all linear .3s;border-radius:100px}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:6px;top:3px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;transform:rotate(45deg)}']}),s})();function K(a,s){1&a&&(e.TgZ(0,"a",16),e._UZ(1,"ion-icon",17),e.qZA())}function Y(a,s){if(1&a&&(e.TgZ(0,"ion-segment-button",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,i.roomAdvancedSettingsAvailable?"occupancy":"advanced")," ")}}function B(a,s){if(1&a&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()),2&a){const i=e.oxw(3);e.xp6(2),e.Oqu(i.thingObject._name+" "),e.xp6(1),e.Oqu(e.lcZ(4,2,"room-name-exists"))}}function W(a,s){if(1&a&&(e.TgZ(0,"ion-select-option",28),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.name)}}function z(a,s){if(1&a&&(e.TgZ(0,"ion-select-option",28),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.description)}}function $(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ion-label"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"ion-input",23),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.thingObject.name=t)}),e.qZA(),e.TgZ(4,"ion-grid",24)(5,"ion-row")(6,"ion-col")(7,"ion-label"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"ion-col")(11,"ion-input",25),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.thingObject._name=t)})("ionBlur",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.checkRoomName(t.thingObject.Name))}),e.qZA(),e.YNc(12,B,5,4,"span",22),e.qZA()(),e.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-label"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"ion-col",26)(19,"ion-select",27),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.scrollToSelected())})("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.thingObject.parent_id=t)}),e._UZ(20,"ion-select-option",28),e.YNc(21,W,2,2,"ion-select-option",29),e.qZA()()(),e.TgZ(22,"ion-row")(23,"ion-col")(24,"ion-label"),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"ion-col",26)(28,"ion-select",30),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.loadFlags())})("ionChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.imageSelectChange(t.thingObject))})("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.thingObject.image_id=t)}),e._UZ(29,"ion-select-option",28),e.YNc(30,z,2,2,"ion-select-option",29),e.qZA()(),e.TgZ(31,"ion-row")(32,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.selectImage())}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"ion-button"),e._uU(36),e.qZA()()()()}if(2&a){const i=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,19,"name")),e.xp6(2),e.Q6J("ngModel",i.thingObject.name),e.xp6(1),e.Udp("direction",i.text_direction),e.xp6(4),e.Oqu(e.lcZ(9,21,"room-name")),e.xp6(3),e.Udp("border",i.roomNameAvailable?"none":"1px solid red"),e.Q6J("ngModel",i.thingObject._name),e.xp6(1),e.Q6J("ngIf",!i.roomNameAvailable),e.xp6(4),e.Oqu(e.lcZ(17,23,"parent")),e.xp6(3),e.Q6J("ngModel",i.thingObject.parent_id),e.xp6(1),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",i.list_of_rooms),e.xp6(4),e.Oqu(e.lcZ(26,25,"image")),e.xp6(3),e.Q6J("ngModel",i.thingObject.image_id),e.xp6(1),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",i.imageList),e.xp6(3),e.hij(" ",e.lcZ(34,27,"Change Image")," "),e.xp6(3),e.Oqu(i.imageDescription)}}function X(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ion-label"),e._uU(1),e.qZA(),e.TgZ(2,"ion-input",31),e.NdJ("ngModelChange",function(t){const c=e.CHM(i).$implicit;return e.KtG(c.value=t)}),e.qZA()}if(2&a){const i=s.$implicit;e.xp6(1),e.Oqu(i.name),e.xp6(1),e.Q6J("placeholder",i.name)("ngModel",i.value)}}function ee(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ion-label")(1,"ion-checkbox",11),e.NdJ("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.ToggleVoiceAssistantCheck())})("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.voice_assistant.enabled=t)}),e.qZA(),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"ion-input",31),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.voice_assistant.name=t)}),e.qZA()}if(2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",i.voice_assistant.enabled),e.xp6(1),e.hij("\xa0",e.lcZ(3,7,"enable-voice-assistant"),""),e.xp6(3),e.Oqu(e.lcZ(6,9,"voice-assistant-name")),e.xp6(2),e.Udp("opacity",i.voice_assistant.enabled?1:.6),e.Q6J("placeholder",i.voice_assistant.name)("ngModel",i.voice_assistant.name)}}function te(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.OpenEditDeviceWizard(t.thingObject))}),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"ion-icon",32),e.qZA()()()}2&a&&(e.xp6(3),e.hij("",e.lcZ(4,1,"full-edit")," "))}function ne(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.OpenFileManager())}),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"ion-icon",33),e.qZA()()()}2&a&&(e.xp6(3),e.hij("",e.lcZ(4,1,"Browse Image")," "))}function ie(a,s){if(1&a){const i=e.EpF();e.YNc(0,$,37,29,"ng-template",15),e.YNc(1,X,3,3,"ng-template",19),e.YNc(2,ee,8,11,"ng-template",15),e.TgZ(3,"ion-grid")(4,"ion-row")(5,"ion-col")(6,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.ShowDeviceEvents())}),e._uU(7),e.ALo(8,"translate"),e._UZ(9,"ion-icon",21),e.qZA()()(),e.YNc(10,te,6,3,"ion-row",22),e.YNc(11,ne,6,3,"ion-row",22),e.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.SaveTranslationAndAssistantName())}),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"ion-col")(18,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.dismiss(t))}),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()}if(2&a){const i=e.oxw();e.Q6J("ngIf",i.is_editmode),e.xp6(1),e.Q6J("ngForOf",i.list_of_translated_names),e.xp6(1),e.Q6J("ngIf",!i.is_for_ui_controls),e.xp6(5),e.hij("",e.lcZ(8,8,"show-events")," "),e.xp6(3),e.Q6J("ngIf",i.is_super_user&&1==i.thing_type),e.xp6(1),e.Q6J("ngIf",i.roomAdvancedSettingsAvailable),e.xp6(4),e.hij(" ",e.lcZ(16,10,"ok")," "),e.xp6(4),e.hij(" ",e.lcZ(20,12,"cancel")," ")}}function oe(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(i);const t=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.selectCommand(t))}),e._uU(1),e.qZA()}if(2&a){const i=e.oxw().$implicit;e.Udp("background-color",i.selected?"#666":""),e.xp6(1),e.Oqu(i.command)}}function ae(a,s){if(1&a&&e.YNc(0,oe,2,3,"div",46),2&a){const i=s.$implicit;e.Q6J("ngIf",null==i?null:i.command)}}function ce(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"p",34),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"b"),e._uU(5),e.qZA()(),e._UZ(6,"hr",35),e.TgZ(7,"ion-list"),e.YNc(8,ae,1,1,"ng-template",19),e.qZA(),e.TgZ(9,"ion-input",36,37),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.voice_command_value=t)}),e.qZA(),e.TgZ(11,"ion-grid")(12,"ion-row")(13,"ion-col",24)(14,"ion-button",38),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.add())}),e._UZ(15,"ion-icon",39),e.qZA()(),e.TgZ(16,"ion-col",40)(17,"ion-button",41),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.edit())}),e._UZ(18,"ion-icon",42),e.qZA()(),e.TgZ(19,"ion-col",43)(20,"ion-button",44),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.remove())}),e._UZ(21,"ion-icon",45),e.qZA()()(),e.TgZ(22,"ion-row")(23,"ion-col"),e._UZ(24,"hr",35),e.qZA()(),e.TgZ(25,"ion-row")(26,"ion-col")(27,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.confirmChanges())}),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"ion-col")(31,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.dismiss(t))}),e._uU(32),e.ALo(33,"translate"),e.qZA()()()()()}if(2&a){const i=e.oxw();e.Udp("direction",i.direction),e.xp6(1),e.Udp("direction",i.ui_direction),e.xp6(1),e.AsE("",e.lcZ(3,13,"enter-voice-names")," \xa0 (",i.speech_language_symbol,") \xa0 "),e.xp6(3),e.Oqu(i.device),e.xp6(3),e.Q6J("ngForOf",i.list_of_obj),e.xp6(1),e.Q6J("ngModel",i.voice_command_value),e.xp6(8),e.Q6J("disabled",null!=i.selected_obj&&0==i.selected_obj.id||null==i.selected_obj),e.xp6(3),e.Q6J("disabled",null!=i.selected_obj&&0==i.selected_obj.id||null==i.selected_obj),e.xp6(8),e.hij(" ",e.lcZ(29,15,"ok")," "),e.xp6(4),e.hij(" ",e.lcZ(33,17,"cancel")," ")}}function le(a,s){if(1&a&&(e.TgZ(0,"span",56),e._uU(1),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.room_name)}}function se(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ion-item",59),e.NdJ("click",function(){const o=e.CHM(i).$implicit,c=e.oxw(3);return e.KtG(c.toggleRoomDeviceOccupancy(o))}),e.TgZ(1,"ion-avatar",60),e._UZ(2,"img",61),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e._UZ(5,"br"),e.YNc(6,le,2,1,"span",62),e.qZA(),e.TgZ(7,"ion-toggle",63),e.NdJ("click",function(){const o=e.CHM(i).$implicit,c=e.oxw(3);return e.KtG(c.toggleRoomDeviceOccupancy(o))})("ngModelChange",function(t){const c=e.CHM(i).$implicit;return e.KtG(c.value=t)})("ngModelChange",function(){const o=e.CHM(i).$implicit,c=e.oxw(3);return e.KtG(c.roomDeviceOccupancyChanged(o))}),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(2),e.Q6J("src",i.image,e.LSH),e.xp6(2),e.hij(" ",i.name,""),e.xp6(2),e.Q6J("ngIf",i.room_name),e.xp6(1),e.Tol(i.value?"toggle-on":"toggle-off"),e.Q6J("ngModel",i.value)}}function re(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"div")(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-label",49),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.toggleOccupancySensingEnabled())}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"ion-col",50)(9,"large-toggle",51),e.NdJ("change",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.occupancySensingEnabledChanged(t))}),e.ALo(10,"translate"),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-label",52),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"ion-col",50)(18,"ion-button",53),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.openOccupancyAction())}),e._uU(19,"..."),e.qZA()()(),e.TgZ(20,"ion-row")(21,"ion-col")(22,"ion-label"),e._uU(23),e.ALo(24,"translate"),e.TgZ(25,"span",54),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"ion-input",55),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.OccupancySensingThreshold=t)}),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"span",56),e._uU(31),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"ion-row")(34,"ion-col")(35,"ion-label"),e._uU(36),e.ALo(37,"translate"),e.TgZ(38,"span",54),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"ion-input",55),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.OccupancyNoMotionTimeout=t)}),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"span",56),e._uU(44),e.ALo(45,"translate"),e.qZA()()()(),e._UZ(46,"div",57),e.TgZ(47,"ion-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"ion-list"),e.YNc(51,se,8,6,"ion-item",58),e.qZA()()()}if(2&a){const i=e.oxw(2);e.xp6(6),e.hij(" \xa0",e.lcZ(7,18,"SetOccupancySensingEnabled")," "),e.xp6(3),e.Q6J("value",i.OccupancySensingEnabled)("width","60px")("labelOn",e.lcZ(10,20,"yes"))("labelOff",e.lcZ(11,22,"no")),e.xp6(6),e.hij(" \xa0",e.lcZ(16,24,"occupancy-action")," "),e.xp6(8),e.hij(" \xa0",e.lcZ(24,26,"occupancy-threshold")," "),e.xp6(3),e.hij("\xa0(",e.lcZ(27,28,"in-seconds"),")"),e.xp6(2),e.s9C("placeholder",e.lcZ(29,30,"default")),e.Q6J("ngModel",i.OccupancySensingThreshold),e.xp6(3),e.Oqu(e.lcZ(32,32,"occupancy-threshold-description")),e.xp6(5),e.hij(" \xa0",e.lcZ(37,34,"occupancy-nomotion-timeout")," "),e.xp6(3),e.hij("\xa0(",e.lcZ(40,36,"in-seconds"),")"),e.xp6(2),e.s9C("placeholder",e.lcZ(42,38,"none")),e.Q6J("ngModel",i.OccupancyNoMotionTimeout),e.xp6(3),e.Oqu(e.lcZ(45,40,"occupancy-timeout-description")),e.xp6(4),e.Oqu(e.lcZ(49,42,"devices")),e.xp6(3),e.Q6J("ngForOf",i.roomOccupancyDevices)}}function ge(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"ion-label",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-input",65),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.minimumTemperatureValue=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.tempChange())}),e.qZA(),e.TgZ(5,"ion-label",64),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ion-input",65),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.maximumTemperatureValue=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.tempChange())}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"low-temperature")),e.xp6(2),e.Q6J("ngModel",i.minimumTemperatureValue),e.xp6(2),e.Oqu(e.lcZ(7,6,"high-temperature")),e.xp6(2),e.Q6J("ngModel",i.maximumTemperatureValue)}}function _e(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"ion-label",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-label",49),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.toggleWarningOnActiveValue())}),e.TgZ(5,"ion-checkbox",11),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.warningOnActiveValue=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.warningOnActiveChanged())}),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"warnings")),e.xp6(3),e.Q6J("ngModel",i.warningOnActiveValue),e.xp6(1),e.hij("\xa0",e.lcZ(7,5,"enable-warning-on-active")," ")}}function de(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"ion-label",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-select",11),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.OccupancySensingModeValue=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.occupancySensingModeChanged())}),e.TgZ(5,"ion-select-option",28),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ion-select-option",28),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}if(2&a){const i=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,6,"occupancy-sensing-mode")),e.xp6(2),e.Q6J("ngModel",i.OccupancySensingModeValue),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.Oqu(e.lcZ(7,8,"default")),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Oqu(e.lcZ(10,10,"interaction"))}}function ue(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"ion-label",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-label",49),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.toggleIncludeOccupancy())}),e.TgZ(5,"ion-checkbox",11),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.includeOccupancyValue=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.occupancyChanged())}),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"occupancy-sensing")),e.xp6(3),e.Q6J("ngModel",i.includeOccupancyValue),e.xp6(1),e.hij("\xa0",e.lcZ(7,5,"include-in-occupancy")," ")}}function pe(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"ion-label",64),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-label",49),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.toggleExcludeFromRoomControl())}),e.TgZ(5,"ion-checkbox",11),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.excludeFromRoomControlValue=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw(2);return e.KtG(t.excludeFromRoomControlChanged())}),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"room-control")),e.xp6(3),e.Q6J("ngModel",i.excludeFromRoomControlValue),e.xp6(1),e.hij("\xa0",e.lcZ(7,5,"exclude-from-room-control")," ")}}function he(a,s){if(1&a){const i=e.EpF();e.YNc(0,re,52,44,"div",22),e.YNc(1,ge,9,8,"div",22),e.YNc(2,_e,8,7,"div",22),e.YNc(3,de,11,12,"div",22),e.YNc(4,ue,8,7,"div",22),e.YNc(5,pe,8,7,"div",22),e.TgZ(6,"ion-grid")(7,"ion-row")(8,"ion-col")(9,"ion-button",48),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.updateAdvanced())}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"ion-col")(13,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.dismiss(t))}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()}if(2&a){const i=e.oxw();e.Q6J("ngIf",i.roomAdvancedSettingsAvailable),e.xp6(1),e.Q6J("ngIf",i.minMaxTemperature),e.xp6(1),e.Q6J("ngIf",i.warningOnActive),e.xp6(1),e.Q6J("ngIf",i.occupancySensingMode),e.xp6(1),e.Q6J("ngIf",i.includeOccupancy),e.xp6(1),e.Q6J("ngIf",i.excludeFromRoomControl),e.xp6(4),e.Q6J("disabled",!i.requireSaveAction&&!(i.roomDeviceOccupancyValueChanged||i.OccupancySensingModeValueChanged||i.warningChanged||i.includeOccupancyChanged||i.excludeFromRoomControlValueChanged||i.tempChanged)),e.xp6(1),e.Oqu(e.lcZ(11,9,"ok")),e.xp6(4),e.Oqu(e.lcZ(15,11,"cancel"))}}const me=[{path:"",component:(()=>{var a;class s extends L.n{OpenEditDeviceWizard(n){this.navCtrl.navigateForward(j.ze,{state:{data:{command:"edit-device",device:this.thingObject}}}).then(t=>{console.log("Navigated to Device Management...")})}selectImage(){var n=this;return(0,h.Z)(function*(){let t=yield n.modalCtrl.create({component:R.R,componentProps:{index:n.thingObject.image_id,filter:"user"}});t.onDidDismiss().then(o=>{o&&o.data&&o.data.id&&(n.thingObject.image_id=o.data.id,n.thingObject.image_url=o.data.url,n.imageDescription=o.data.description)}),t.present()})()}checkRoomName(n){return this.roomNameAvailable=!1,!0}constructor(n,t,o,c,_,u,x,w,J,xe,q,U,N,be,Oe){if(super(_,w,J,x,n,xe,!0,t,u,q,U),this.navCtrl=n,this.router=t,this.app=o,this.modalCtrl=c,this.api=_,this.toastCtrl=u,this.translate=x,this.platform=w,this.alertCtrl=J,this.settings=q,this.popoverCtrl=U,this.navParams=N,this.loadingCtrl=be,this.route=Oe,this.is_super_user=!1,this.list_of_rooms=[],this.advancedAvailable=!0,this.roomAdvancedSettingsAvailable=!1,this.roomOccupancyDevices=[],this.DeviceType=O.Y,this.ThingType=C.a,this.full_name_temp="",this.list_of_obj=[],this.list_of_lang=[],this.list_of_translated_names=[],this.voice_assistant={enabled:!1,name:""},this.direction="ltr",this.language_symbol="",this.currentPage="general",this.minMaxTemperature=!1,this.warningOnActive=!1,this.includeOccupancy=!1,this.includeOccupancyValue=!0,this.excludeFromRoomControl=!1,this.excludeFromRoomControlValue=!1,this.minimumTemperatureValue=null,this.maximumTemperatureValue=null,this.warningOnActiveValue=!1,this.text_direction=this.platform.isRTL?"rtl":"ltr",this.theAppState=l.a,this.is_editmode=!1,this.imageDescription="",this.excludeFromRoomControlValueChanged=!1,this.is_for_ui_controls=!1,this.warningChanged=!1,this.tempChanged=!1,this.includeOccupancyChanged=!1,this.roomDeviceOccupancyValueChanged=!1,this.OccupancySensingEnabled=!1,this.roomOccupancySensingChanged=!1,this.occupancySensingMode=!1,this.OccupancySensingModeValue=!1,this.OccupancySensingModeValueChanged=!1,this.__temp_img_link="3",this.modal_ref=void 0,this.AuthCookieValue="",this.BaseUrl="",this.imageList=[],l.a.DefaultController&&l.a.DefaultController.user&&(this.is_super_user=l.a.DefaultController.user.is_super_user),l.a.DefaultController&&(this.imageList=l.a.DefaultController.images),this.router.getCurrentNavigation().extras.state){const p=this.router.getCurrentNavigation().extras.state;N.data=p.data,console.log(this.navParams)}let v=N.data;if(v.selected_tab&&(this.currentPage=v.selected_tab),this.list_of_obj=v.commands,this.ui_direction=v.ui_direction,this.direction=v.direction,null!=v.language_symbol&&(this.language_symbol="("+v.language_symbol+")"),console.log(this.direction),this.device=v.thing,this.thing_id=v.thing_id,this.is_for_ui_controls=v.is_for_ui_controls,this.control_id=v.control_id,this.thing_type=v.thing_type,this.is_editmode=v.is_editmode,this.language_id=v.language_id,null!=this.list_of_obj&&(this.list_of_obj=this.list_of_obj.sort((p,d)=>p.id-d.id)),this.list_of_translated_names=[],null!=l.a.DefaultController&&null!=l.a.DefaultController.languages)for(let p=0;p<l.a.DefaultController.languages.length;p++)this.list_of_translated_names.push({id:l.a.DefaultController.languages[p].id,name:l.a.DefaultController.languages[p].nativeName,value:""});if(this.thing_type==C.a.Device){this.thingObject=l.a.DefaultController.devices.find(f=>f.id==this.thing_id);let p=this.thingObject.VoiceAssistantNameEnabled,d=this.thingObject.VoiceAssistantName,m=d;if(!m||""==m){let f=l.a.DefaultController.languages.find(Z=>"english"==Z.name.toLowerCase()),P=this.thingObject.name;f&&(P=this.thingObject.getTranslatedNameByLanguageId(f.id)),d="",m=(this.thingObject.room?this.thingObject.room.name:"")+" "+P}this.full_name_temp=m.trim(),this.voice_assistant.enabled=p,this.voice_assistant.name=d}else if(this.thing_type==C.a.Scene){this.thingObject=l.a.DefaultController.scenes.find(f=>f.id==this.thing_id);let p=this.thingObject.VoiceAssistantNameEnabled,d=this.thingObject.VoiceAssistantName,m=d;if(!m||""==m){let f=l.a.DefaultController.languages.find(Z=>"english"==Z.name.toLowerCase()),P=this.thingObject.name;f&&(P=this.thingObject.getTranslatedNameByLanguageId(f.id)),d="",m=(this.thingObject.room?this.thingObject.room.name:"")+" "+P}this.full_name_temp=m.trim(),this.voice_assistant.enabled=p,this.voice_assistant.name=d}else{if(this.thing_type==C.a.Room){this.thingObject=l.a.DefaultController.rooms.find(f=>f.id==this.thing_id),this.updateUIInformation(),this.advancedAvailable=!0,this.roomAdvancedSettingsAvailable=!0,this.OccupancySensingEnabled=this.thingObject.OccupancySensingEnabled,this.OccupancySensingThreshold=this.OccupancySensingThresholdPreviousValue=this.thingObject.OccupancySensingThreshold,this.OccupancyNoMotionTimeout=this.OccupancyNoMotionTimeoutPreviousValue=this.thingObject.OccupancyNoMotionTimeout;let p=this.thingObject.VoiceAssistantNameEnabled,d=this.thingObject.VoiceAssistantName,m=d;if(!m||""==m){let f=l.a.DefaultController.languages.find(Z=>"english"==Z.name.toLowerCase()),P=this.thingObject.name;f&&(P=this.thingObject.getTranslatedNameByLanguageId(f.id)),d="",m=(this.thingObject.room?this.thingObject.room.name:"")+" "+P}return this.full_name_temp=m.trim(),this.voice_assistant.enabled=p,this.voice_assistant.name=d,this.FillRoomOccupancyDevices(this.thing_id),void this.FindAndFillTranslationNames(this.thingObject)}if(this.is_for_ui_controls){let p=l.a.DefaultController.device_uis.find(d=>d.device_id==this.thing_id);if(null!=p){let d=p.controls.find(m=>m.id==this.control_id);this.device=d.getTranslatedText(),console.warn(d,d.translations),null!=d&&null!=d.translations&&(this.thingObject=d)}}}null!=this.thingObject&&this.FindAndFillTranslationNames(this.thingObject),this.thingObject&&(this.occupancySensingMode=this.thing_type==C.a.Device&&this.thingObject.type==O.Y.DoorSensor,this.occupancySensingMode&&(this.OccupancySensingModeValue=this.thingObject.properties.OccupancySensingMode),this.minMaxTemperature=this.thing_type==C.a.Device&&(this.thingObject.type==O.Y.Thermostat||this.thingObject.type==O.Y.TemperatureSensor),this.warningOnActive=this.thing_type==C.a.Device&&(this.DeviceType.DoorSensor==this.thingObject.type||this.DeviceType.MotionSensor==this.thingObject.type),this.includeOccupancy=this.thing_type==C.a.Device&&(this.thingObject.type==O.Y.DoorSensor||this.thingObject.type==O.Y.MotionSensor||this.thingObject.type==O.Y.RemoteControl||this.thingObject.type==O.Y.OccupancySensor),this.thingObject.properties&&(this.excludeFromRoomControl=!1===this.thingObject.properties.ExcludeFromRoomControl||!0===this.thingObject.properties.ExcludeFromRoomControl),this.advancedAvailable=this.minMaxTemperature||this.warningOnActive||this.includeOccupancy||this.excludeFromRoomControl,this.minMaxTemperature&&(console.log(this.thingObject),this.minimumTemperatureValue=this.thingObject.WarningLowTemperature,this.maximumTemperatureValue=this.thingObject.WarningHighTemperature,console.log(this.minimumTemperatureValue,this.thingObject.WarningLowTemperature)),this.warningOnActive&&(console.log(this.thingObject),this.warningOnActiveValue=this.thingObject.WarningOnActive),this.includeOccupancy&&(this.includeOccupancyValue=this.thingObject.IncludeInOccupancySensing),this.excludeFromRoomControl&&(this.excludeFromRoomControlValue=this.thingObject.properties.ExcludeFromRoomControl))}toggleExcludeFromRoomControl(){this.excludeFromRoomControlValueChanged=!0,this.excludeFromRoomControlValue=!this.excludeFromRoomControlValue}setExcludeFromRoomControl(){return this.thingObject.SetExcludeFromRoomControl(this.excludeFromRoomControlValue)}excludeFromRoomControlChanged(){this.excludeFromRoomControlValueChanged=!0}FindAndFillTranslationNames(n){var t=this;return(0,h.Z)(function*(){yield l.a.DefaultController.UpdateDeviceFromServer(t.thingObject.id).then(o=>{}),n.translations&&Object.keys(n.translations).forEach(o=>{console.log("key/name:",o);for(let c=0;c<t.list_of_translated_names.length;c++)o==t.list_of_translated_names[c].id&&(t.list_of_translated_names[c].value=t.is_for_ui_controls?n.translations[o].Text:n.translations[o].Name,console.log(n.translations[o],o))})})()}ShowDeviceEvents(){let n,t;this.thingObject&&this.thingObject.room&&(n=this.thingObject.room.name,n=n.trim().replace(" ","%20")),t=this.device,t=t.trim().replace(" ","%20"),this.navCtrl.navigateForward(j.WX,{state:{data:{DeviceName:this.device,DeviceType:this.thingObject.type,ThingType:this.thingObject.thingType,RoomName:this.thingObject&&this.thingObject.room?this.thingObject.room.name:this.device,searchKey:this.thingObject.thingType==this.ThingType.Device||this.thingObject.thingType==this.ThingType.Scene?`${n}: ${this.ThingType[this.thingObject.thingType]} [${t}]`:`${t}:`}}})}ToggleVoiceAssistantCheck(){!this.voice_assistant.enabled&&(!this.voice_assistant.name||""==this.voice_assistant.name)&&(this.voice_assistant.name=this.full_name_temp)}ToggleVoiceAssistant(){this.voice_assistant.enabled=!this.voice_assistant.enabled}add(){null!=this.voice_command_value&&""!=this.voice_command_value&&(this.list_of_obj.push({id:1,command:this.voice_command_value,lang_id:y.V0.defaultVoiceLanguage.id,selected:!1}),this.voice_command_value="",null!=this.list_of_obj&&(this.list_of_obj=this.list_of_obj.sort((n,t)=>n.id-t.id)))}remove(){delete this.list_of_obj[this.list_of_obj.indexOf(this.list_of_obj.find(t=>t.selected))],delete this.selected_obj;let n=this.list_of_obj.filter(t=>null!=t);this.list_of_obj=n,null!=this.list_of_obj&&(this.list_of_obj=this.list_of_obj.sort((t,o)=>t.id-o.id)),this.voice_command_value="",console.log(this.selected_obj)}dismiss(n){console.debug("Dismissing...");try{this.modalCtrl.dismiss(n)}catch{}this.navCtrl.back()}edit(){this.list_of_obj[this.list_of_obj.indexOf(this.list_of_obj.find(n=>n.selected))].command=this.voice_command_value}selectCommand(n){console.log(n);for(let t=0;t<this.list_of_obj.length;t++)this.list_of_obj[t].selected=!1;n.selected=!0,this.selected_obj=n,this.voice_command_value=n.command}confirmChanges(){console.warn(this.is_for_ui_controls),this.is_for_ui_controls?this.confirmChangesForControl():this.confirmChangesForDevice()}confirmChangesForControl(){var n=this;return(0,h.Z)(function*(){console.log(n.list_of_obj);let t={controlId:n.control_id,languageId:n.language_id,voiceCommands:n.list_of_obj.filter(c=>c.id>0).map(c=>c.command)},o=yield n.loadingCtrl.create({showBackdrop:!0,backdropDismiss:!0});o.present(),l.a.DefaultController.SetVoiceCommandControls(t.languageId,t.controlId,t.voiceCommands).then(function(){var c=(0,h.Z)(function*(_){1==_?l.a.DefaultController.GetVoiceCommandUiControls().then(u=>{l.a.DefaultController.voiceCommandControl.voice_cmd_thing_ui_controls=u,o.dismiss(),n.modalCtrl.dismiss(t)}):((yield n.toastCtrl.create({message:n.translate.instant("unable-to-update"),duration:4e3,position:"top"})).present(),o.dismiss())});return function(_){return c.apply(this,arguments)}}())})()}confirmChangesForDevice(){var n=this;return(0,h.Z)(function*(){console.log(n.list_of_obj);let t={thingId:n.thing_id,thingType:n.thing_type,languageId:n.language_id,voiceCommands:n.list_of_obj.filter(c=>c.id>0).map(c=>c.command)},o=yield n.loadingCtrl.create({showBackdrop:!0,backdropDismiss:!0});o.present(),l.a.DefaultController.SetVoiceCommandThings(t.languageId,t.thingType,t.thingId,t.voiceCommands).then(function(){var c=(0,h.Z)(function*(_){1==_?l.a.DefaultController.GetVoiceCommandThings().then(u=>{l.a.DefaultController.voiceCommandControl.voice_thing_names=u,o.dismiss(),n.modalCtrl.dismiss(t)}):((yield n.toastCtrl.create({message:n.translate.instant("unable-to-update"),duration:4e3,position:"top"})).present(),o.dismiss())});return function(_){return c.apply(this,arguments)}}())})()}SaveTranslationAndAssistantName(){this.thing_type==C.a.Room&&this.SaveRoomInformation();for(let n=0;n<this.list_of_translated_names.length;n++)this.SetDataTranslation(this.list_of_translated_names[n].id,this.list_of_translated_names[n].value);(!this.is_for_ui_controls||1!=this.thing_type&&2!=this.thing_type&&3!=this.thing_type)&&this.is_for_ui_controls||l.a.DefaultController.SetVoiceAssistantName(this.thing_type,this.thing_id,!!this.voice_assistant.enabled&&this.voice_assistant.enabled,this.voice_assistant.name?this.voice_assistant.name:""),this.dismiss(void 0)}SetDataTranslation(n,t){l.a.DefaultController.SetDataTranslation(n,1==this.thing_type?"Device":2==this.thing_type?"Scene":3==this.thing_type?"Room":this.is_for_ui_controls?"DeviceUiControl":"NA",this.is_for_ui_controls?"Text":"Name",this.thing_id,t).then(c=>{if(null!=c)if(1==c){if(this.is_for_ui_controls)l.a.DefaultController.LoadDeviceUIs().then(_=>{l.a.DefaultController.LoadAllDevices()});else switch(this.thing_type){case 1:l.a.DefaultController.UpdateDeviceFromServer(this.thing_id);break;case 2:l.a.DefaultController.LoadAllScenes();break;case 3:l.a.DefaultController.UpdateRoomTranslation(this.thing_id)}console.log("Name successfully update")}else console.log("Unable to update name")})}warningOnActiveChanged(){this.warningChanged=!0}toggleWarningOnActiveValue(){this.warningChanged=!0,this.warningOnActiveValue=!this.warningOnActiveValue}tempChange(){this.tempChanged=!0}setMinMaxTemperature(){return(0,S.D)([this.thingObject.setWarningLowTemperature(this.minimumTemperatureValue),this.thingObject.setWarningHighTemperature(this.maximumTemperatureValue)]).toPromise()}setWarningOnActive(){var n=this;return(0,h.Z)(function*(){try{return n.thingObject.setWarningOnActive(n.warningOnActiveValue)}catch(t){return console.error(t),Promise.reject(!1)}})()}occupancyChanged(){this.includeOccupancyChanged=!0}toggleIncludeOccupancy(){this.includeOccupancyChanged=!0,this.includeOccupancyValue=!this.includeOccupancyValue}setIncludeOccupancy(){return this.thingObject.setIncludeInOccupancySensing(this.includeOccupancyValue)}get requireSaveAction(){return this.OccupancySensingThresholdPreviousValue!=this.OccupancySensingThreshold||this.OccupancyNoMotionTimeoutPreviousValue!=this.OccupancyNoMotionTimeout}updateAdvanced(){var n=this;return(0,h.Z)(function*(){let t=[];if(n.OccupancyNoMotionTimeoutPreviousValue!=n.OccupancyNoMotionTimeout&&t.push(n.thingObject.SetOccupancyNoMotionTimeout(n.OccupancyNoMotionTimeout?n.OccupancyNoMotionTimeout:null)),n.OccupancySensingThresholdPreviousValue!=n.OccupancySensingThreshold&&t.push(n.thingObject.SetOccupancySensingThreshold(n.OccupancySensingThreshold?n.OccupancySensingThreshold:null)),n.roomDeviceOccupancyValueChanged&&t.push(n.UpdateRoomOccupancyDevices(n.thing_id)),n.warningChanged&&t.push(n.setWarningOnActive()),n.includeOccupancyChanged&&t.push(n.setIncludeOccupancy()),n.excludeFromRoomControlValueChanged&&t.push(n.setExcludeFromRoomControl()),n.tempChanged&&t.push(n.setMinMaxTemperature()),n.roomOccupancySensingChanged&&t.push(n.setOccupancySensingEnabled()),n.OccupancySensingModeValueChanged&&t.push(n.setOccupancySensingMode()),t.length>=0){let o=!0;(0,S.D)(t).subscribe(c=>{console.log("results",c)},c=>{console.error("errors",c),o=!1},()=>{console.log("complete"),o?(console.log("dismissing dialog..."),n.dismiss(n.thingObject)):console.log("dismissing...")})}})()}FillRoomOccupancyDevices(n){var t=this;return(0,h.Z)(function*(){let o=yield t.loadingCtrl.create();o.present().then(()=>{l.a.DefaultController.GetOccupancyRoomDevices(n).then(c=>{if(c&&c.body&&c.body.result){let _=c.body.result;t.roomOccupancyDevices=[];for(let u in _){let x=l.a.DefaultController.devices.find(w=>w.id==u);x&&t.roomOccupancyDevices.push({name:x.translated_name,room_name:x.room?x.room.translated_name:"",image:x.image_id.main_url,id:u,value:_[u]})}t.roomOccupancyDevices.sort((u,x)=>u.room_name.toLowerCase()>x.room_name.toLowerCase()||u.room_name===x.room_name&&u.name.toLowerCase()>x.name.toLowerCase()?1:-1),o.dismiss()}else o.dismiss()})})})()}UpdateRoomOccupancyDevices(n){var t=this;return(0,h.Z)(function*(){let o={};for(let c=0;c<t.roomOccupancyDevices.length;c++){let _=t.roomOccupancyDevices[c];_.value&&(o[_.id]=_.value)}return l.a.DefaultController.SetOccupancyRoomDevices(n,o).then(c=>{},c=>{})})()}toggleRoomDeviceOccupancy(n){this.roomDeviceOccupancyValueChanged=!0,n.value=!n.value}roomDeviceOccupancyChanged(n){this.roomDeviceOccupancyValueChanged=!0,console.log(n,this.roomOccupancyDevices)}occupancySensingEnabledChanged(n){n&&(this.OccupancySensingEnabled=n.target.checked),this.roomDeviceOccupancyValueChanged=!0,this.roomOccupancySensingChanged=!0}toggleOccupancySensingEnabled(){this.roomDeviceOccupancyValueChanged=!0,this.roomOccupancySensingChanged=!0,this.OccupancySensingEnabled=!this.OccupancySensingEnabled}setOccupancySensingEnabled(){return this.thing_type==C.a.Room&&this.thingObject?this.thingObject.SetOccupancySensingEnabled(this.OccupancySensingEnabled):Promise.reject(!1)}openOccupancyAction(){var n=this;return(0,h.Z)(function*(){if(n.thingObject){let o=n.thingObject;l.a.odata={room:o,roomOccupancyAction:l.a.roomOccupancyAction};var t=yield l.a.DefaultController.GetOccupancyRoomActionsDTO(o.id);l.a.roomOccupancyAction=Object.assign(new I.Kr,t),l.a.navigatebackPage=j.rL,l.a.navigatebackPageStateData={room:o},n.navCtrl.navigateForward(j.rL,{state:{data:l.a.navigatebackPageStateData}})}})()}occupancySensingModeChanged(){this.OccupancySensingModeValueChanged=!0}setOccupancySensingMode(){return this.thing_type==C.a.Device&&this.thingObject?this.thingObject.SetOccupancySensingMode(this.OccupancySensingModeValue):Promise.reject(!1)}OpenFileManager(n="image",t=void 0,o=void 0){var c=this;return(0,h.Z)(function*(){let _=c.modalCtrl.create({component:V.F,componentProps:{callback:c.ImageCallBackFromFileManager,COMING_FROM_DASHBOARD:!0,MediaType:n},cssClass:"fullscreen-modal"});c.modal_ref=_,(yield _).present(),(yield _).onDidDismiss().then(u=>{"image"==n&&c.ImageCallBackFromFileManager(u.data,t,o)})})()}ImageCallBackFromFileManager(n,t=void 0,o=void 0){n&&(this.__temp_img_link=n.link,this.thingObject&&(this.thingObject.Link=n.link),t&&o?t[o]=this.GetMediaPath(n.link,!0):this.thingObject&&(this.thingObject.image_url=this.GetMediaPath(this.thingObject.Link,!0)))}GetMediaPath(n,t){return this.AuthCookieValue=l.a.DefaultController.getAuthTokenValue(),this.authenticationHandler=o=>{console.log("cookie changed, ",o),this.AuthCookieValue=l.a.DefaultController.getAuthTokenValue()},this.BaseUrl=l.a.DefaultController.getWebDavAddressFromJsonRPC,this.ipChangedHandler=o=>{console.log("IP changed, ",l.a.DefaultController.getWebDavAddressFromJsonRPC),this.BaseUrl=l.a.DefaultController.getWebDavAddressFromJsonRPC},t?(n&&n.startsWith("/")&&this.BaseUrl.endsWith("/")&&(n=n.substr(1,n.length-1)),this.BaseUrl+n+"?token="+this.AuthCookieValue):n}scrollToSelected(){setTimeout(function(){let n=document.getElementsByClassName("alert-radio-group")[0].querySelector('[aria-checked="true"]');n&&setTimeout(function(){n.scrollIntoView()},400)},5)}ngOnInit(){var n=this;return(0,h.Z)(function*(){try{let t=yield l.a.DefaultController.LoadAllRoomEntities();t&&(n.list_of_rooms=t)}catch(t){console.error(t)}})()}loadFlags(){if(this.imageList&&this.imageList.length>0)var n=this.imageList;let t;setTimeout(function(){let o=document.getElementsByClassName("alert-radio-label");for(let _=0;_<o.length;_++){let u=o[_+1];null!=n[_]&&(t=n[_].main_url,u.innerHTML.includes("<img")||(u.innerHTML=u.innerHTML.concat('<img class="country-image" style = "margin-bottom: -6px;float:inline-end;width: 27px; height: 25px;" src = '+t+" /> ")))}let c=document.getElementsByClassName("alert-radio-group")[0].querySelector('[aria-checked="true"]');c&&setTimeout(function(){c.scrollIntoView()},400)},5)}imageSelectChange(n){if(n&&-1!=n.ImageId){let o,t=this.imageList.filter(c=>c.id==n.ImageId);n&&(this.thingObject.ImageId=n.ImageId,o=document.getElementsByClassName("dark-control img-list")[0].getElementsByClassName("select-text")[0]),o&&t[0]&&(o.innerHTML=t[0].description,o.innerHTML=o.innerHTML.concat('<img class="country-image" style = "margin-bottom: -6px;margin-left: 20px;width: 27px; height: 25px;" src = '+t[0].main_url+" /> "))}}SaveRoomInformation(){var n=this;return(0,h.Z)(function*(){let t=yield l.a.DefaultController.LoadAllRoomEntityDTO(n.thingObject.id);t.roomEntity.name=n.thingObject._name,t.roomEntity.parentId=n.thingObject.parent_id,t.roomEntity.imageId=n.thingObject.image_id,l.a.DefaultController.SaveRoomEntity("update",t,n.thingObject.id).then(o=>{l.a.DefaultController.LoadAllRooms()}).catch(o=>{console.error("Unable to Save",o)})})()}updateUIInformation(){if(this.thing_type==C.a.Room)if(-1!=this.thingObject.ImageId){let n=this.imageList.find(t=>t.id==this.thingObject.ImageId);n&&(this.imageDescription=n.description)}else this.imageDescription=""}}return(a=s).\u0275fac=function(n){return new(n||a)(e.Y36(M.SH),e.Y36(T.F0),e.Y36(r.dr),e.Y36(M.IN),e.Y36(y.V0),e.Y36(M.yF),e.Y36(k.sK),e.Y36(M.t4),e.Y36(M.Br),e.Y36(e.R0b),e.Y36(E.Z),e.Y36(M.Dh),e.Y36(M.X1),e.Y36(M.HT),e.Y36(T.gz))},a.\u0275cmp=e.Xpm({type:a,selectors:[["advanced-device-properties"]],features:[e.qOj],decls:29,vars:17,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr","padding-top","20px",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],["class","top-mic-button",4,"ngIf"],["showWhen","android,ios",1,"top-mic-button",2,"vertical-align","bottom",3,"touchstart","touchend"],["name","mic",1,"voice-mic-button"],[1,"top-badge"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding","",1,"advanced-device-properties"],[3,"ngModel","ngModelChange"],["value","general"],["value","voice"],["value","advanced",4,"ngIf"],[3,"ngIf"],[1,"top-mic-button"],["name","warning",2,"color","gold"],["value","advanced"],["ngFor","",3,"ngForOf"],[1,"alert-button",2,"margin","auto","width","100%",3,"click"],["name","time","slot","start"],[4,"ngIf"],["inputMode","text","clearInput","",3,"ngModel","ngModelChange"],[2,"text-align","start"],["text-center","","type","text","required","",3,"ngModel","ngModelChange","ionBlur"],[2,"display","inline-flex"],[1,"dark-control",2,"max-width","96%","text-align","center","height","34px",3,"ngModel","click","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"dark-control","img-list",2,"max-width","96%","text-align","center","height","34px",3,"ngModel","click","ionChange","ngModelChange"],["inputMode","text","clearInput","",3,"placeholder","ngModel","ngModelChange"],["name","create","slot","start"],["name","image","slot","start"],[2,"padding","0px 10px"],[1,"hr-2"],["placeholder","voice command",3,"ngModel","ngModelChange"],["input",""],[1,"full-primary-button",2,"margin","auto",3,"click"],["name","add"],[2,"text-align","center"],[1,"full-primary-button",2,"margin","auto",3,"disabled","click"],["name","create"],[2,"text-align","end"],[1,"danger-button",2,"margin","auto",3,"disabled","click"],["name","trash"],["class","item-style-1","style","margin:2px;",3,"background-color","click",4,"ngIf"],[1,"item-style-1",2,"margin","2px",3,"click"],[1,"alert-button",2,"margin","auto","width","100%",3,"disabled","click"],["tappable","",3,"click"],[1,"center-end"],[3,"value","width","labelOn","labelOff","change"],["tappable",""],["small","",1,"full-primary-button",3,"click"],[2,"font-size","small","display","block"],["type","number","pattern","\\d*",1,"full-size-input",3,"placeholder","ngModel","ngModelChange"],[2,"font-size","small"],[1,"break-line-grad"],["class","arm-card",3,"click",4,"ngFor","ngForOf"],[1,"arm-card",3,"click"],["item-start",""],[1,"arm-img",3,"src"],["style","font-size:small;",4,"ngIf"],[1,"default-toggle",2,"margin","5px",3,"ngModel","click","ngModelChange"],["stacked",""],["type","number","pattern","\\d*",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2),e.YNc(5,K,2,0,"a",3),e.TgZ(6,"a",4),e.NdJ("touchstart",function(){return t.longPressStart()})("touchend",function(){return t.PressEnd()}),e._UZ(7,"ion-icon",5),e.TgZ(8,"ion-badge",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7)(11,"a",8),e.NdJ("click",function(){return t.goBack()}),e._UZ(12,"ion-icon",9),e.qZA()(),e.TgZ(13,"div")(14,"ion-title"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()()(),e.TgZ(17,"ion-content",10)(18,"ion-segment",11),e.NdJ("ngModelChange",function(c){return t.currentPage=c}),e.TgZ(19,"ion-segment-button",12),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"ion-segment-button",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.YNc(25,Y,3,3,"ion-segment-button",14),e.qZA(),e.YNc(26,ie,21,14,"ng-template",15),e.YNc(27,ce,34,19,"ng-template",15),e.YNc(28,he,16,13,"ng-template",15),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngStyle",t.theAppState.iontoolbarStyle),e.xp6(4),e.Q6J("ngIf",!t.IsRefreshConnected),e.xp6(4),e.Oqu(t.speech_language_symbol),e.xp6(6),e.Oqu(e.lcZ(16,11,t.device)),e.xp6(3),e.Q6J("ngModel",t.currentPage),e.xp6(2),e.hij(" ",e.lcZ(21,13,"general")," "),e.xp6(3),e.hij(" ",e.lcZ(24,15,"voice")," "),e.xp6(2),e.Q6J("ngIf",t.advancedAvailable),e.xp6(1),e.Q6J("ngIf","general"==t.currentPage),e.xp6(1),e.Q6J("ngIf","voice"==t.currentPage),e.xp6(1),e.Q6J("ngIf","advanced"==t.currentPage))},dependencies:[A.sg,A.O5,A.PC,b.JJ,b.Q7,b.c5,b.On,r.BJ,r.yp,r.YG,r.nz,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.cJ,r.GO,r.t9,r.n0,r.wd,r.ho,r.sr,r.w,r.as,r.QI,r.j9,H.T,G.c,Q,k.X$],styles:["[_nghost-%COMP%]{padding:4px}[_nghost-%COMP%]   .ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .content-md[_ngcontent-%COMP%]{background:none}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{background-color:#708090!important}[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#639}[_nghost-%COMP%]   .list-button[_ngcontent-%COMP%]{height:20px;text-align:start}[_nghost-%COMP%]   .list-md[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .item-inner[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .arm-card[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .full-size-input[_ngcontent-%COMP%]   .text-input-md[_ngcontent-%COMP%]{margin:0;width:100%}[_nghost-%COMP%]   .item-cover[_ngcontent-%COMP%]{width:auto;height:auto}.select-icon[_ngcontent-%COMP%]{display:none}.hr-2[_ngcontent-%COMP%]{background:gray;height:2px}.label-md[_ngcontent-%COMP%]{line-height:1.5}.popover-md[_ngcontent-%COMP%]   .popover-content[_ngcontent-%COMP%]{width:80%;left:10%!important}.popover-md[_ngcontent-%COMP%]   .popover-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:2px 5px}ion-input[_ngcontent-%COMP%]{border-radius:5px;font-weight:700}ion-item.arm-card[_ngcontent-%COMP%]{margin-bottom:10px;box-shadow:.2vw .2vw 1vw #000000ba;background-color:#0003;border-radius:3vw}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:10px}ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;min-width:40px;min-height:40px}ion-button.alert-button[_ngcontent-%COMP%]{height:3.6rem;font-size:1.4rem;font-weight:500;text-transform:uppercase;color:#fff}ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2.6rem;line-height:4rem}.segment-button-checked[_ngcontent-%COMP%]{border-color:#aaa;opacity:1;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:#f5f5f5}.segment-button-disabled[_ngcontent-%COMP%]{opacity:.3;pointer-events:none}ion-segment-button[_ngcontent-%COMP%]{--color: gray;--color-checked: white;--background:linear-gradient(to bottom, rgba(53,90,117,1) 0%,rgba(8,54,86,1) 100%);--background-focused-opacity: 1;--borderborder-bottom-width: 2px;--border-top-style: solid}ion-label[_ngcontent-%COMP%]{margin:4px}ion-checkbox[_ngcontent-%COMP%]{padding:4px}"]}),s})()}];let ve=(()=>{var a;class s{}return(a=s).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[T.Bz.forChild(me),T.Bz]}),s})();var fe=g(23934);let Ce=(()=>{var a;class s{}return(a=s).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[A.ez,b.u5,r.Pc,b.UX,ve,fe.o,k.aw.forChild()]}),s})()},48753:(F,D,g)=>{g.d(D,{c:()=>b});var A=g(65879);let b=(()=>{var r;class T{constructor(y){this.elementRef=y}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(r=T).\u0275fac=function(y){return new(y||r)(A.Y36(A.SBq))},r.\u0275dir=A.lG2({type:r,selectors:[["","padding",""]]}),T})()}}]);