"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7931],{87931:(K,w,l)=>{l.r(w),l.d(w,{DashboardListPageModule:()=>R});var D=l(96814),T=l(56223),c=l(73582),I=l(70160),p=l(15861),_=l(31138),v=l(51141),N=l(56544),x=l(79805),S=l(44945),h=l(8873),y=l(19462),t=l(65879),M=l(46729),f=l(34414),k=l(93575),E=l(57922),C=l(63999),z=l(77935);function H(o,u){if(1&o){const r=t.EpF();t.TgZ(0,"a",11),t.NdJ("touchstart",function(e){t.CHM(r);const n=t.oxw();return t.KtG(n.longPressStart(e))})("touchend",function(){t.CHM(r);const e=t.oxw();return t.KtG(e.PressEnd())}),t._UZ(1,"ion-icon",12),t.TgZ(2,"ion-badge",13),t._uU(3),t.qZA()()}if(2&o){const r=t.oxw();t.xp6(3),t.Oqu(r.speech_language_symbol)}}function U(o,u){if(1&o){const r=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(r);const e=t.oxw();return t.KtG(e.CreateNewDashboard())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"add-new-dashboard")))}function B(o,u){1&o&&t._UZ(0,"ion-icon",28)}function O(o,u){if(1&o){const r=t.EpF();t.TgZ(0,"ion-item-options",29)(1,"ion-item-option",30),t.NdJ("click",function(){t.CHM(r);const e=t.oxw().$implicit,n=t.oxw();return t.KtG(n.editDashboard(e))}),t._UZ(2,"ion-icon",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-item-option",32),t.NdJ("click",function(){t.CHM(r);const e=t.oxw().$implicit,n=t.oxw();return t.KtG(n.duplicate(e))}),t._UZ(6,"ion-icon",33),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"ion-item-option",34),t.NdJ("click",function(){t.CHM(r);const e=t.oxw().$implicit,n=t.oxw();return t.KtG(n.deleteDashboard(e))}),t._UZ(10,"ion-icon",35),t._uU(11),t.ALo(12,"translate"),t.qZA()()}2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"edit")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"duplicate")," "),t.xp6(4),t.hij(" ",t.lcZ(12,7,"delete")," "))}function Y(o,u){if(1&o){const r=t.EpF();t.TgZ(0,"ion-item-sliding",15)(1,"ion-item",16)(2,"ion-grid",17)(3,"ion-row",18)(4,"ion-col",19),t._UZ(5,"ion-icon",20),t.TgZ(6,"h2",21),t._uU(7),t.qZA(),t.TgZ(8,"ion-badge",22),t._uU(9),t.qZA()(),t.TgZ(10,"ion-col",23)(11,"button",24),t.NdJ("click",function(){const n=t.CHM(r).$implicit,d=t.oxw();return t.KtG(d.openDashboard(n))}),t._UZ(12,"ion-icon",25),t.qZA()(),t.YNc(13,B,1,0,"ion-icon",26),t.qZA()()(),t.YNc(14,O,13,9,"ion-item-options",27),t.qZA()}if(2&o){const r=u.$implicit,a=t.oxw();t.xp6(5),t.Q6J("name",r.Orientation==a.DashboardOrientation.Landscape?"phone-landscape":"phone-portrait"),t.xp6(2),t.hij(" ",r.Name,""),t.xp6(2),t.AsE("",r.Rows,"\xa0x\xa0",r.Columns,""),t.xp6(4),t.Q6J("ngIf",a.ManagerAccess),t.xp6(1),t.Q6J("ngIf",a.ManagerAccess)}}const F=[{path:"",component:(()=>{var o;class u extends N.n{constructor(a,e,n,d,g,s,i,m,b,A,Z,L,P,G){if(super(a,e,Z,i,L,b,!1,P),this.loadingCtrl=n,this.screenOrientation=d,this.modalCtrl=g,this.networkInterface=s,this.popoverCtrl=m,this.navCtrl=L,this.router=P,this.toastCtrl=G,this.DashboardOrientation=x.Nj,this.list_of_dashboards=[],this.theAppState=h.a,this.searchQuery="",this.filtered_list_of_dashboards=[],this.entityParser=new S.V,h.a.DefaultController||this.navCtrl.navigateRoot(v.g6),h.a.DefaultController&&h.a.DefaultController.images&&(this.images=h.a.DefaultController.images),this.router.getCurrentNavigation().extras.state){const j=this.router.getCurrentNavigation().extras.state;this.navParams=j,console.log(this.navParams)}this.LoadAllDashboards()}LoadAllDashboards(){this.ManagerAccess=this.navParams.data.manage_access,console.log("Editing Enabled: "+this.ManagerAccess),h.a&&h.a.DefaultController?this.ManagerAccess?this.InitializeDashboardEntities():this.InitializeUserDashboards():h.a.AppFunctionality.ReloadApp()}InitializeDashboardEntities(){var a=this;return(0,p.Z)(function*(){_.B.showLoading2();for(let e=0;e<y.s.RetryRequests;e++)try{let n=yield h.a.DefaultController.GetDashboardEntitites();if(n){let d=[];for(let g=0;g<n.length;g++){let s=n[g],i=new x.A;if(i.Id=s.id,i.Name=s.name,i.Rows=s.rows,i.Columns=s.columns,i.Orientation=s.orientation,i.HeaderType=s.headerType,i.AutoHideHeader=s.autoHideHeader,i.CloseButtonHeader=s.closeButtonHeader,i.ImageId=s.imageId,i.SubDashboards=s.subDashboards,a.images&&0!=i.ImageId){let m=a.images.find(b=>b.id==i.ImageId);m&&(i.Image=m.main_url,i.ImageItem=m)}else i.Image=y.s.Images.dashboard;d.push(i)}return a.list_of_dashboards=d,a.initializeItems(),void _.B.dismissLoading2()}}catch(n){console.error(n),a.NetworkAlertRetrySuccessCallBack=a.InitializeDashboardEntities,a.NotifyEvents(n,!0)}_.B.dismissLoading2()})()}InitializeUserDashboards(){var a=this;return(0,p.Z)(function*(){_.B.showLoading2();for(let e=0;e<y.s.RetryRequests;e++)try{let n=yield h.a.DefaultController.GetDashboards(),d=[];if(n&&n.body&&n.body.result){for(let g=0;g<n.body.result.length;g++){let s=n.body.result[g],i=new x.A;if(i.Id=s.Id,i.Name=s.Name,i.Rows=s.Rows,i.Columns=s.Columns,i.Orientation=s.Orientation,i.HeaderType=s.HeaderType,i.AutoHideHeader=s.AutoHideHeader,i.CloseButtonHeader=s.CloseButtonHeader,i.ImageId=s.ImageId,i.SubDashboards=s.SubDashboards,a.images&&0!=i.ImageId){let m=a.images.find(b=>b.id==i.ImageId);m&&(i.Image=m.main_url,i.ImageItem=m)}else i.Image=y.s.Images.dashboard;d.push(i)}a.list_of_dashboards=d,a.initializeItems(),console.log(n);break}}catch(n){console.error(n),a.NetworkAlertRetrySuccessCallBack=a.InitializeUserDashboards,a.NotifyEvents(n,!0)}finally{_.B.dismissLoading2()}})()}ngOnInit(){this.ionViewDidEnter()}ionViewDidEnter(){super.ionViewDidEnter(),console.log("ionViewDidEnter DashboardListPage")}deleteDashboard(a){var e=this;return(0,p.Z)(function*(){e.ManagerAccess&&(yield e.alertCtrl.create({header:e.translate.instant("delete"),cssClass:"network-alert",message:e.translate.instant("are-you-sure-you-want-to-delete"),buttons:[{text:e.translate.instant("yes"),handler:()=>{console.log("delete dashboard",a);let d=e.ShowSimpleLoadingController();h.a.DefaultController.DeleteDashboard(a.Id).then(function(){var g=(0,p.Z)(function*(s){e.ManagerAccess&&((yield d).dismiss(),e.InitializeDashboardEntities())});return function(s){return g.apply(this,arguments)}}())}},{text:e.translate.instant("no"),role:"cancel"}],backdropDismiss:!0})).present()})()}editDashboard(a){this.ShowSimpleLoadingController(),h.a.DefaultController.GetDashboardForDesiging(a.Id).then(e=>{this.navCtrl.navigateForward(v.so,{state:{data:{manage_access:!0,dashboard_id:a.Id,dashboards:this.list_of_dashboards}}}),console.log("editing dashboard",this.navCtrl)})}SwitchOrientation(a){a==x.Nj.Portrait?this.portraitMode():a==x.Nj.Landscape&&this.landscapeMode()}portraitMode(){this.platform.is("capacitor")&&h.a.AppFunctionality.SwitchScreenToPortrait()}landscapeMode(){this.platform.is("capacitor")&&h.a.AppFunctionality.SwitchScreenToLandscape()}openDashboard(a){var e=this;return(0,p.Z)(function*(){let n=yield e.ShowSimpleLoadingController();h.a.DefaultController.GetDashboard(a.Id).then(d=>{e.SwitchOrientation(d.body.result.Orientation)}),e.router.navigateByUrl(v.so,{state:{data:{manage_access:!1,dashboard_id:a.Id,dashboards:e.list_of_dashboards}}}),console.log("opening dashboard",e.navCtrl),n.dismiss()})()}CreateNewDashboard(){var a=this;return(0,p.Z)(function*(){let e=yield a.ShowSimpleLoadingController();a.navCtrl.navigateForward(v.so,{state:{data:{manage_access:!0,dashboards:a.list_of_dashboards}}}),console.log("creating dashboard"),e.dismiss()})()}ShowSimpleLoadingController(){var a=this;return(0,p.Z)(function*(){let e=a.loadingCtrl.create({backdropDismiss:!0});return(yield e).present(),e})()}duplicate(a){var e=this;return(0,p.Z)(function*(){var d;e.ManagerAccess&&(yield e.alertCtrl.create({header:e.translate.instant("duplicate"),cssClass:"network-alert",message:e.translate.instant("are-you-sure-you-want-to-duplicate"),inputs:[{name:"newName",placeholder:e.translate.instant("new-name"),handler:d=>{}}],buttons:[{text:e.translate.instant("yes"),handler:(d=(0,p.Z)(function*(g){if(!g.newName||""==g.newName)return e.showToast(e.translate.instant("name-required")),!1;console.log("duplicate dashboard",a);let s=e.ShowSimpleLoadingController();h.a.DefaultController.GetDashboardForDesiging(a.Id).then(i=>{if(i){let m=e.entityParser.ParseDashboardEntity(i);if(m){m.Name=g.newName;let b=e.entityParser.dashboardToCreateOrUpdateEntity(m,!0);h.a.DefaultController.SaveDashboardNew(b).then(function(){var A=(0,p.Z)(function*(Z){e.ManagerAccess&&((yield s).dismiss(),e.InitializeDashboardEntities())});return function(Z){return A.apply(this,arguments)}}())}}}),s&&(yield s).dismiss()}),function(s){return d.apply(this,arguments)})},{text:e.translate.instant("no"),role:"cancel"}],backdropDismiss:!0})).present()})()}getItems(a){this.initializeItems();const e=a.target.value;e&&e.length>=2&&e&&""!=e.trim()&&(this.filtered_list_of_dashboards=this.list_of_dashboards.filter(n=>n.Name.toLowerCase().indexOf(e.toLowerCase())>-1))}initializeItems(){this.filtered_list_of_dashboards=this.list_of_dashboards}}return(o=u).\u0275fac=function(a){return new(a||o)(t.Y36(M.V0),t.Y36(f.t4),t.Y36(f.HT),t.Y36(k.E),t.Y36(f.IN),t.Y36(E.t),t.Y36(C.sK),t.Y36(f.Dh),t.Y36(t.R0b),t.Y36(z.Z),t.Y36(f.Br),t.Y36(f.SH),t.Y36(I.F0),t.Y36(f.yF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["dashboard-list"]],features:[t.qOj],decls:20,vars:10,consts:[["hideBackButton","true",2,"text-align","center",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],["class","top-mic-button","style","vertical-align:bottom;",3,"touchstart","touchend",4,"ngIf"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding",""],["animated","true","debounce","500",3,"placeholder","ionInput"],["ion-button","","class","full-primary-button","style","width:100%; margin:10px 0px;",3,"click",4,"ngIf"],["style","border-radius: 5px;height: 85px;","class","sliding-list-item",4,"ngFor","ngForOf"],[1,"top-mic-button",2,"vertical-align","bottom",3,"touchstart","touchend"],["name","mic",1,"voice-mic-button"],[1,"top-badge"],["ion-button","",1,"full-primary-button",2,"width","100%","margin","10px 0px",3,"click"],[1,"sliding-list-item",2,"border-radius","5px","height","85px"],["detail-push",""],[2,"--padding-start","10px"],[1,"ion-align-items-center","ion-justify-content-between"],["size","8",2,"margin-bottom","10px","margin-left","-10px"],[2,"margin-bottom","-3px",3,"name"],[2,"text-align","start","margin","6px","display","inline"],[1,"default-badge"],["size","3",2,"text-align","end","margin-top","-7px"],["ion-button","","item-end","",1,"lock",2,"padding","10px","width","60px","height","60px","margin","5px 0px 0px 0px",3,"click"],["name","eye"],["style","margin-right: 0px;\n              font-size: xx-large;","item-end","","name","chevron-back",4,"ngIf"],["side","end",4,"ngIf"],["item-end","","name","chevron-back",2,"margin-right","0px","font-size","xx-large"],["side","end"],[2,"background","#338","font-size","1.3rem",3,"click"],["slot","top","name","create"],[2,"background","#388","font-size","1.3rem",3,"click"],["slot","top","name","copy"],[2,"background","#833","font-size","1.3rem",3,"click"],["slot","top","name","close"]],template:function(a,e){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2),t.YNc(5,H,4,1,"a",3),t.qZA(),t.TgZ(6,"div",4)(7,"a",5),t.NdJ("click",function(){return e.goBack()}),t._UZ(8,"ion-icon",6),t.qZA()(),t.TgZ(9,"div")(10,"ion-title"),t._uU(11),t.ALo(12,"translate"),t.qZA()()()()()(),t.TgZ(13,"ion-content",7)(14,"div")(15,"ion-searchbar",8),t.NdJ("ionInput",function(d){return e.getItems(d)}),t.ALo(16,"translate"),t.qZA(),t.YNc(17,U,3,3,"button",9),t.TgZ(18,"ion-list"),t.YNc(19,Y,15,6,"ion-item-sliding",10),t.qZA()()()),2&a&&(t.xp6(1),t.Q6J("ngStyle",e.theAppState.iontoolbarStyle),t.xp6(4),t.Q6J("ngIf",e.platform.is("ios")||e.platform.is("android")),t.xp6(6),t.Oqu(t.lcZ(12,6,"dashboards")),t.xp6(4),t.s9C("placeholder",t.lcZ(16,8,"search")),t.xp6(2),t.Q6J("ngIf",e.ManagerAccess),t.xp6(2),t.Q6J("ngForOf",e.filtered_list_of_dashboards))},dependencies:[D.sg,D.O5,D.PC,c.yp,c.wI,c.W2,c.jY,c.Gu,c.gu,c.Ie,c.u8,c.IK,c.td,c.q_,c.Nd,c.VI,c.wd,c.sr,c.j9,C.X$]}),u})()}];let J=(()=>{var o;class u{}return(o=u).\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[I.Bz.forChild(F),I.Bz]}),u})(),R=(()=>{var o;class u{}return(o=u).\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[D.ez,T.u5,c.Pc,J,C.aw]}),u})()}}]);