"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2904,9764],{22904:(k,A,o)=>{o.r(A),o.d(A,{SmartSpaceListPageModule:()=>Y});var l=o(96814),m=o(56223),u=o(73582),D=o(70160),L=o(15861),w=o(19462),_=o(8873),O=o(51141),i=o(31138),g=o(56544),S=o(16568),C=o(11998),t=o(79805),e=o(65879),c=o(46729),n=o(34414),M=o(77935),x=o(63999),I=o(59764),F=o(48753);function V(h,P){if(1&h){const f=e.EpF();e.TgZ(0,"ion-item-sliding",14)(1,"ion-item",15)(2,"ion-label",16),e._UZ(3,"img",17),e.TgZ(4,"h2",18),e._uU(5),e.qZA(),e.TgZ(6,"ion-badge",19),e._uU(7),e.qZA()(),e.TgZ(8,"button",20),e.NdJ("click",function(){const s=e.CHM(f).$implicit,v=e.oxw();return e.KtG(v.openSmartSpace(s))}),e._UZ(9,"ion-icon",21),e.qZA(),e._UZ(10,"ion-icon",22),e.qZA(),e.TgZ(11,"ion-item-options",23)(12,"ion-item-option",24),e.NdJ("click",function(){const s=e.CHM(f).$implicit,v=e.oxw();return e.KtG(v.editSmartSpace(s))}),e._UZ(13,"ion-icon",25),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"ion-item-option",26),e._UZ(17,"ion-icon",27),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"ion-item-option",28),e._UZ(21,"ion-icon",29),e._uU(22),e.ALo(23,"translate"),e.qZA()()()}if(2&h){const f=P.$implicit;e.xp6(3),e.Q6J("src",null==f?null:f.ThumbnailFile,e.LSH),e.xp6(2),e.Oqu(f.Name),e.xp6(2),e.Oqu(f.Description),e.xp6(7),e.hij(" ",e.lcZ(15,6,"edit")," "),e.xp6(4),e.hij(" ",e.lcZ(19,8,"duplicate")," "),e.xp6(4),e.hij(" ",e.lcZ(23,10,"delete")," ")}}const U=[{path:"",component:(()=>{var h;class P extends g.n{constructor(r,a,s,v,E,p,d,b,G,R,B,Z){super(r,a,E,b,s,G,!1,Z,B,p,d),this.navCtrl=s,this.navParams=v,this.popoverCtrl=d,this.loadingCtrl=R,this.toastCtrl=B,this.router=Z,this.list_of_smartSpaces=[],this.theAppState=_.a,this.list_of_dashboards=[],this.searchQuery="",this.filtered_list_of_smartSpaces=[],this.LoadAllSmartSpaces()}LoadAllSmartSpaces(){_.a&&_.a.DefaultController?(this.InitializeSmartSpaceEntities(),this.InitializeUserDashboards()):_.a.AppFunctionality.ReloadApp()}InitializeUserDashboards(){var r=this;return(0,L.Z)(function*(){for(let a=0;a<w.s.RetryRequests;a++)try{let s=yield _.a.DefaultController.GetDashboardEntitites();if(console.log("loaded dashboards",s),s){let E=[];for(let p=0;p<s.length;p++){let d=s[p],b=new t.A;b.Id=d.id,b.Name=d.name,b.Rows=d.rows,b.Columns=d.columns,b.Orientation=d.orientation,b.HeaderType=d.headerType,b.AutoHideHeader=d.autoHideHeader,b.CloseButtonHeader=d.closeButtonHeader,b.ImageId=d.imageId,b.SubDashboards=d.subDashboards,b.Image=w.s.Images.dashboard,E.push(b)}return void(r.list_of_dashboards=E)}}catch(s){console.error(s),r.NetworkAlertRetrySuccessCallBack=r.InitializeUserDashboards,r.NotifyEvents(s,!0)}})()}ShowSimpleLoadingController(){var r=this;return(0,L.Z)(function*(){let a=yield r.loadingCtrl.create({backdropDismiss:!0});return a.present(),a})()}editSmartSpace(r){var a=this;return(0,L.Z)(function*(){let s=yield a.ShowSimpleLoadingController();_.a.DefaultController.GetSmartSpaceEntititesDTO(r.Id).then(v=>{a.navCtrl.navigateForward(O.gg,{state:{data:{manage_access:!0,smart_space_id:r.Id,dashboards:a.list_of_dashboards}}}).then(()=>{s.dismiss()}),console.log("editing smartSpace",a.navCtrl)})})()}openSmartSpace(r){var a=this;return(0,L.Z)(function*(){let s=yield a.ShowSimpleLoadingController();a.navCtrl.navigateForward(O.gg,{state:{data:{manage_access:!1,smart_space_id:r.Id,dashboards:a.list_of_dashboards}}}).then(()=>{s.dismiss(),console.log("opening smartSpace",a.navCtrl)})})()}InitializeSmartSpaceEntities(){var r=this;return(0,L.Z)(function*(){i.B.showLoading2();for(let a=0;a<w.s.RetryRequests;a++)try{let s=yield _.a.DefaultController.GetSmartSpaceEntitites();if(s){let v=[];for(let E=0;E<s.length;E++){let p=s[E];console.log(p);let d=new S.kg;d.Id=p.id,d.Name=p.name,d.Description=p.description,d.Type=p.type,d.ThumbnailFile=C.p.currentIp+"/"+p.thumbnailFile,d.DataFile=p.dataFile,d.Items=p.items,v.push(d)}return r.list_of_smartSpaces=v,r.initializeItems(),void i.B.dismissLoading2()}}catch(s){console.error(s),r.NetworkAlertRetrySuccessCallBack=r.InitializeSmartSpaceEntities,r.NotifyEvents(s,!0)}i.B.dismissLoading2()})()}getItems(r){this.initializeItems();const a=r.target.value;a&&a.length>=2&&a&&""!=a.trim()&&(this.filtered_list_of_smartSpaces=this.list_of_smartSpaces.filter(s=>s.Name.toLowerCase().indexOf(a.toLowerCase())>-1))}initializeItems(){this.filtered_list_of_smartSpaces=this.list_of_smartSpaces}ionViewDidEnter(){console.log("ionViewDidLoad SmartSpaceListPage")}}return(h=P).\u0275fac=function(r){return new(r||h)(e.Y36(c.V0),e.Y36(n.t4),e.Y36(n.SH),e.Y36(n.X1),e.Y36(n.Br),e.Y36(M.Z),e.Y36(n.Dh),e.Y36(x.sK),e.Y36(e.R0b),e.Y36(n.HT),e.Y36(n.yF),e.Y36(D.F0))},h.\u0275cmp=e.Xpm({type:h,selectors:[["smart-space-list"]],features:[e.qOj],decls:27,vars:12,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],["showWhen","android,ios",1,"top-mic-button",2,"vertical-align","bottom",3,"touchstart","touchend"],["name","mic",1,"voice-mic-button"],[1,"top-badge"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding",""],["animated","true","debounce","500",3,"placeholder","ionInput"],["disabled","","ion-button","",1,"full-primary-button",2,"width","100%","margin","10px 0px"],["name","add"],["class","sliding-list-item",4,"ngFor","ngForOf"],[1,"sliding-list-item"],["detail-push",""],[2,"overflow","visible","display","flex","flex-direction","row","justify-content","flex-start","align-items","center"],[2,"align-items","center","width","4vh",3,"src"],[2,"font-size","3vh","text-align","start","margin","6px","display","inline"],[1,"default-badge"],[1,"lock",3,"click"],["name","eye"],["slot","end","name","chevron-back"],["side","end"],[2,"background","#338",3,"click"],["name","create"],["disabled","","ion-button","",2,"background","#388"],["name","copy"],["disabled","","ion-button","",2,"background","#833"],["name","close"]],template:function(r,a){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2),e._UZ(5,"connection-warning"),e.TgZ(6,"a",3),e.NdJ("touchstart",function(v){return a.longPressStart(v)})("touchend",function(){return a.PressEnd()}),e._UZ(7,"ion-icon",4),e.TgZ(8,"ion-badge",5),e._uU(9),e.qZA()()(),e.TgZ(10,"div",6)(11,"a",7),e.NdJ("click",function(){return a.goBack()}),e._UZ(12,"ion-icon",8),e.qZA()(),e.TgZ(13,"div")(14,"ion-title"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()()(),e.TgZ(17,"ion-content",9)(18,"div")(19,"ion-searchbar",10),e.NdJ("ionInput",function(v){return a.getItems(v)}),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",11),e._uU(22),e.ALo(23,"translate"),e._UZ(24,"ion-icon",12),e.qZA(),e.TgZ(25,"ion-list"),e.YNc(26,V,24,12,"ion-item-sliding",13),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("ngStyle",a.theAppState.iontoolbarStyle),e.xp6(8),e.Oqu(a.speech_language_symbol),e.xp6(6),e.Oqu(e.lcZ(16,6,"smart-space")),e.xp6(4),e.s9C("placeholder",e.lcZ(20,8,"search")),e.xp6(3),e.Oqu(e.lcZ(23,10,"add-new-smartSpace")),e.xp6(4),e.Q6J("ngForOf",a.filtered_list_of_smartSpaces))},dependencies:[l.sg,l.PC,u.yp,u.W2,u.Gu,u.gu,u.Ie,u.u8,u.IK,u.td,u.Q$,u.q_,u.VI,u.wd,u.sr,u.j9,I.T,F.c,x.X$],styles:["ion-slide[_ngcontent-%COMP%]{overflow:scroll}.list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]{background:none;background-color:none}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0px;padding:0}ion-searchbar[_ngcontent-%COMP%]{font-size:1.6rem}ion-item-option[_ngcontent-%COMP%]{font-size:1.6rem;background-color:#5353534d;box-shadow:1px 1px 3px #333;border-radius:3px}.full-primary-button[_ngcontent-%COMP%]{display:block;margin:4px 0;width:-webkit-fill-available}"]}),P})()}];let H=(()=>{var h;class P{}return(h=P).\u0275fac=function(r){return new(r||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[D.Bz.forChild(U),D.Bz]}),P})();var y=o(23934);let Y=(()=>{var h;class P{}return(h=P).\u0275fac=function(r){return new(r||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[l.ez,m.u5,u.Pc,H,x.aw.forChild(),y.o]}),P})()},59764:(k,A,o)=>{o.d(A,{T:()=>L});var l=o(15861),m=o(65879),u=o(56223),D=o(28662);let L=(()=>{var w;class _{mouseDownEventHandler(i){i.stopImmediatePropagation(),i.preventDefault()}keyEventHandler(i){var g=this;return(0,l.Z)(function*(){if(i.stopImmediatePropagation(),i.preventDefault(),"Enter"==i.key||" "==i.key){var S;let C=null===(S=document.activeElement)||void 0===S?void 0:S.className.toLowerCase();if(C&&(C.indexOf("range-knob-handle")>-1||C.indexOf("range-md")>-1)&&C.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let c=document.activeElement.getAttribute("aria-valuenow");if(c){let n=Number.parseFloat(c);if(n||0===n)return console.log("range-knob-handle value change to "+n),void g.model.update.emit(n)}}let t=g.el.nativeElement.nodeName.toLowerCase();const e=yield D.A.getInfo();["button","ion-checkbox","a"].indexOf(t)>-1?"android"!==e.operatingSystem.toLowerCase()&&g.el.nativeElement.click():"!android"!==e.operatingSystem.toLowerCase()&&g.clickOnElement(g.el)}})()}clickOnElement(i){if(document.createEvent){let g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.nativeElement.dispatchEvent(g)}}mouseDownOnElement(i){let g=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});i.nativeElement.dispatchEvent(g)}constructor(i,g,S){this.el=i,this.renderer=g,this.model=S,this.eventEmitter=new m.vpe}ngOnInit(){}}return(w=_).\u0275fac=function(i){return new(i||w)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(u.On))},w.\u0275dir=m.lG2({type:w,selectors:[["","component-click",""]],hostBindings:function(i,g){1&i&&m.NdJ("mousedown",function(C){return g.mouseDownEventHandler(C)})("keypress",function(C){return g.keyEventHandler(C)})},outputs:{eventEmitter:"eventEmitter"},features:[m._Bn([u.On])]}),_})()},48753:(k,A,o)=>{o.d(A,{c:()=>m});var l=o(65879);let m=(()=>{var u;class D{constructor(w){this.elementRef=w}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(u=D).\u0275fac=function(w){return new(w||u)(l.Y36(l.SBq))},u.\u0275dir=l.lG2({type:u,selectors:[["","padding",""]]}),D})()},16568:(k,A,o)=>{o.d(A,{AE:()=>S,PE:()=>i,W7:()=>O,eu:()=>C,hO:()=>_,kB:()=>w,kg:()=>L});var l=o(77144),m=o(1901),u=function(t){return t[t.BIM=0]="BIM",t}(u||{}),D=function(t){return t[t._3ds=0]="_3ds",t[t.json=1]="json",t[t.glb=2]="glb",t[t.gltf=3]="gltf",t[t.ifc=4]="ifc",t[t.laz=5]="laz",t[t.stl=6]="stl",t[t.xkt=7]="xkt",t[t.xml3d=8]="xml3d",t[t.obj=9]="obj",t}(D||{});class L{constructor(){this.Type=u.BIM,this._Models=[],this.Items=[],this.Areas=[]}get Models(){return this._Models}set Models(e){this._Models=e}}class w{constructor(){this.Type=D._3ds}}class _{constructor(){this.Type=S.Thing,this.ThingType=m.a.Device,this.Selectable=!1,this._item_guid="",this.Visable=!1,this.Eye=[],this.Look=[],this.Up=[],this.WorldPos=[],this.EntityId="",this.ShowAnnotationLabel=!1}get Description(){return this.Type==S.Thing?"Thing-"+(this._Item&&this._Item.isScene?"(SCENE)":"")+this.Name:this.Name}get ImageStateUrl(){return this.ImageItem.getStateImage(this.Item.value)}get Item(){return this._Item}set Item(e){this._Item=e}onValueChangeListener(e,c,n){c.ImageItem&&(c.Image=c.ImageItem.getStateImage(n))}}class O{constructor(){this.Eye=[],this.Look=[],this.Up=[],this.IsDefault=!1}}var i=function(t){return t[t.Checkbox=0]="Checkbox",t[t.DateFormat=1]="DateFormat",t[t.TimeFormat=2]="TimeFormat",t[t.Number=3]="Number",t[t.CommandsType=4]="CommandsType",t[t.Icon=5]="Icon",t[t.String=6]="String",t[t.ListOfCamerasViews=7]="ListOfCamerasViews",t[t.ListOfGaugeTypes=8]="ListOfGaugeTypes",t[t.ListOfWidths=9]="ListOfWidths",t[t.ListOfHeights=10]="ListOfHeights",t}(i||{}),S=function(t){return t[t.Undefined=0]="Undefined",t[t.Thing=1]="Thing",t[t.Command=2]="Command",t[t.Image=3]="Image",t[t.ImageSlides=4]="ImageSlides",t[t.Video=5]="Video",t[t.Content=6]="Content",t[t.DateTime=7]="DateTime",t[t.Calendar=8]="Calendar",t[t.Weather=9]="Weather",t[t.GlobalVariable=10]="GlobalVariable",t[t.Dashboard=11]="Dashboard",t}(S||{});class C{get ShowApps(){return"ShowApps"}get AllowDetailAccess(){return"AllowDetailAccess"}get ShowArrowKeys(){return"ShowArrowKeys"}get ShowChannelControl(){return"ShowChannelControl"}get ShowChannelStatus(){return"ShowChannelStatus"}get ShowSources(){return"ShowSources"}get ShowExtraKeys(){return"ShowExtraKeys"}get ShowFunctionKeys(){return"ShowFunctionKeys"}get ShowMediaControl(){return"ShowMediaControl"}get ShowMediaControlStatus(){return"ShowMediaControlStatus"}get ShowNumberPadControl(){return"ShowNumberPadControl"}get ShowPowerCommand(){return"ShowPowerCommand"}get ShowPowerStatus(){return"ShowPowerStatus"}get ShowSourceStatus(){return"ShowSourceStatus"}get ShowVolumeControl(){return"ShowVolumeControl"}get ShowVolumeMute(){return"ShowVolumeMute"}get ShowVolumeStatus(){return"ShowVolumeStatus"}get ShowLastChanged(){return"ShowLastChanged"}get ShowIcon(){return"ShowIcon"}get ShowText(){return"ShowText"}get ShowButton(){return"ShowButton"}get ShowMainReading(){return"ShowMainReading"}get ShowDetailedReading(){return"ShowDetailedReading"}get ShowPowerGauge(){return"ShowPowerGauge"}get ShowVoltGauge(){return"ShowVoltGauge"}get ShowCurrentGauge(){return"ShowCurrentGauge"}get ShowFlowGauge(){return"ShowFlowGauge"}get ShowTitle(){return"ShowTitle"}get ShowLabel(){return"ShowLabel"}get Label(){return"Label"}get ShowDate(){return"ShowDate"}get ShowTime(){return"ShowTime"}get ShowCity(){return"ShowCity"}get ShowTemperature(){return"ShowTemperature"}get ShowLocation(){return"ShowLatLon"}get ShowWind(){return"ShowWind"}get ShowHumidity(){return"ShowHumidity"}get TemperatureScale(){return"TemperatureScale"}get ShowSourceCommand(){return"ShowSourceCommand"}get ShowControls(){return"ShowControls"}get Camera(){return"Camera"}get GlobalVariable(){return"GlobalVariable"}get CameraViews(){return"CameraViews"}get GaugeTypes(){return"GaugeTypes"}get ShowCameraPreview(){return"ShowCameraPreview"}get ShowInformation(){return"ShowInformation"}get ShowInformationOnOverlay(){return"ShowInformationOnOverlay"}get ShowDeviceTypesButtons(){return"ShowDeviceTypesButtons"}get OverlayInfoMinimumFontSize(){return"OverlayInfoMinimumFontSize"}get OverlayBackground(){return"OverlayBackground"}get PreferLiveView(){return"PreferLiveView"}get ShowBrightness(){return"ShowBrightness"}get ShowColorSwatches(){return"ShowColorSwatches"}get ShowWhite(){return"ShowWhite"}get ShowAnimation(){return"ShowAnimation"}get ShowHue(){return"ShowHue"}get ShowWeather(){return"ShowWeather"}get ShowLastValueTime(){return"ShowLastValueTime"}get ShowValue(){return"ShowValue"}get ShowSetTemperature(){return"ShowSetTemperature"}get ShowModes(){return"ShowModes"}get ShowDetails(){return"ShowDetails"}get ShowSlider(){return"ShowSlider"}get ShowButtonsAsValue(){return"ShowButtonsAsValue"}get ShowButtonsValueLabels(){return"ShowButtonsValueLabels"}get ShowMultiMedia(){return"ShowMultiMedia"}get ShowButtons(){return"ShowButtons"}get Loop(){return"Loop"}get AutoPlay(){return"AutoPlay"}get Duration(){return"Duration"}get Dashboard(){return"Dashboard"}get Icon(){return"Icon"}get VideoStreaming(){return"VideoStreaming"}get ImageSequence(){return"ImageSequence"}get Live(){return"Live"}get ShowBackground(){return"ShowBackground"}get EnableFloat(){return"EnableFloat"}get CommandDisplay(){return"CommandDisplay"}get AnnotaionDialogWidth(){return"AnnotaionDialogWidth"}get AnnotaionDialogHeight(){return"AnnotaionDialogHeight"}get DateFormat(){return"DateFormat"}get Unfocusable(){return"Unfocusable"}get TimeFormat(){return"TimeFormat"}getOptionNamesByItemType(e,c){let n=[];if(n.push(this.ShowTitle),n.push(this.ShowIcon),n.push(this.ShowBackground),e==S.Thing&&c)switch(n.push(this.ShowControls),c){case l.Y.Switch:break;case l.Y.Dimmer:n.push(this.ShowSlider);break;case l.Y.RGB:n.push(this.ShowHue),n.push(this.ShowBrightness);break;case l.Y.Shutter:n.push(this.ShowSlider);break;case l.Y.VirtualDevice:n.push(this.ShowText),n.push(this.ShowButton),n.push(this.ShowSlider);break;case l.Y.Thermostat:n.push(this.ShowSetTemperature),n.push(this.ShowModes),n.push(this.ShowDetails),n.push(this.ShowWeather);break;case l.Y.PowerMeter:n.push(this.ShowMainReading),n.push(this.ShowDetailedReading),n.push(this.ShowPowerGauge),n.push(this.ShowVoltGauge),n.push(this.ShowCurrentGauge);break;case l.Y.WaterMeter:case l.Y.AcMeter:n.push(this.ShowMainReading),n.push(this.ShowDetailedReading);break;case l.Y.GenericMeter:n.push(this.ShowMainReading)}}getControlTypeByName(e){switch(e){case this.DateFormat:return i.DateFormat;case this.AnnotaionDialogHeight:return i.ListOfHeights;case this.AnnotaionDialogWidth:return i.ListOfWidths;case this.TimeFormat:return i.TimeFormat;case this.CommandDisplay:return i.CommandsType;case this.AutoPlay:return i.Checkbox;case this.Duration:return i.Number;case this.Label:return i.String;case this.Icon:return i.Icon;case this.CameraViews:return i.ListOfCamerasViews;case this.GaugeTypes:return i.ListOfGaugeTypes;case this.OverlayInfoMinimumFontSize:return i.Number;default:return i.Checkbox}}}}}]);