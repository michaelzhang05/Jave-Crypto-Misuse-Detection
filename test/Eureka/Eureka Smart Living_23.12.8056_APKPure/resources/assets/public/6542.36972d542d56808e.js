"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6542,9764],{76542:(k,Z,r)=>{r.r(Z),r.d(Z,{RecoverPasswordPageModule:()=>z});var x=r(96814),_=r(56223),a=r(73582),P=r(70160),u=r(15861),d=r(11998),m=r(8873),b=r(15697),p=r(31347),g=r(73638),f=r(44966),w=r(31138),e=r(65879),v=r(34414),C=r(77935),y=r(63999),R=r(59764),M=r(69705),O=r(48753);function q(s,l){1&s&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"enter-username")))}function E(s,l){1&s&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"choose-recovery-method-email-or-phone")))}function U(s,l){if(1&s&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,"email"==o.recoveryType?"enter-email":"phone"==o.recoveryType?"enter-phone":"unknown-recovery-type"))}}function N(s,l){1&s&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"enter-code")))}function L(s,l){1&s&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"enter-new-password")))}function J(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div",12)(1,"ion-label",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-input",14),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.username=n)}),e.qZA(),e.TgZ(5,"ion-button",15),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.skipUserName())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ion-footer")(9,"ion-grid")(10,"ion-row")(11,"ion-col")(12,"button",16),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.goBack())}),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"ion-col")(16,"button",17),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openPage("step2"))}),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()()()}if(2&s){const o=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"username")),e.xp6(2),e.Q6J("ngModel",o.username),e.xp6(2),e.Oqu(e.lcZ(7,8,"skip-username")),e.xp6(7),e.hij(" ",e.lcZ(14,10,"cancel")," "),e.xp6(3),e.Q6J("disabled",!o.username||o.username.length<1),e.xp6(1),e.Oqu(e.lcZ(18,12,"next"))}}function I(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div",18)(1,"ion-grid")(2,"ion-row")(3,"ion-col")(4,"ion-button",19),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.changeRecoverType("email"))}),e._UZ(5,"ion-icon",20),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-button",19),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.changeRecoverType("phone"))}),e._UZ(11,"ion-icon",21),e._uU(12),e.ALo(13,"translate"),e.qZA()()()(),e.TgZ(14,"ion-footer")(15,"ion-grid")(16,"ion-row")(17,"ion-col")(18,"button",16),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openPage("step1"))}),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e._UZ(21,"ion-col"),e.qZA()()()()}2&s&&(e.xp6(6),e.hij("\xa0",e.lcZ(7,3,"email"),""),e.xp6(6),e.hij("\xa0",e.lcZ(13,5,"phone"),""),e.xp6(7),e.Oqu(e.lcZ(20,7,"back")))}function B(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div")(1,"div",9)(2,"ion-label",23),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-input",24),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.email=n)}),e.qZA()()}if(2&s){const o=e.oxw(2);e.xp6(3),e.hij("",e.lcZ(4,2,"email"),"*"),e.xp6(2),e.Q6J("ngModel",o.email)}}function H(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div")(1,"div",9)(2,"ion-label",23),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-input",24),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.phone=n)}),e.qZA()()}if(2&s){const o=e.oxw(2);e.xp6(3),e.hij("",e.lcZ(4,2,"phone"),"*"),e.xp6(2),e.Q6J("ngModel",o.phone)}}function S(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div",18),e.YNc(1,B,6,4,"div",8),e.YNc(2,H,6,4,"div",8),e.TgZ(3,"p",22),e._uU(4),e.qZA(),e.TgZ(5,"ion-footer")(6,"ion-grid")(7,"ion-row")(8,"ion-col")(9,"button",16),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openPage("step2"))}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"ion-col")(13,"ion-button",17),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.requestOtp())}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()()()}if(2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngIf","email"==o.recoveryType),e.xp6(1),e.Q6J("ngIf","phone"==o.recoveryType),e.xp6(2),e.Oqu(o.request_message_response),e.xp6(6),e.Oqu(e.lcZ(11,6,"back")),e.xp6(3),e.Q6J("disabled",!(o.email||o.phone)),e.xp6(1),e.Oqu(e.lcZ(15,8,"next"))}}function D(s,l){if(1&s&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&s){const o=e.oxw(2);e.xp6(1),e.Oqu(o.request_otp_message)}}function Y(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div"),e.YNc(1,D,2,1,"p",8),e.TgZ(2,"ion-grid",25)(3,"ion-row")(4,"ion-col",26)(5,"div",27)(6,"ion-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"ion-input",28),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.otp_code=n)})("keypress",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.numberOnly(n))})("ngModelChange",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.onOtpChanged())}),e.qZA(),e.TgZ(10,"div",29)(11,"ion-button",30),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.requestOtp())}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()(),e.TgZ(14,"ion-row")(15,"ion-col")(16,"p",22),e._uU(17),e._UZ(18,"br"),e._uU(19),e.qZA()()()(),e.TgZ(20,"ion-footer")(21,"ion-grid")(22,"ion-row")(23,"ion-col")(24,"button",16),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openPage("step3"))}),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"ion-col")(28,"ion-button",17),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.verifyOtp())}),e._uU(29),e.ALo(30,"translate"),e.qZA()()()()()()}if(2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.alreadySend&&!o.codeExpired),e.xp6(6),e.Oqu(e.lcZ(8,14,"verification-code")),e.xp6(2),e.Udp("font-weight",o.otp_code&&6==o.otp_code.length?"bolder":"normal")("caret-color",o.otp_code&&6==o.otp_code.length?"transparent":"inherit"),e.Q6J("ngModel",o.otp_code),e.xp6(2),e.Q6J("disabled",o.alreadySend),e.xp6(1),e.Oqu(e.lcZ(13,16,"resend")),e.xp6(5),e.hij(" ",o.verify_otp_message,""),e.xp6(2),e.hij(" ",o.request_message_response," "),e.xp6(6),e.Oqu(e.lcZ(26,18,"back")),e.xp6(3),e.Q6J("disabled",!(o.otp_code&&6==o.otp_code.length)||o.verifyingOtp),e.xp6(1),e.Oqu(e.lcZ(30,20,"next"))}}function K(s,l){1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"new-and-retype-password-must-be-same")))}function Q(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div")(1,"ion-grid")(2,"ion-row")(3,"ion-col")(4,"ion-item")(5,"ion-label",31),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ion-input",32),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.password=n)}),e.qZA()()()(),e.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-item")(12,"ion-label",31),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"ion-input",32),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.retypePassword=n)}),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col")(18,"p",22),e.YNc(19,K,3,3,"span",8),e._uU(20),e.qZA()()()(),e.TgZ(21,"ion-footer")(22,"ion-grid")(23,"ion-row")(24,"ion-col")(25,"button",16),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openPage("step4"))}),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"ion-col")(29,"ion-button",17),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.changePassword())}),e._uU(30),e.ALo(31,"translate"),e.qZA()()()()()()}if(2&s){const o=e.oxw();e.xp6(6),e.hij("",e.lcZ(7,9,"new-password"),"*"),e.xp6(2),e.Q6J("ngModel",o.password),e.xp6(5),e.hij("",e.lcZ(14,11,"retype-password"),"*"),e.xp6(2),e.Q6J("ngModel",o.retypePassword),e.xp6(4),e.Q6J("ngIf",o.password&&o.retypePassword&&o.retypePassword!=o.password),e.xp6(1),e.hij(" ",o.password_change_message," "),e.xp6(6),e.Oqu(e.lcZ(27,13,"back")),e.xp6(3),e.Q6J("disabled",!o.password||!o.retypePassword||o.retypePassword!=o.password),e.xp6(1),e.Oqu(e.lcZ(31,15,"change-password"))}}function G(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"br"),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"b"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"ion-footer")(16,"ion-grid")(17,"ion-row")(18,"ion-col")(19,"button",33),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openPage("step4"))}),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"ion-col")(23,"ion-button",19),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.goBack())}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()()()()}if(2&s){const o=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,8,"your-password-changed-successfully")," "),e.xp6(3),e.AsE(" ",e.lcZ(6,10,"your-username-is")," ",o.username,". "),e.xp6(3),e.hij(" ",e.lcZ(9,12,"please-click")," "),e.xp6(3),e.hij("",e.lcZ(12,14,"close")," "),e.xp6(2),e.hij(" ",e.lcZ(14,16,"to-go-login-screen"),"/p> "),e.xp6(7),e.Oqu(e.lcZ(21,18,"back")),e.xp6(4),e.Oqu(e.lcZ(25,20,"close"))}}const j=[{path:"",component:(()=>{var s;class l{constructor(t,n,i,T,c,h,V,$,A,X,ee,te,ne,oe,se){this.navCtrl=t,this.popoverCtrl=n,this.ionicApp=i,this.alertCtrl=T,this.platform=c,this.toastCtrl=h,this.settings=V,this.jsonRPC=$,this.translate=A,this.navParams=X,this.router=ee,this.modalCtrl=te,this.overlayCtrl=ne,this.loadingCtrl=oe,this.routerOutlet=se,this.recoveryType="phone",this.verifyingOtp=!1,this.request_otp_message="",this.page="step1",this.request_message_response="",this.verify_otp_message="",this.remaining_time=120,this.theAppState=m.a,this.timerUpdateId=-1,this.alreadySend=!1,this.codeExpired=!1,this.email_message="A confirmation email containing a verification code (OTP) have been sent to your registered email address {}.\nThe verification code will expire after {time}.\nIf you do not find the email in your inbox, please check spam folder.",this.phone_message="\nA confirmation SMS containing a verification code (OTP) have been sent to your registered phone number {}.\nThe verification code will expire after {time}. If you do not receive an SMS, please make sure the phone number is a valid phone number and includes country calling code.\n",this.password_change_message="",this.request_button_name=A.instant("resend"),window.onpopstate=null,this.init()}init(){var t=this;return(0,u.Z)(function*(){try{if(m.a.platform=t.platform,t.navParams.data&&t.navParams.data.ctrl)t.recoveryController=t.navParams.data.ctrl;else{yield t.settings.load();let n=yield t.settings.getValue("controllers");if(n){let i=!1;for(let T=0;T<n.length;T++){let c=n[T];if(c.isSelected){let h=new b.Q(c.name,c.ip,c.publicIP,!1);h.version=c.version,h.isSelected=c.isSelected,h.hide_in_selection=c.hide_in_selection,h.mac_id=c.mac_id,h.token=c.token,h.serial_no=c.serial_no,h.connection_permission=c.connection_permission,d.p.localIP=c.ip,d.p.serial_no=c.serial_no,d.p.remote_ip=c.publicIP,h.password=c.password,h.username=c.username,h.remember=c.remember,t.recoveryController=Object.create(h),null!=c.connection_permission&&(m.a.ConnectionPermission=c.connection_permission),m.a.ConnectionPermission==g.T.Both&&d.p.switchToLocalConnection(),m.a.ConnectionPermission==g.T.Local?d.p.switchToLocalConnection():m.a.ConnectionPermission==g.T.Remote?d.p.switchToRemoteConnection():t.platform.is("cordova")?m.a.NetworkType==f.t.NETWORK_WIFI||m.a.NetworkType==f.t.NETWORK_ETHERNET||m.a.NetworkType==f.t.NETWORK_UNKNOWN||null==m.a.NetworkType?d.p.switchToLocalConnection():d.p.switchToRemoteConnection():d.p.switchToLocalConnection(),i=i||h.isSelected;break}}}else t.showToast("No ESL Box Found, Please add ESL Box first");t.recoveryController.coreRepository=new p.A(t.jsonRPC)}}catch{t.showToast("Something went wrong! Please contact Admin")}})()}ionViewWillLeave(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction.unsubscribe()}ionViewDidEnter(){var t=this;console.log("ionViewDidLoad RecoverPasswordPage"),this.unregisterBackButtonAction=this.platform.backButton.subscribeWithPriority(101,(0,u.Z)(function*(){let n=t.closeAllDialog();n&&(yield n).dismiss(),t.goBack()}))}closeAllDialog(){var t=this;return(0,u.Z)(function*(){return(yield t.loadingCtrl.getTop())||(yield t.modalCtrl.getTop())||(yield t.toastCtrl.getTop())||(yield t.overlayCtrl.getTop())})()}openPage(t){this.password_change_message="",this.request_message_response="",this.request_otp_message="",this.verify_otp_message="",this.page=t}goBack(){var t=this;return(0,u.Z)(function*(){if("step6"==t.page)t.goBackFromRecovery();else if("step5"==t.page)t.openPage("step4");else if("step4"==t.page)t.openPage("step3");else if("step3"==t.page)t.openPage("step2");else if("step2"==t.page)t.openPage("step1");else{let n=t.translate.instant("are-you-sure-you-want-to-go-back"),i=yield t.alertCtrl.create({message:n,buttons:[{text:t.translate.instant("ok"),handler:T=>{i.dismiss(),t.navCtrl.back()}},{text:t.translate.instant("cancel"),role:"cancel"}],header:t.translate.instant("back"),cssClass:"network-alert"});i.present()}})()}onOtpChanged(){this.otp_code.length>6&&(this.otp_code=this.otp_code.substring(0,6))}numberOnly(t){const n=t.which?t.which:t.keyCode;return!(n>31&&(n<48||n>57))}requestOtp(){var t=this;return(0,u.Z)(function*(){t.request_message_response="",t.remaining_time=120,t.alreadySend=!0;try{w.B.showLoading2();let n=yield t.recoveryController.SendPasswordRecoveryOTP(t.username,t.email,t.phone);n&&n.body&&(n.body.error?t.request_message_response=-32904==n.body.error.code?t.translate.instant("user-not-found"):-32901==n.body.error.code?t.translate.instant("provide-either-email-or-phone"):-32904==n.body.error.code?t.translate.instant("user-not-found"):-32905==n.body.error.code?t.translate.instant("multiple-users-found")+" "+t.translate.instant("provide-either-email-or-phone"):n.body.error.message:n.body.result&&(t.username=n.body.result,t.request_message_response=n.body.result+" "+t.translate.instant("found"),t.showToast("OTP send!"),"step4"!=t.page&&t.openPage("step4"),t.processRequest(n.body)))}catch(n){t.request_message_response=n.message?n.message:"Something went wrong",console.warn("ex",n)}finally{w.B.dismissLoading2()}})()}processRequest(t){this.codeExpired=!1,window.clearInterval(this.timerUpdateId),this.timerUpdateId=window.setInterval(()=>{if(this.remaining_time<=60&&(this.alreadySend=!1),this.remaining_time<1)return this.request_button_name=this.translate.instant("resend"),this.codeExpired=!0,this.alreadySend=!1,void window.clearInterval(this.timerUpdateId);this.remaining_time-=1,this.updateMessage()},1e3)}updateMessage(){"ar"==m.a.uiLanguage&&(this.email_message="\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u0623\u0643\u064a\u062f \u0628\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 (OTP) \u0625\u0644\u0649 \u0639\u0646\u0648\u0627\u0646 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0627\u0644\u0645\u0633\u062c\u0644 {}.\n    \u0633\u062a\u0646\u062a\u0647\u064a \u0635\u0644\u0627\u062d\u064a\u0629 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0639\u062f {time}.\n    \u0625\u0630\u0627 \u0644\u0645 \u062a\u062c\u062f \u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u0641\u064a \u0635\u0646\u062f\u0648\u0642 \u0627\u0644\u0648\u0627\u0631\u062f \u0627\u0644\u062e\u0627\u0635 \u0628\u0643\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0645\u062c\u0644\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u063a\u064a\u0631 \u0627\u0644\u0645\u0631\u063a\u0648\u0628 \u0641\u064a\u0647\u0627.",this.phone_message="\n      \u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u0623\u0643\u064a\u062f \u0642\u0635\u064a\u0631\u0629 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 (OTP) \u0625\u0644\u0649 \u0631\u0642\u0645 \u0647\u0627\u062a\u0641\u0643 \u0627\u0644\u0645\u0633\u062c\u0644 {}.\n      \u0633\u062a\u0646\u062a\u0647\u064a \u0635\u0644\u0627\u062d\u064a\u0629 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0639\u062f {time}. \u0625\u0630\u0627 \u0644\u0645 \u062a\u062a\u0644\u0642 \u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064a\u0629 \u0642\u0635\u064a\u0631\u0629\u060c \u0641\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0623\u0643\u062f \u0645\u0646 \u0623\u0646 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0647\u0648 \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0635\u0627\u0644\u062d \u0648\u064a\u062a\u0636\u0645\u0646 \u0631\u0645\u0632 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0627\u0644\u062e\u0627\u0635 \u0628\u0627\u0644\u0628\u0644\u062f.");let t=this.remaining_time>1?`${this.remaining_time} ${this.translate.instant("seconds")}`:`${this.remaining_time} ${this.translate.instant("second")}`;this.phone?this.request_otp_message=this.phone_message.replace("{}",this.phone).replace("{time}",t):this.email&&(this.request_otp_message=this.email_message.replace("{}",this.email).replace("{time}",t))}verifyOtp(){var t=this;return(0,u.Z)(function*(){try{t.verify_otp_message="";let n=yield t.recoveryController.ValidatePasswordRecoveryOTP(t.username,t.otp_code),i=n?n.body:void 0;i&&(i.error?t.verify_otp_message=-32602==i.error.code?t.translate.instant("user-not-found"):i.error.message:i.result&&(t.verify_otp_message="",t.server_otp=i.result,t.handleVerificationResponse(i)&&(t.openPage("step5"),window.clearInterval(t.timerUpdateId))))}catch{}})()}changePassword(){var t=this;return(0,u.Z)(function*(){try{t.password_change_message="";var n=yield t.recoveryController.RecoverPassword(t.username,t.server_otp,t.password);if(n&&n.body){let i=n.body;i.error?t.password_change_message=-32602==i.error.code?t.translate.instant("user-not-found"):i.error.message:1==i.result&&(t.password_change_message=t.translate.instant("password-has-been-changed"),t.showToast(t.translate.instant("password-has-been-changed")),t.openPage("step6"))}}catch(i){console.info("error",i)}})()}handleVerificationResponse(t){if(t){if(t.result)return this.request_otp_message="Verified successfully!",!0;t.error&&(-32803==t.error.code?(this.request_otp_message="OTP has been expired!",this.alreadySend=!1,this.verifyingOtp=!1):(this.request_otp_message="Invalid OTP",this.alreadySend=!1,this.verifyingOtp=!1))}return!1}changeRecoverType(t){this.recoveryType=t,"phone"==t?this.email="":"email"==t&&(this.phone=""),this.openPage("step3")}showSuccessMessage(){var t=this;return(0,u.Z)(function*(){let n=`Password has been succesfully change for user: ${t.username}`,i=yield t.alertCtrl.create({message:n,buttons:[{text:"Ok",handler:T=>{i.dismiss(),t.navCtrl.back()}}],header:"Password Recovered",cssClass:"network-alert"});i.present()})()}goBackFromRecovery(){var t=this;return(0,u.Z)(function*(){if("step1"==t.page||"step6"==t.page)t.navCtrl.back();else{let n=t.translate.instant("are-you-sure-you-want-to-go-back"),i=yield t.alertCtrl.create({message:n,buttons:[{text:t.translate.instant("ok"),handler:T=>{i.dismiss(),t.navCtrl.back()}},{text:t.translate.instant("cancel"),role:"cancel"}],header:t.translate.instant("back"),cssClass:"network-alert"});i.present()}})()}showToast(t){var n=this;return(0,u.Z)(function*(){(yield n.toastCtrl.create({message:t,duration:3e3})).present()})()}RegisterBackButton(){var t=this;this.platform.backButton.subscribeWithPriority(101,(0,u.Z)(function*(){let n=(yield t.loadingCtrl.getTop())||(yield t.modalCtrl.getTop())||(yield t.toastCtrl.getTop())||(yield t.overlayCtrl.getTop());n?n.dismiss():t.goBackFromRecovery()}))}skipUserName(){this.username="",this.openPage("step2")}}return(s=l).\u0275fac=function(t){return new(t||s)(e.Y36(v.SH),e.Y36(v.Dh),e.Y36(a.dr),e.Y36(v.Br),e.Y36(v.t4),e.Y36(v.yF),e.Y36(C.Z),e.Y36(d.p),e.Y36(y.sK),e.Y36(v.X1),e.Y36(P.F0),e.Y36(v.IN),e.Y36(v.Dh),e.Y36(v.HT),e.Y36(a.jP,8))},s.\u0275cmp=e.Xpm({type:s,selectors:[["recover-password"]],decls:26,vars:15,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding","",2,"text-align","center"],[1,"button-container",2,"height","auto"],[4,"ngIf"],[2,"text-align","start"],["padding","","style","height:100%;",4,"ngIf"],["style","height:100%;",4,"ngIf"],["padding","",2,"height","100%"],[2,"margin-bottom","6px"],[3,"ngModel","ngModelChange"],["fill","clear","tappable","","component-click","","tabindex","0",2,"font-size","small",3,"click"],[1,"dark-button",3,"click"],[1,"full-primary-button",3,"disabled","click"],[2,"height","100%"],[1,"full-primary-button",3,"click"],["name","mail"],["name","phone-portrait"],[1,"error-message"],["stacked","",2,"text-align","start"],["required","",3,"ngModel","ngModelChange"],[2,"width","100%"],["colspan","2"],[2,"outline","none","border","none"],["type","tel","maxlength","6",1,"otp-input",2,"font-size","x-large","text-align","center","letter-spacing","1em",3,"ngModel","ngModelChange","keypress"],[2,"text-align","start","text-transform","capitalize"],["small","","clear","","outline","",2,"text-transform","capitalize",3,"disabled","click"],["position","stacked"],["type","password","maxlength","50","required","",3,"ngModel","ngModelChange"],["disabled","","ion-button","",1,"dark-button",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1),e._UZ(4,"div",2),e.TgZ(5,"div",3)(6,"a",4),e.NdJ("click",function(){return n.goBack()}),e._UZ(7,"ion-icon",5),e.qZA()(),e.TgZ(8,"div")(9,"ion-title"),e._uU(10),e.ALo(11,"translate"),e.qZA()()()()()(),e.TgZ(12,"ion-content",6)(13,"div",7),e.YNc(14,q,3,3,"strong",8),e.YNc(15,E,3,3,"strong",8),e.YNc(16,U,3,3,"strong",8),e.YNc(17,N,3,3,"strong",8),e.YNc(18,L,3,3,"strong",8),e.TgZ(19,"div",9),e.YNc(20,J,19,14,"div",10),e.YNc(21,I,22,9,"div",11),e.YNc(22,S,16,10,"div",11),e.YNc(23,Y,31,22,"div",8),e.YNc(24,Q,32,17,"div",8),e.YNc(25,G,26,22,"div",8),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngStyle",n.theAppState.iontoolbarStyle),e.xp6(9),e.Oqu(e.lcZ(11,13,"recover-password")),e.xp6(4),e.Q6J("ngIf","step1"==n.page),e.xp6(1),e.Q6J("ngIf","step2"==n.page),e.xp6(1),e.Q6J("ngIf","step3"==n.page),e.xp6(1),e.Q6J("ngIf","step4"==n.page),e.xp6(1),e.Q6J("ngIf","step5"==n.page),e.xp6(2),e.Q6J("ngIf","step1"==n.page),e.xp6(1),e.Q6J("ngIf","step2"==n.page),e.xp6(1),e.Q6J("ngIf","step3"==n.page),e.xp6(1),e.Q6J("ngIf","step4"==n.page),e.xp6(1),e.Q6J("ngIf","step5"==n.page),e.xp6(1),e.Q6J("ngIf","step6"==n.page))},dependencies:[x.O5,x.PC,_.JJ,_.Q7,_.nD,_.On,a.YG,a.wI,a.W2,a.fr,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.Nd,a.wd,a.sr,a.j9,R.T,M.t,O.c,y.X$],styles:[".full-primary-button[_ngcontent-%COMP%]{width:100%}ion-item[_ngcontent-%COMP%]{box-shadow:none}.item-inner[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important}ion-input[_ngcontent-%COMP%]{margin-left:5px}"]}),l})()}];let F=(()=>{var s;class l{}return(s=l).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.Bz.forChild(j),P.Bz]}),l})();var W=r(23934);let z=(()=>{var s;class l{}return(s=l).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[x.ez,_.u5,a.Pc,F,y.aw.forChild(),W.o]}),l})()},59764:(k,Z,r)=>{r.d(Z,{T:()=>u});var x=r(15861),_=r(65879),a=r(56223),P=r(28662);let u=(()=>{var d;class m{mouseDownEventHandler(p){p.stopImmediatePropagation(),p.preventDefault()}keyEventHandler(p){var g=this;return(0,x.Z)(function*(){if(p.stopImmediatePropagation(),p.preventDefault(),"Enter"==p.key||" "==p.key){var f;let w=null===(f=document.activeElement)||void 0===f?void 0:f.className.toLowerCase();if(w&&(w.indexOf("range-knob-handle")>-1||w.indexOf("range-md")>-1)&&w.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let C=document.activeElement.getAttribute("aria-valuenow");if(C){let y=Number.parseFloat(C);if(y||0===y)return console.log("range-knob-handle value change to "+y),void g.model.update.emit(y)}}let e=g.el.nativeElement.nodeName.toLowerCase();const v=yield P.A.getInfo();["button","ion-checkbox","a"].indexOf(e)>-1?"android"!==v.operatingSystem.toLowerCase()&&g.el.nativeElement.click():"!android"!==v.operatingSystem.toLowerCase()&&g.clickOnElement(g.el)}})()}clickOnElement(p){if(document.createEvent){let g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),p.nativeElement.dispatchEvent(g)}}mouseDownOnElement(p){let g=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});p.nativeElement.dispatchEvent(g)}constructor(p,g,f){this.el=p,this.renderer=g,this.model=f,this.eventEmitter=new _.vpe}ngOnInit(){}}return(d=m).\u0275fac=function(p){return new(p||d)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(a.On))},d.\u0275dir=_.lG2({type:d,selectors:[["","component-click",""]],hostBindings:function(p,g){1&p&&_.NdJ("mousedown",function(w){return g.mouseDownEventHandler(w)})("keypress",function(w){return g.keyEventHandler(w)})},outputs:{eventEmitter:"eventEmitter"},features:[_._Bn([a.On])]}),m})()},48753:(k,Z,r)=>{r.d(Z,{c:()=>_});var x=r(65879);let _=(()=>{var a;class P{constructor(d){this.elementRef=d}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(a=P).\u0275fac=function(d){return new(d||a)(x.Y36(x.SBq))},a.\u0275dir=x.lG2({type:a,selectors:[["","padding",""]]}),P})()}}]);