"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8565,9764],{18565:(T,y,n)=>{n.r(y),n.d(y,{NotificationEntitiesPageModule:()=>M});var g=n(96814),f=n(56223),o=n(73582),h=n(70160),E=n(15861),u=n(18024),p=n(8873),D=n(51141),r=n(20416),s=n(35944),m=n(31138),t=n(65879),_=n(34414),C=n(63999),x=n(59764),N=n(69705),A=n(48753);function k(c,v){if(1&c){const d=t.EpF();t.TgZ(0,"ion-item-sliding",11)(1,"ion-card",12)(2,"ion-item",13)(3,"ion-avatar",14),t._UZ(4,"img",15),t.qZA(),t.TgZ(5,"ion-label")(6,"div",16),t._uU(7),t.qZA(),t.TgZ(8,"span",17),t._uU(9),t.qZA(),t.TgZ(10,"ion-grid")(11,"ion-row",18)(12,"ion-col")(13,"span"),t._uU(14),t.qZA()()()()(),t._UZ(15,"ion-icon",19),t.qZA()(),t.TgZ(16,"ion-item-options",20)(17,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(d).$implicit,l=t.oxw();return t.KtG(l.RemoveNotification(a))}),t._UZ(18,"ion-icon",22),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(d).$implicit,l=t.oxw();return t.KtG(l.EditNotification(a))}),t._UZ(22,"ion-icon",24),t._uU(23),t.ALo(24,"translate"),t.qZA()()()}if(2&c){const d=v.$implicit;t.xp6(1),t.Q6J("id","DEVICE_"+d.id),t.xp6(3),t.Q6J("src",d.Logo,t.LSH),t.xp6(3),t.Oqu(d.name?d.name:d._name),t.xp6(2),t.AsE("",d.device_property,"\xa0(",d.device_property_condition_str,")"),t.xp6(5),t.Oqu(d.type),t.xp6(5),t.hij(" ",t.lcZ(20,8,"delete")," "),t.xp6(4),t.hij(" ",t.lcZ(24,10,"edit")," ")}}const O=[{path:"",component:(()=>{var c;class v{constructor(i,e,a,l,Z,P){this.navCtrl=i,this.toastCtrl=e,this.translate=a,this.navParams=l,this.alertCtrl=Z,this.platform=P,this.theAppState=p.a}ionViewDidEnter(){this.loadNotification()}ionViewDidLoad(){console.log("ionViewDidLoad NotificationEntitiesPage")}loadNotification(){var i=this;return(0,E.Z)(function*(){if(p.a.DefaultController)try{m.B.showLoading2();let e=yield p.a.DefaultController.GetNotifications();if(e&&e.length){i.notifications=[];for(let a=0;a<e.length;a++){let l=new u.u;l.id=e[a].deviceNotificationEntity.id,l.device_id=e[a].deviceNotificationEntity.deviceId;let Z=p.a.DefaultController.devices.find(P=>P.id==l.device_id);if(Z&&(l.Logo=Z.image_id.main_url),l.device_property=e[a].deviceNotificationEntity.deviceProperty,l.device_property_condition=e[a].deviceNotificationEntity.devicePropertyCondition,l.notification_type=e[a].deviceNotificationEntity.notificationType,l.enabled=e[a].deviceNotificationEntity.enabled,e[a].notificationTemplateEntity&&e[a].notificationTemplateEntity.content)l.name=e[a].notificationTemplateEntity.content;else{let P=p.a.DefaultController.devices.find(L=>L.id==l.device_id);P&&(l._name=P.translated_name)}l.device_property_condition_str=i.translate.instant(l.device_property_condition==r.O.Changed?"change":l.device_property_condition==r.O.ChangedToNonZero?"on":"off"),l.type=i.translate.instant(l.notification_type==s.k.Email?"mail":l.notification_type==s.k.SMS?"sms":"notification"),i.notifications.push(l)}}}catch(e){console.error(e),i.showError(e)}finally{m.B.dismissLoading2()}})()}EditNotification(i){this.navCtrl.navigateForward(D.JH,{state:{data:{notification:i}}})}RemoveNotification(i){var e=this;return(0,E.Z)(function*(){(yield e.alertCtrl.create({buttons:[{text:e.translate.instant("delete"),handler:()=>{e.DeleteNotification(i)}},{text:e.translate.instant("cancel"),role:"cancel"}],header:e.translate.instant("delete"),message:e.translate.instant("are-you-sure-you-want-to-delete")})).present()})()}DeleteNotification(i){var e=this;return(0,E.Z)(function*(){console.log("notification deleted");try{(yield p.a.DefaultController.DeleteNotification(i.id))&&e.loadNotification()}catch(a){console.error(a),e.showError(a)}})()}goBack(){this.navCtrl.back()}ShowAddNotificationPage(){this.navCtrl.navigateForward(D.JH)}showError(i){let e=i;e=i&&i.statusText?i.statusText+" "+(i.status?i.status:""):JSON.stringify(i),this.showToast(e)}showToast(i){var e=this;return(0,E.Z)(function*(){(yield e.toastCtrl.create({message:i,duration:3e3})).present()})()}}return(c=v).\u0275fac=function(i){return new(i||c)(t.Y36(_.SH),t.Y36(_.yF),t.Y36(C.sK),t.Y36(_.X1),t.Y36(_.Br),t.Y36(_.t4))},c.\u0275cmp=t.Xpm({type:c,selectors:[["notification-entities"]],decls:17,vars:5,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],["ion-button","","clear","",3,"click"],["name","add"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding",""],["dir","ltr"],["ngFor","",3,"ngForOf"],[1,"sliding-list-item"],["tappable","",2,"margin","0px",3,"id"],[1,"generic-card"],["slot","start"],[2,"font-size","8vw",3,"src"],[1,"generic-title"],[2,"font-size","x-small"],[2,"font-size","small"],["slot","end","name","chevron-back"],["side","end"],[1,"delete-button",3,"click"],["name","close-circle"],[1,"edit-button",3,"click"],["name","create"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2)(5,"button",3),t.NdJ("click",function(){return e.ShowAddNotificationPage()}),t._UZ(6,"ion-icon",4),t.qZA()(),t.TgZ(7,"div",5)(8,"a",6),t.NdJ("click",function(){return e.goBack()}),t._UZ(9,"ion-icon",7),t.qZA()(),t.TgZ(10,"div")(11,"ion-title"),t._uU(12),t.ALo(13,"translate"),t.qZA()()()()()(),t.TgZ(14,"ion-content",8)(15,"ion-list",9),t.YNc(16,k,25,12,"ng-template",10),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("ngStyle",e.theAppState.iontoolbarStyle),t.xp6(11),t.Oqu(t.lcZ(13,3,"notifications")),t.xp6(4),t.Q6J("ngForOf",e.notifications))},dependencies:[g.sg,g.PC,o.BJ,o.YG,o.PM,o.wI,o.W2,o.jY,o.Gu,o.gu,o.Ie,o.IK,o.td,o.Q$,o.q_,o.Nd,o.wd,o.sr,x.T,N.t,A.c,C.X$]}),v})()}];let w=(()=>{var c;class v{}return(c=v).\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[h.Bz.forChild(O),h.Bz]}),v})();var B=n(23934);let M=(()=>{var c;class v{}return(c=v).\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[g.ez,f.u5,o.Pc,w,C.aw.forChild(),B.o]}),v})()},59764:(T,y,n)=>{n.d(y,{T:()=>E});var g=n(15861),f=n(65879),o=n(56223),h=n(28662);let E=(()=>{var u;class p{mouseDownEventHandler(r){r.stopImmediatePropagation(),r.preventDefault()}keyEventHandler(r){var s=this;return(0,g.Z)(function*(){if(r.stopImmediatePropagation(),r.preventDefault(),"Enter"==r.key||" "==r.key){var m;let t=null===(m=document.activeElement)||void 0===m?void 0:m.className.toLowerCase();if(t&&(t.indexOf("range-knob-handle")>-1||t.indexOf("range-md")>-1)&&t.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let x=document.activeElement.getAttribute("aria-valuenow");if(x){let N=Number.parseFloat(x);if(N||0===N)return console.log("range-knob-handle value change to "+N),void s.model.update.emit(N)}}let _=s.el.nativeElement.nodeName.toLowerCase();const C=yield h.A.getInfo();["button","ion-checkbox","a"].indexOf(_)>-1?"android"!==C.operatingSystem.toLowerCase()&&s.el.nativeElement.click():"!android"!==C.operatingSystem.toLowerCase()&&s.clickOnElement(s.el)}})()}clickOnElement(r){if(document.createEvent){let s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.nativeElement.dispatchEvent(s)}}mouseDownOnElement(r){let s=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});r.nativeElement.dispatchEvent(s)}constructor(r,s,m){this.el=r,this.renderer=s,this.model=m,this.eventEmitter=new f.vpe}ngOnInit(){}}return(u=p).\u0275fac=function(r){return new(r||u)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(o.On))},u.\u0275dir=f.lG2({type:u,selectors:[["","component-click",""]],hostBindings:function(r,s){1&r&&f.NdJ("mousedown",function(t){return s.mouseDownEventHandler(t)})("keypress",function(t){return s.keyEventHandler(t)})},outputs:{eventEmitter:"eventEmitter"},features:[f._Bn([o.On])]}),p})()},48753:(T,y,n)=>{n.d(y,{c:()=>f});var g=n(65879);let f=(()=>{var o;class h{constructor(u){this.elementRef=u}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(o=h).\u0275fac=function(u){return new(u||o)(g.Y36(g.SBq))},o.\u0275dir=g.lG2({type:o,selectors:[["","padding",""]]}),h})()}}]);