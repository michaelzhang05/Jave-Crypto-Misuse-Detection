"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6934,9764],{66934:(P,C,s)=>{s.r(C),s.d(C,{ClientListPageModule:()=>S});var g=s(96814),u=s(56223),l=s(73582),_=s(70160),m=s(15861),c=s(8873),A=s(46729),L=s(51141),e=s(65879),r=s(34414),p=s(63999),f=s(59764),k=s(48753);function x(t,d){if(1&t&&(e.TgZ(0,"ion-col")(1,"b"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&t){const o=e.oxw().$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"ip"),"\xa0"),e.xp6(3),e.Oqu(o.IpAddress)}}function w(t,d){if(1&t&&(e.TgZ(0,"ion-col",17)(1,"b"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&t){const o=e.oxw().$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"mac"),"\xa0"),e.xp6(3),e.Oqu(o.MacAddress)}}function v(t,d){if(1&t&&(e.TgZ(0,"ion-col")(1,"span")(2,"b"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.qZA()()),2&t){const o=e.oxw().$implicit;e.xp6(3),e.hij("",e.lcZ(4,2,"last-login-on"),"\xa0"),e.xp6(2),e.Oqu(o.LastUpdatedString)}}function O(t,d){if(1&t){const o=e.EpF();e.TgZ(0,"ion-item-option",24),e.NdJ("click",function(){e.CHM(o);const a=e.oxw().$implicit,i=e.oxw();return e.KtG(i.Block(a))}),e._UZ(1,"ion-icon",25),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"block")," "))}function T(t,d){if(1&t){const o=e.EpF();e.TgZ(0,"ion-item-option",26),e.NdJ("click",function(){e.CHM(o);const a=e.oxw().$implicit,i=e.oxw();return e.KtG(i.Allow(a))}),e._UZ(1,"ion-icon",27),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"allow")," "))}function b(t,d){if(1&t){const o=e.EpF();e.TgZ(0,"ion-item-sliding",7)(1,"ion-card",8)(2,"ion-item",9)(3,"ion-avatar",10),e._UZ(4,"ion-icon",11),e.qZA(),e.TgZ(5,"ion-label")(6,"div",12),e._uU(7),e.qZA(),e.TgZ(8,"span",13),e._uU(9),e.qZA(),e.TgZ(10,"ion-grid")(11,"ion-row",14),e.YNc(12,x,6,4,"ion-col",15),e.YNc(13,w,6,4,"ion-col",16),e.qZA(),e.TgZ(14,"ion-row",14),e.YNc(15,v,6,4,"ion-col",15),e.TgZ(16,"ion-col",17)(17,"ion-badge"),e._uU(18),e.ALo(19,"translate"),e.qZA()()()()(),e._UZ(20,"ion-icon",18),e.qZA()(),e.TgZ(21,"ion-item-options",19)(22,"ion-item-option",20),e.NdJ("click",function(){const i=e.CHM(o).$implicit,h=e.oxw();return e.KtG(h.Delete(i))}),e._UZ(23,"ion-icon",21),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.YNc(26,O,4,3,"ion-item-option",22),e.YNc(27,T,4,3,"ion-item-option",23),e.qZA()()}if(2&t){const o=d.$implicit;e.xp6(1),e.Q6J("id","DEVICE_"+o.Id),e.xp6(3),e.Q6J("name",o.Logo),e.xp6(3),e.Oqu(o.Name),e.xp6(2),e.hij("(",o.HardwareId,")"),e.xp6(3),e.Q6J("ngIf",o.IpAddress),e.xp6(1),e.Q6J("ngIf",o.MacAddress),e.xp6(2),e.Q6J("ngIf",o.LastUpdatedString),e.xp6(2),e.Udp("background",o.Blocked?"red":"green"),e.xp6(1),e.Oqu(e.lcZ(19,13,o.Blocked?"blocked":"allowed")),e.xp6(6),e.hij(" ",e.lcZ(25,15,"delete")," "),e.xp6(2),e.Q6J("ngIf",!o.Blocked),e.xp6(1),e.Q6J("ngIf",o.Blocked)}}const U=[{path:"",component:(()=>{var t;class d{constructor(n,a,i,h,Z){this.navCtrl=n,this.navParams=a,this.platform=i,this.translate=h,this.alertCtrl=Z,this.clients=[],this.theAppState=c.a}GetClients(){return(0,m.Z)(function*(){return c.a.DefaultController.GetClients()})()}DeleteClient(n){var a=this;return(0,m.Z)(function*(){return c.a.DefaultController.DeleteClient(n).then(()=>{a.GetAndUpdateClients()})})()}SetClientBLocked(n,a=!1){var i=this;return(0,m.Z)(function*(){return c.a.DefaultController.SetClientBlocked(n,a).then(()=>{i.GetAndUpdateClients()})})()}SetAutoAllowNewClients(n=!0){return(0,m.Z)(function*(){return c.a.DefaultController.SetSettings({AutoAllowNewClients:n})})()}GetAutoAllowNewClients(n=!0){return(0,m.Z)(function*(){return c.a.DefaultController.GetSettings().then(a=>{if(a&&a.body&&a.body.result)return a.body.result})})()}ionViewWillEnter(){}ionViewDidEnter(){c.a.DefaultController&&(console.log("ionViewDidEnter ClientListPage"),this.GetAutoAllowNewClients(),this.GetAndUpdateClients())}GetAndUpdateClients(){this.GetClients().then(n=>{this.clients=n.body.result;for(let a=0;a<this.clients.length;a++){let i=this.clients[a];i.LastUpdatedString=A.V0.getElapsedDateTime(Date.parse(i.LastUpdated.toString()).valueOf(),this.translate.currentLang),i.Logo=i.Name.toLowerCase().indexOf("apple")>-1||i.Name.toLowerCase().indexOf("ios")>-1?"logo-apple":i.Name.toLowerCase().indexOf("chrome")>-1?"logo-chrome":i.Name.toLowerCase().indexOf("firefox")>-1?"md-browsers":i.Name.toLowerCase().indexOf("window")>-1?"logo-windows":i.Name.toLowerCase().indexOf("linux")>-1||i.Name.toLowerCase().indexOf("ubuntu")>-1?"logo-tux":i.Name.toLowerCase().indexOf("android")>-1?"logo-android":"md-laptop"}this.clients&&(this.clients=this.clients.sort((a,i)=>Date.parse(i.LastUpdated.toString())-Date.parse(a.LastUpdated.toString())))})}goBack(n=!1){n?this.navCtrl.navigateRoot(L.g6):this.navCtrl.back()}Delete(n){this.ShowAlertController(this.translate.instant("delete"),"",n.Id,!1,!0)}Allow(n){this.ShowAlertController(this.translate.instant("allow"),"",n.Id,!1)}Block(n){this.ShowAlertController(this.translate.instant("block"),"",n.Id,!0)}ShowAlertController(n,a,i,h=!1,Z=!1){var E=this;return(0,m.Z)(function*(){let D=[];D.push({text:n,role:"yes",handler:()=>{Z?E.DeleteClient(i):E.SetClientBLocked(i,h)},cssClass:h?"block-button":Z?"delete-button":"allow-button"}),D.push({text:"cancel",role:"cancel"}),(yield E.alertCtrl.create({header:n,cssClass:"buttons-list-alert",message:a,buttons:D})).present()})()}}return(t=d).\u0275fac=function(n){return new(n||t)(e.Y36(r.SH),e.Y36(r.X1),e.Y36(r.t4),e.Y36(p.sK),e.Y36(r.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["client-list"]],decls:14,vars:5,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding",""],["ngFor","",3,"ngForOf"],[1,"sliding-list-item"],["tappable","",1,"generic-card",3,"id"],[1,"generic-card"],["item-start","","slot","start"],[2,"font-size","8vw",3,"name"],[1,"generic-title"],[2,"font-size","x-small"],[2,"font-size","small"],[4,"ngIf"],["style","text-align:end;",4,"ngIf"],[2,"text-align","end"],["item-end","","slot","end","name","chevron-back"],["side","end"],[1,"delete-button",3,"click"],["name","close-circle"],["class","block-button",3,"click",4,"ngIf"],["class","allow-button",3,"click",4,"ngIf"],[1,"block-button",3,"click"],["name","close"],[1,"allow-button",3,"click"],["name","checkmark"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2)(5,"a",3),e.NdJ("click",function(){return a.goBack()}),e._UZ(6,"ion-icon",4),e.qZA()(),e.TgZ(7,"div")(8,"ion-title"),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()()(),e.TgZ(11,"ion-content",5)(12,"ion-list"),e.YNc(13,b,28,17,"ng-template",6),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngStyle",a.theAppState.iontoolbarStyle),e.xp6(8),e.Oqu(e.lcZ(10,3,"clients")),e.xp6(4),e.Q6J("ngForOf",a.clients))},dependencies:[g.sg,g.O5,g.PC,l.BJ,l.yp,l.PM,l.wI,l.W2,l.jY,l.Gu,l.gu,l.Ie,l.u8,l.IK,l.td,l.Q$,l.q_,l.Nd,l.wd,l.sr,f.T,k.c,p.X$]}),d})()}];let y=(()=>{var t;class d{}return(t=d).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(U),_.Bz]}),d})();var B=s(23934);let S=(()=>{var t;class d{}return(t=d).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,u.u5,l.Pc,y,p.aw.forChild(),B.o]}),d})()},59764:(P,C,s)=>{s.d(C,{T:()=>m});var g=s(15861),u=s(65879),l=s(56223),_=s(28662);let m=(()=>{var c;class A{mouseDownEventHandler(e){e.stopImmediatePropagation(),e.preventDefault()}keyEventHandler(e){var r=this;return(0,g.Z)(function*(){if(e.stopImmediatePropagation(),e.preventDefault(),"Enter"==e.key||" "==e.key){var p;let f=null===(p=document.activeElement)||void 0===p?void 0:p.className.toLowerCase();if(f&&(f.indexOf("range-knob-handle")>-1||f.indexOf("range-md")>-1)&&f.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let w=document.activeElement.getAttribute("aria-valuenow");if(w){let v=Number.parseFloat(w);if(v||0===v)return console.log("range-knob-handle value change to "+v),void r.model.update.emit(v)}}let k=r.el.nativeElement.nodeName.toLowerCase();const x=yield _.A.getInfo();["button","ion-checkbox","a"].indexOf(k)>-1?"android"!==x.operatingSystem.toLowerCase()&&r.el.nativeElement.click():"!android"!==x.operatingSystem.toLowerCase()&&r.clickOnElement(r.el)}})()}clickOnElement(e){if(document.createEvent){let r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.nativeElement.dispatchEvent(r)}}mouseDownOnElement(e){let r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});e.nativeElement.dispatchEvent(r)}constructor(e,r,p){this.el=e,this.renderer=r,this.model=p,this.eventEmitter=new u.vpe}ngOnInit(){}}return(c=A).\u0275fac=function(e){return new(e||c)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(l.On))},c.\u0275dir=u.lG2({type:c,selectors:[["","component-click",""]],hostBindings:function(e,r){1&e&&u.NdJ("mousedown",function(f){return r.mouseDownEventHandler(f)})("keypress",function(f){return r.keyEventHandler(f)})},outputs:{eventEmitter:"eventEmitter"},features:[u._Bn([l.On])]}),A})()},48753:(P,C,s)=>{s.d(C,{c:()=>u});var g=s(65879);let u=(()=>{var l;class _{constructor(c){this.elementRef=c}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(l=_).\u0275fac=function(c){return new(c||l)(g.Y36(g.SBq))},l.\u0275dir=g.lG2({type:l,selectors:[["","padding",""]]}),_})()}}]);