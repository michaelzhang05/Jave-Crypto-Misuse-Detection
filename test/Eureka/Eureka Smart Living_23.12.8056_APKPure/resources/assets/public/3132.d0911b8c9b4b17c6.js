"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3132,9764],{33132:(D,_,n)=>{n.r(_),n.d(_,{OccupancyRoomsListPageModule:()=>F});var h=n(96814),r=n(56223),i=n(73582),f=n(70160),C=n(15861),d=n(46729),R=n(56544),E=n(51141),a=n(8873),c=n(1901),y=n(83620),p=n(28002),e=n(65879),g=n(34414),L=n(63999),b=n(9482),x=n(77935),w=n(59764),B=n(48753);function S(s,v){if(1&s){const m=e.EpF();e.TgZ(0,"ion-item",12),e.NdJ("click",function(){const l=e.CHM(m).$implicit,P=e.oxw();return e.KtG(P.openRoomPage(l))}),e.TgZ(1,"ion-avatar",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e._UZ(5,"br"),e.TgZ(6,"span",15),e._uU(7),e.ALo(8,"translate"),e.TgZ(9,"b"),e._uU(10),e.ALo(11,"translate"),e.qZA()()()()}if(2&s){const m=v.$implicit;e.xp6(2),e.Q6J("src",m.image_url,e.LSH),e.xp6(2),e.hij(" ",m.translated_name,""),e.xp6(3),e.hij("",e.lcZ(8,6,"occupancy-sensing"),"\xa0"),e.xp6(2),e.Tol(m.OccupancySensingEnabled?"occupancy-on":"occupancy-off"),e.xp6(1),e.Oqu(e.lcZ(11,8,m.OccupancySensingEnabled?"enable":"disable"))}}const Y=[{path:"",component:(()=>{var s;class v extends R.n{constructor(t,o,l,P,T,u,O,Z,H,A,J,M,k,V,N){super(A,u,o,l,t,H,!1,M,Z,J,k),this.navCtrl=t,this.alertController=o,this.translate=l,this.loadingCtrl=P,this.event=T,this.platform=u,this.navParams=O,this.toastCtrl=Z,this.api=A,this.router=M,this.popoverCtrl=k,this.route=V,this.modalController=N,this.rooms=[],this.displayrooms=[],this.pageToOpen="",this.theAppState=a.a,this.searchControl=new r.NI}goBack(){this.navCtrl.navigateBack(E.dJ)}ionViewDidEnter(){var t=this;return(0,C.Z)(function*(){console.log("ionViewDidEnter OccupancyRoomsListPage"),t.displayrooms=t.rooms=a.a.DefaultController.rooms.sort((o,l)=>o.sort_order-l.sort_order),t.route.queryParams.subscribe(o=>{const l=o;t.pageToOpen=l.pageToOpen,console.log("queryParams:"+l.toString())})})()}openRoomPage(t){var o=this;return(0,C.Z)(function*(){if(o.pageToOpen==E.OE)o.OpenRoomAdvancedSettings(t);else{a.a.odata={room:t,roomOccupancyAction:a.a.roomOccupancyAction};var l=yield a.a.DefaultController.GetOccupancyRoomActionsDTO(t.id);a.a.roomOccupancyAction=Object.assign(new p.Kr,l),a.a.navigatebackPage=o.pageToOpen,a.a.navigatebackPageStateData={room:t},o.navCtrl.navigateForward(o.pageToOpen,{state:{data:{room:t}}})}})()}OpenRoomAdvancedSettings(t,o=c.a.Room){var l=this;return(0,C.Z)(function*(){let P=a.a.DefaultController.voiceCommandControl.voice_thing_names.filter(u=>u.thing_id==t.id&&u.language_id==d.V0.defaultVoiceLanguage.id&&-1!=u.id&&u.thing_type==o),T=[];for(let u=0;u<P.length;u++){if(null==P[u])continue;let O=P[u];O.language_id==d.V0.defaultVoiceLanguage.id&&O.thing_type==c.a.Room&&T.push({id:O.id,command:""==O.command?null:O.command,lang_id:O.language_id})}l.navCtrl.navigateForward(E.OE,{state:{data:{commands:T,thing:t.translated_name,direction:d.V0.defaultVoiceLanguage.direction,ui_direction:l.platform.isRTL?"rtl":"ltr",language_symbol:d.V0.defaultVoiceLanguage.displaySymbol,language_id:d.V0.defaultVoiceLanguage.id,thing_id:t.id,selected_tab:"advanced",thing_type:3}}})})()}ngOnInit(){this.setFilteredItems(""),this.searchControl.valueChanges.pipe((0,y.b)(700)).subscribe(t=>{this.setFilteredItems(t)})}setFilteredItems(t){this.displayrooms=!t||t.length>=2?this.rooms.filter(o=>""==t||o.translated_name.toLowerCase().indexOf(t.toLowerCase())>-1||o.room&&o.room.translated_name.toLowerCase().indexOf(t.toLowerCase())>-1):this.rooms}}return(s=v).\u0275fac=function(t){return new(t||s)(e.Y36(g.SH),e.Y36(g.Br),e.Y36(L.sK),e.Y36(g.HT),e.Y36(b.z),e.Y36(g.t4),e.Y36(g.X1),e.Y36(g.yF),e.Y36(e.R0b),e.Y36(d.V0),e.Y36(x.Z),e.Y36(f.F0),e.Y36(g.Dh),e.Y36(f.gz),e.Y36(g.IN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["occupancy-rooms-list"]],features:[e.qOj],decls:23,vars:8,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],["showWhen","android,ios",1,"top-mic-button",2,"vertical-align","bottom",3,"touchstart","touchend"],["name","mic",1,"voice-mic-button"],[1,"top-badge"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding",""],[3,"formControl","placeholder"],["class","arm-card",3,"click",4,"ngFor","ngForOf"],[1,"arm-card",3,"click"],["slot","start"],[1,"arm-img",3,"src"],[2,"font-size","small"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2),e._UZ(5,"connection-warning"),e.TgZ(6,"a",3),e.NdJ("touchstart",function(){return o.longPressStart()})("touchend",function(){return o.PressEnd()}),e._UZ(7,"ion-icon",4),e.TgZ(8,"ion-badge",5),e._uU(9),e.qZA()()(),e.TgZ(10,"div",6)(11,"a",7),e.NdJ("click",function(){return o.goBack()}),e._UZ(12,"ion-icon",8),e.qZA()(),e.TgZ(13,"div")(14,"ion-title"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()()(),e.TgZ(17,"ion-content",9)(18,"ion-item"),e._UZ(19,"ion-searchbar",10),e.qZA(),e.TgZ(20,"div")(21,"ion-list"),e.YNc(22,S,12,10,"ion-item",11),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngStyle",o.theAppState.iontoolbarStyle),e.xp6(8),e.Oqu(o.speech_language_symbol),e.xp6(6),e.Oqu(e.lcZ(16,6,"AdvancedDevicePropertiesComponent"==o.pageToOpen?"rooms":"room-actions")),e.xp6(4),e.s9C("placeholder",o.translate.instant("search")),e.Q6J("formControl",o.searchControl),e.xp6(3),e.Q6J("ngForOf",o.displayrooms))},dependencies:[h.sg,h.PC,r.JJ,i.BJ,i.yp,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.VI,i.wd,i.sr,i.j9,r.oH,w.T,B.c,L.X$],styles:[".occupancy-off[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#000;border-radius:4px;padding:4px}.occupancy-on[_ngcontent-%COMP%]{background-color:#228b22;border-radius:4px;padding:4px}ion-item.arm-card[_ngcontent-%COMP%]{margin-bottom:10px;box-shadow:.2vw .2vw 1vw #000000ba;background-color:#0003;border-radius:3vw}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:10px}ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;min-width:40px;min-height:40px}"]}),v})()}];let I=(()=>{var s;class v{}return(s=v).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.Bz.forChild(Y),f.Bz]}),v})();var U=n(23934);let F=(()=>{var s;class v{}return(s=v).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.ez,r.u5,i.Pc,r.UX,I,U.o,L.aw.forChild()]}),v})()},59764:(D,_,n)=>{n.d(_,{T:()=>C});var h=n(15861),r=n(65879),i=n(56223),f=n(28662);let C=(()=>{var d;class R{mouseDownEventHandler(a){a.stopImmediatePropagation(),a.preventDefault()}keyEventHandler(a){var c=this;return(0,h.Z)(function*(){if(a.stopImmediatePropagation(),a.preventDefault(),"Enter"==a.key||" "==a.key){var y;let p=null===(y=document.activeElement)||void 0===y?void 0:y.className.toLowerCase();if(p&&(p.indexOf("range-knob-handle")>-1||p.indexOf("range-md")>-1)&&p.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let L=document.activeElement.getAttribute("aria-valuenow");if(L){let b=Number.parseFloat(L);if(b||0===b)return console.log("range-knob-handle value change to "+b),void c.model.update.emit(b)}}let e=c.el.nativeElement.nodeName.toLowerCase();const g=yield f.A.getInfo();["button","ion-checkbox","a"].indexOf(e)>-1?"android"!==g.operatingSystem.toLowerCase()&&c.el.nativeElement.click():"!android"!==g.operatingSystem.toLowerCase()&&c.clickOnElement(c.el)}})()}clickOnElement(a){if(document.createEvent){let c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.nativeElement.dispatchEvent(c)}}mouseDownOnElement(a){let c=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});a.nativeElement.dispatchEvent(c)}constructor(a,c,y){this.el=a,this.renderer=c,this.model=y,this.eventEmitter=new r.vpe}ngOnInit(){}}return(d=R).\u0275fac=function(a){return new(a||d)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(i.On))},d.\u0275dir=r.lG2({type:d,selectors:[["","component-click",""]],hostBindings:function(a,c){1&a&&r.NdJ("mousedown",function(p){return c.mouseDownEventHandler(p)})("keypress",function(p){return c.keyEventHandler(p)})},outputs:{eventEmitter:"eventEmitter"},features:[r._Bn([i.On])]}),R})()},48753:(D,_,n)=>{n.d(_,{c:()=>r});var h=n(65879);let r=(()=>{var i;class f{constructor(d){this.elementRef=d}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(i=f).\u0275fac=function(d){return new(d||i)(h.Y36(h.SBq))},i.\u0275dir=h.lG2({type:i,selectors:[["","padding",""]]}),f})()}}]);