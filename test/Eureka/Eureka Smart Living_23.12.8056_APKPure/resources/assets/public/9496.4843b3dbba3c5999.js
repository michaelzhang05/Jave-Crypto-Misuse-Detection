"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9496,9764],{87055:(k,x,i)=>{i.d(x,{g:()=>u});const u=(0,i(92726).fo)("App",{web:()=>i.e(2912).then(i.bind(i,62912)).then(m=>new m.AppWeb)})},89496:(k,x,i)=>{i.r(x),i.d(x,{ManagementPageModule:()=>W});var f=i(96814),u=i(56223),m=i(73582),y=i(70160),E=i(15861),_=i(56544),b=i(46729),c=i(51141),a=i(19462),d=i(31138),r=i(8873),p=i(55897),P=i(29484),M=i(43826),C=i(87055),e=i(65879),v=i(34414),O=i(63999),Y=i(9482),A=i(26227),Z=i(77935),z=i(59764);function H(t,g){if(1&t&&(e.TgZ(0,"ion-badge",21),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.Q6J("color",n.notificationClass),e.xp6(1),e.Oqu(n.notifications)}}function N(t,g){if(1&t){const n=e.EpF();e.TgZ(0,"ion-card",18),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.openPage(l))}),e._UZ(1,"img",19),e.TgZ(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,H,2,2,"ion-badge",20),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Udp("opacity",n.isEnabled?1:.3),e.xp6(1),e.Q6J("src",null==n?null:n.img,e.LSH),e.xp6(1),e.Tol(n.textClass?n.textClass:""),e.xp6(1),e.Oqu(e.lcZ(4,7,n.name)),e.xp6(2),e.Q6J("ngIf",null==n?null:n.notifications)}}function U(t,g){1&t&&e._UZ(0,"br")}function B(t,g){if(1&t&&(e.TgZ(0,"div",15),e.YNc(1,N,6,9,"ion-card",16),e.YNc(2,U,1,0,"ng-template",17),e.qZA()),2&t){const n=g.$implicit,s=g.index;e.xp6(1),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("ngIf",s+1==0)}}function J(t,g){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,B,3,2,"ng-template",14),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.listOfIcons)}}function F(t,g){if(1&t){const n=e.EpF();e.TgZ(0,"ion-card",28),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.openPage(l))}),e._UZ(1,"img",19),e.TgZ(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}if(2&t){const n=e.oxw().$implicit;e.Udp("opacity",n.isEnabled?1:.3),e.xp6(1),e.Q6J("src",null==n?null:n.img,e.LSH),e.xp6(1),e.Tol(n.textClass?n.textClass:""),e.xp6(1),e.Oqu(e.lcZ(4,6,n.name))}}function S(t,g){if(1&t&&(e.TgZ(0,"ion-col",26),e.YNc(1,F,5,8,"ion-card",27),e.qZA()),2&t){const n=g.$implicit;e.xp6(1),e.Q6J("ngIf",n)}}function X(t,g){if(1&t&&(e.TgZ(0,"ion-row",24),e.YNc(1,S,2,1,"ion-col",25),e.qZA()),2&t){const n=g.$implicit;e.xp6(1),e.Q6J("ngForOf",n)}}function V(t,g){if(1&t&&(e.TgZ(0,"ion-grid",22),e.YNc(1,X,2,1,"ion-row",23),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.grid)}}const L=[{path:"",component:(()=>{var t;class g extends _.n{constructor(s,l,o,h,w,K,I,D,j,G,$,q,T,ne,ee){super(T,I,o,h,s,q,!1,D),this.navCtrl=s,this.alertController=o,this.translate=h,this.loadingCtrl=w,this.event=K,this.platform=I,this.router=D,this.navParams=j,this.network=G,this.toastCtrl=$,this.api=T,this.popoverCtrl=ee,this.isTabletDevice=!1,this.grid=[,],this.listOfIcons=[],this.theAppState=r.a,this.x=0,this.y=0,this.updates_count=0,I.ready().then(()=>{this.unauth2Handler=ie=>{console.log("unauthorized"),this.navCtrl.navigateRoot(c.g6)},b.V0.events.subscribe("unauthorized",this.unauth2Handler),this.InitializeHomeScreen()})}ngOnInit(){this.ionViewDidEnter()}updateXY(){this.x>=2?(this.x=0,this.y++):this.x++}checkUpdate(){var s=this;return(0,E.Z)(function*(){if(null!=r.a.DefaultController){var l,o;yield r.a.DefaultController.CheckNewServerVersion();try{s.platform.is("mobile")&&(l=(yield C.g.getInfo()).build,o=(yield C.g.getInfo()).version.split(".")[2],parseInt(r.a.DefaultController.androidVersionCode)>l&&(r.a.DefaultController.androidVersionAvailable=!0),parseInt(r.a.DefaultController.iosVersion)>o&&(r.a.DefaultController.iosVersionAvailable=!0),(r.a.DefaultController.androidVersionAvailable||r.a.DefaultController.iosVersionAvailable)&&s.updates_count++)}catch(h){console.log("checkUpdate: "+h)}(r.a.DefaultController.user.is_system_admin||r.a.DefaultController.user.is_super_user)&&r.a.DefaultController.serverVersionAvailable&&s.updates_count++}})()}InitializeHomeScreen(){if(console.log("Intializing Management Screen"),this.is_super_user=r.a.DefaultController.user.is_super_user,this.x=0,this.y=0,this.grid=[,],this.grid[0]=[],this.grid[1]=[],this.grid[2]=[],this.grid[3]=[],this.grid[4]=[],this.grid[5]=[],this.grid[6]=[],this.grid[7]=[],this.grid[this.y][this.x]={type:"file-manager",name:"files",isEnabled:!0,img:a.s.Images.file_system.folder},this.updateXY(),this.grid[this.y][this.x]={type:"sceneCreator",name:"scene-creator",isEnabled:!0,img:a.s.Images.scene},this.updateXY(),this.grid[this.y][this.x]={type:"dashboard",name:"dashboards",isEnabled:!0,textClass:"font-size-small",img:a.s.Images.dashboard,param:{manage_access:!0}},this.updateXY(),this.grid[this.y][this.x]={type:"user",name:"user-management",isEnabled:!0,img:a.s.Images.user_management},this.updateXY(),this.grid[this.y][this.x]={type:"client-applications",name:"client-applications",isEnabled:!0,textClass:"font-size-small",img:a.s.Images.client_applications},this.updateXY(),this.grid[this.y][this.x]={type:"room-occupancy",name:"room-occupancy",isEnabled:!0,textClass:"font-size-small",img:a.s.Images.main_room},this.updateXY(),this.grid[this.y][this.x]={type:"notification",name:"notification",isEnabled:!0,textClass:"font-size-small",img:a.s.Images.notification},this.updateXY(),this.grid[this.y][this.x]={type:"global-variables",name:"global-variables",isEnabled:!0,textClass:"font-size-small",img:a.s.Images.global_variable},this.updateXY(),this.grid[this.y][this.x]={type:"admin",name:"admin",isEnabled:r.a.DefaultController.user.is_system_admin,img:a.s.Images.admin},this.updateXY(),this.grid[this.y][this.x]={type:"arm-management",name:"arm-management",isEnabled:!0,textClass:"font-size-small",img:a.s.Images.arming},this.is_super_user&&(r.a.Experimental||!0)&&(this.updateXY(),this.grid[this.y][this.x]={type:"rooms-management",name:"rooms",isEnabled:!0,img:a.s.Images.main_room},this.updateXY(),this.grid[this.y][this.x]={type:"devices-management",name:"devices",isEnabled:!0,img:a.s.Images.all_device},this.updateXY(),this.grid[this.y][this.x]={type:"request-types",name:"request-types",isEnabled:!0,img:a.s.Images.request},r.a.Experimental&&(this.updateXY(),this.grid[this.y][this.x]={type:"smart-space-list",name:"smart-space",isEnabled:!0,img:a.s.Images.smart_space}),this.updateXY(),this.grid[this.y][this.x]={type:"interfaces-management",name:"Interfaces",isEnabled:!0,img:a.s.Images.interface}),1==r.a.appFlow){this.updateXY(),this.grid[this.y][this.x]={type:"warnings",name:"warnings",isEnabled:!0,img:a.s.Images.warning,notifications:P.E.warningCounts,notificationClass:"warning"};let s=this.x,l=this.y;b.V0.events.subscribe(M.n.WARNING_UPDATE,()=>{this.grid[l][s].notifications=P.E.warningCounts}),this.updateXY(),this.grid[this.y][this.x]={type:"about",name:"about",isEnabled:!0,notificationClass:"newupdate",img:a.s.Images.about},this.checkUpdate().then(()=>{this.grid[this.y][this.x].notifications=this.updates_count}),this.is_super_user&&(this.updateXY(),this.grid[this.y][this.x]={type:"ticket",name:"interaction",isEnabled:!0,img:a.s.Images.interaction})}this.listOfIcons=[];for(let s=0;s<this.grid.length;s++)for(let l=0;l<this.grid[s].length;l++)this.listOfIcons.push(this.grid[s][l])}openPage(s){var l=this;return(0,E.Z)(function*(){if(console.warn(s),0==s.isEnabled)return;let o=r.a.mainPage,h=!1;switch(s.type){case"file-manager":o=c.Fw;break;case"sceneCreator":h=!0,o=c.Cx;break;case"dashboard":o=c.YK;break;case"user":o=c.W0;break;case"client-applications":o=c.hE;break;case"room-occupancy":o=c.dJ;break;case"notification":o=c.bu;break;case"global-variables":o=c.rB;break;case"arm-management":o=c.Ju;break;case"rooms-management":o=c.sO;break;case"devices-management":o=c.ze;break;case"request-types":o=c.h4;break;case"smart-space-list":o=c.gp;break;case"interfaces-management":o=c.jO;break;case"about":o=c.QS;break;case"ticket":o=c.YF;break;case"warnings":o=c.QH;break;case"admin":return void p.A.open({url:encodeURI(r.a.DefaultController.getAdminPortalAddress)});case"back":o=r.a.mainPage}"back"==s.type?l.navCtrl.back():(console.warn(o),h&&(yield d.B.showLoading2()),l.navCtrl.navigateForward(o,{state:{data:s.param}}).then(w=>{console.log("Navigated..."),d.B.dismissLoading2()}))})()}ionViewDidEnter(){super.ionViewDidEnter(),console.log("ionViewDidEnter ManagementPage"),this.isTabletDevice=screen.width>screen.height}ionViewDidLeave(){super.ionViewDidLeave(),b.V0.events.unsubscribe("unauthorized",this.unauth2Handler),this.unauth2Handler=void 0}goBack(s=!1){this.navCtrl.navigateRoot(r.a.mainPage)}}return(t=g).\u0275fac=function(s){return new(s||t)(e.Y36(v.SH),e.Y36(v.IN),e.Y36(v.Br),e.Y36(O.sK),e.Y36(v.HT),e.Y36(Y.z),e.Y36(v.t4),e.Y36(y.F0),e.Y36(v.X1),e.Y36(A.Z),e.Y36(v.yF),e.Y36(e.R0b),e.Y36(b.V0),e.Y36(Z.Z),e.Y36(v.Dh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["management"]],features:[e.qOj],decls:20,vars:8,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],["component-click","","tabindex","0"],["component-click","","showWhen","android,ios",1,"top-mic-button",2,"vertical-align","bottom",3,"touchstart","touchend"],["name","mic",1,"voice-mic-button"],[1,"top-badge"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],[3,"fullscreen"],["style","text-align:center;","class","icons-container",4,"ngIf"],["style","padding:10px",4,"ngIf"],[1,"icons-container",2,"text-align","center"],["ngFor","",3,"ngForOf"],[1,"grid-icons"],["ion-item","","tappable","","component-click","","tabindex","0","class","btn-device-grid","style","margin:5px;","item-center","","draggable","true","ondrag","",3,"opacity","click",4,"ngIf"],[3,"ngIf"],["ion-item","","tappable","","component-click","","tabindex","0","item-center","","draggable","true","ondrag","",1,"btn-device-grid",2,"margin","5px",3,"click"],[2,"align-items","center","width","75%",3,"src"],["class","arm-notification",3,"color",4,"ngIf"],[1,"arm-notification",3,"color"],[2,"padding","10px"],["class","ion-align-items-center","style","margin-bottom:10px;",4,"ngFor","ngForOf"],[1,"ion-align-items-center",2,"margin-bottom","10px"],["size","4","style","padding-top: 0px;padding-bottom: 0px;","tabindex","0","dropzone","true","item-center","",4,"ngFor","ngForOf"],["size","4","tabindex","0","dropzone","true","item-center","",2,"padding-top","0px","padding-bottom","0px"],["ion-item","","tappable","","component-click","","style","width:24vw; height:24vw; margin:auto;","class","btn-device-grid","item-center","","draggable","true","ondrag","",3,"opacity","click",4,"ngIf"],["ion-item","","tappable","","component-click","","item-center","","draggable","true","ondrag","",1,"btn-device-grid",2,"width","24vw","height","24vw","margin","auto",3,"click"]],template:function(s,l){1&s&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div")(3,"div",1)(4,"div",2),e._UZ(5,"connection-warning",3),e.TgZ(6,"a",4),e.NdJ("touchstart",function(h){return l.longPressStart(h)})("touchend",function(){return l.PressEnd()}),e._UZ(7,"ion-icon",5),e.TgZ(8,"ion-badge",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7)(11,"a",8),e.NdJ("click",function(){return l.goBack(!0)}),e._UZ(12,"ion-icon",9),e.qZA()(),e.TgZ(13,"div")(14,"ion-title"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()()(),e.TgZ(17,"ion-content",10),e.YNc(18,J,2,1,"div",11),e.YNc(19,V,2,1,"ion-grid",12),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngStyle",l.theAppState.iontoolbarStyle),e.xp6(8),e.Oqu(l.speech_language_symbol),e.xp6(6),e.Oqu(e.lcZ(16,6,"management")),e.xp6(2),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",l.isTabletDevice),e.xp6(1),e.Q6J("ngIf",!l.isTabletDevice))},dependencies:[f.sg,f.O5,f.PC,m.yp,m.PM,m.wI,m.W2,m.jY,m.Gu,m.gu,m.Nd,m.wd,m.sr,z.T,O.X$],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.btn-device-grid[_ngcontent-%COMP%]{margin:auto;text-align:center;align-items:center;width:24vw;height:24vw;border:none;box-shadow:2px 2px 4px #000;background-color:transparent(#000,.68);border-radius:5px;color:#fff;padding:0}.btn-device-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:5%;left:12.5%}.btn-device-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:4vw;word-break:keep-all;white-space:normal;position:absolute;line-height:1.3;width:100%;bottom:1%;margin-bottom:0}.btn-device-grid[_ngcontent-%COMP%]   .font-size-small[_ngcontent-%COMP%]{font-size:3.5vw;white-space:nowrap}.btn-device-grid[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:2px}.btn-device-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}"]}),g})()}];let Q=(()=>{var t;class g{}return(t=g).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.Bz.forChild(L),y.Bz]}),g})();var R=i(23934);let W=(()=>{var t;class g{}return(t=g).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,u.u5,m.Pc,Q,O.aw,R.o]}),g})()},59764:(k,x,i)=>{i.d(x,{T:()=>E});var f=i(15861),u=i(65879),m=i(56223),y=i(28662);let E=(()=>{var _;class b{mouseDownEventHandler(a){a.stopImmediatePropagation(),a.preventDefault()}keyEventHandler(a){var d=this;return(0,f.Z)(function*(){if(a.stopImmediatePropagation(),a.preventDefault(),"Enter"==a.key||" "==a.key){var r;let p=null===(r=document.activeElement)||void 0===r?void 0:r.className.toLowerCase();if(p&&(p.indexOf("range-knob-handle")>-1||p.indexOf("range-md")>-1)&&p.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let C=document.activeElement.getAttribute("aria-valuenow");if(C){let e=Number.parseFloat(C);if(e||0===e)return console.log("range-knob-handle value change to "+e),void d.model.update.emit(e)}}let P=d.el.nativeElement.nodeName.toLowerCase();const M=yield y.A.getInfo();["button","ion-checkbox","a"].indexOf(P)>-1?"android"!==M.operatingSystem.toLowerCase()&&d.el.nativeElement.click():"!android"!==M.operatingSystem.toLowerCase()&&d.clickOnElement(d.el)}})()}clickOnElement(a){if(document.createEvent){let d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.nativeElement.dispatchEvent(d)}}mouseDownOnElement(a){let d=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});a.nativeElement.dispatchEvent(d)}constructor(a,d,r){this.el=a,this.renderer=d,this.model=r,this.eventEmitter=new u.vpe}ngOnInit(){}}return(_=b).\u0275fac=function(a){return new(a||_)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(m.On))},_.\u0275dir=u.lG2({type:_,selectors:[["","component-click",""]],hostBindings:function(a,d){1&a&&u.NdJ("mousedown",function(p){return d.mouseDownEventHandler(p)})("keypress",function(p){return d.keyEventHandler(p)})},outputs:{eventEmitter:"eventEmitter"},features:[u._Bn([m.On])]}),b})()}}]);