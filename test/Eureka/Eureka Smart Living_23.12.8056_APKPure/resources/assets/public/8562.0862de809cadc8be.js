"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8562,9764],{38562:(P,T,n)=>{n.r(T),n.d(T,{GeneralThingSelectorPageModule:()=>O});var h=n(96814),r=n(56223),i=n(73582),f=n(70160),u=n(8873),g=n(83620),C=n(1901),e=n(65879),a=n(34414),s=n(59764),p=n(48753),m=n(63999);function D(t,c){if(1&t&&(e.TgZ(0,"small",16),e._uU(1),e.qZA()),2&t){const l=e.oxw(2).$implicit;e.xp6(1),e.hij("\u2002",l.room.translated_name,"")}}function y(t,c){if(1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"span",14),e._uU(4),e.qZA(),e.YNc(5,D,2,1,"small",15),e.qZA()()()),2&t){const l=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.Oqu(l.roomName),e.xp6(1),e.Q6J("ngIf",(l.thingType==o.KnownThingTypes.Device||l.thingType==o.KnownThingTypes.Scene)&&l.room)}}function E(t,c){if(1&t){const l=e.EpF();e.TgZ(0,"ion-card",9),e.NdJ("click",function(){const v=e.CHM(l).$implicit,Z=e.oxw();return e.KtG(Z.selectThing(v))}),e.TgZ(1,"ion-avatar",10),e._UZ(2,"img",11),e.qZA(),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.YNc(5,y,6,2,"ion-grid",13),e.qZA()}if(2&t){const l=c.$implicit;e.Q6J("id","DEVICE_"+l.id),e.xp6(2),e.Q6J("src",1==l.thingType?l.image_id.main_url:l.image_url,e.LSH),e.xp6(2),e.Oqu(l.translated_name),e.xp6(1),e.Q6J("ngIf",3!=l.thingType)}}const S=[{path:"",component:(()=>{var t;class c{constructor(o,d,v){this.navCtrl=o,this.viewCtrl=d,this.navParams=v,this.title="devices",this.KnownThingTypes=C.a,this.theAppState=u.a,this.searchControl=new r.NI,this.title="rooms"==v.data.thingType?"rooms":"scenes"==v.data.thingType?"scenes":"devices"==v.data.thingType?"devices":"things"}ngOnInit(){this.setFilteredItems(""),this.searchControl.valueChanges.pipe((0,g.b)(700)).subscribe(o=>{this.setFilteredItems(o)})}setFilteredItems(o){this.displayThings=(!o||o.length>=2)&&this.things?this.things.filter(d=>""==o||d.translated_name.toLowerCase().indexOf(o.toLowerCase())>-1||d.room&&d.room.translated_name.toLowerCase().indexOf(o.toLowerCase())>-1):this.things}ionViewDidLoad(){console.log("ionViewDidLoad GeneralThingSelectorPage"),this.LoadThings()}LoadThings(){u.a.DefaultController&&(this.things=this.displayThings="rooms"==this.title?u.a.DefaultController.rooms:"devices"==this.title?u.a.DefaultController.devices:"scenes"==this.title?u.a.DefaultController.scenes:u.a.DefaultController.things)}selectThing(o){this.viewCtrl.dismiss({thing:o})}goBack(){this.viewCtrl.dismiss()}}return(t=c).\u0275fac=function(o){return new(o||t)(e.Y36(a.SH),e.Y36(a.IN),e.Y36(a.X1))},t.\u0275cmp=e.Xpm({type:t,selectors:[["general-thing-selector"]],decls:17,vars:9,consts:[["hideBackButton","true",2,"text-align","center","direction","ltr",3,"ngStyle"],[2,"padding","5px"],[2,"text-align","end","float","right","min-width","10px"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["padding",""],[3,"formControl","placeholder"],["ngFor","",3,"ngForOf"],["ion-item","","tappable","",3,"id","click"],["item-start","",2,"margin-left","10px"],[1,"warn-img",3,"src"],[1,"'generic-title"],[4,"ngIf"],[2,"font-size","small"],["style","position:absolute; max-height:24px; bottom:0;",4,"ngIf"],[2,"position","absolute","max-height","24px","bottom","0"]],template:function(o,d){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div",1),e._UZ(3,"div",2),e.TgZ(4,"div",3)(5,"a",4),e.NdJ("click",function(){return d.goBack()}),e._UZ(6,"ion-icon",5),e.qZA()(),e.TgZ(7,"div")(8,"ion-title"),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()(),e.TgZ(11,"ion-content",6)(12,"ion-item"),e._UZ(13,"ion-searchbar",7),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"ion-list"),e.YNc(16,E,6,4,"ng-template",8),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("ngStyle",d.theAppState.iontoolbarStyle),e.xp6(8),e.Oqu(e.lcZ(10,5,d.title)),e.xp6(4),e.s9C("placeholder",e.lcZ(14,7,"search")),e.Q6J("formControl",d.searchControl),e.xp6(3),e.Q6J("ngForOf",d.displayThings))},dependencies:[h.sg,h.O5,h.PC,r.JJ,i.BJ,i.PM,i.wI,i.W2,i.jY,i.Gu,i.gu,i.Ie,i.q_,i.Nd,i.VI,i.wd,i.sr,i.j9,s.T,p.c,m.X$]}),c})()}];let x=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(S),f.Bz]}),c})();var w=n(23934);let O=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,r.u5,i.Pc,x,m.aw.forChild(),w.o]}),c})()},59764:(P,T,n)=>{n.d(T,{T:()=>u});var h=n(15861),r=n(65879),i=n(56223),f=n(28662);let u=(()=>{var g;class C{mouseDownEventHandler(a){a.stopImmediatePropagation(),a.preventDefault()}keyEventHandler(a){var s=this;return(0,h.Z)(function*(){if(a.stopImmediatePropagation(),a.preventDefault(),"Enter"==a.key||" "==a.key){var p;let m=null===(p=document.activeElement)||void 0===p?void 0:p.className.toLowerCase();if(m&&(m.indexOf("range-knob-handle")>-1||m.indexOf("range-md")>-1)&&m.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let E=document.activeElement.getAttribute("aria-valuenow");if(E){let _=Number.parseFloat(E);if(_||0===_)return console.log("range-knob-handle value change to "+_),void s.model.update.emit(_)}}let D=s.el.nativeElement.nodeName.toLowerCase();const y=yield f.A.getInfo();["button","ion-checkbox","a"].indexOf(D)>-1?"android"!==y.operatingSystem.toLowerCase()&&s.el.nativeElement.click():"!android"!==y.operatingSystem.toLowerCase()&&s.clickOnElement(s.el)}})()}clickOnElement(a){if(document.createEvent){let s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.nativeElement.dispatchEvent(s)}}mouseDownOnElement(a){let s=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});a.nativeElement.dispatchEvent(s)}constructor(a,s,p){this.el=a,this.renderer=s,this.model=p,this.eventEmitter=new r.vpe}ngOnInit(){}}return(g=C).\u0275fac=function(a){return new(a||g)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(i.On))},g.\u0275dir=r.lG2({type:g,selectors:[["","component-click",""]],hostBindings:function(a,s){1&a&&r.NdJ("mousedown",function(m){return s.mouseDownEventHandler(m)})("keypress",function(m){return s.keyEventHandler(m)})},outputs:{eventEmitter:"eventEmitter"},features:[r._Bn([i.On])]}),C})()},48753:(P,T,n)=>{n.d(T,{c:()=>r});var h=n(65879);let r=(()=>{var i;class f{constructor(g){this.elementRef=g}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(i=f).\u0275fac=function(g){return new(g||i)(h.Y36(h.SBq))},i.\u0275dir=h.lG2({type:i,selectors:[["","padding",""]]}),f})()}}]);