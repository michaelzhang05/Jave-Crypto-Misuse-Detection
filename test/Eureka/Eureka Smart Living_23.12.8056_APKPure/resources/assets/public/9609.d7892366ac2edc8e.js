"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9609],{99609:(G,f,o)=>{o.r(f),o.d(f,{FullScreenCameraPageModule:()=>F});var b=o(96814),C=o(56223),g=o(73582),u=o(70160),P=o(15861),T=o(56544),U=o(28662),s=o(8873),c=o(19462),e=o(65879),i=o(34414),S=o(57922),_=o(93575),O=o(46729),y=o(63999),I=o(67284),M=o(62372),Z=o(77935);const w=[{path:"",component:(()=>{var r;class l extends T.n{set imageUrl(n){this._imageUrl=n,this.currentUrlWithoutTimeStamp=n}get imageUrl(){return this._imageUrl&&this._imageUrl.indexOf("?")>-1?this._imageUrl+"&t="+this.timestamp:this._imageUrl+"?t="+this.timestamp}constructor(n,t,a,d,h,k,A,R,D,Y,L,N,E,B,V,J,H,p,W,j){if(super(D,Y,H,L,h,V,!1,p,d,J,a),this.modalCtrl=n,this.networkInterface=t,this.popoverCtrl=a,this.toastCtrl=d,this.navCtrl=h,this.screenOrientation=k,this.viewCtrl=A,this.navParams=R,this.fT=N,this.changeDetectorRef=E,this.file=B,this.router=p,this.overlayCtrl=W,this.loadingCtrl=j,this.timestamp=Math.floor((new Date).valueOf()/1e3),this.currentUrlWithoutTimeStamp="",this._imageUrl="",this.overlayImageUrl=c.s.Images.camera_overlay_video,this.cameraCapturing=!1,this.capturingTimeout=-1,this.device=U.A,this.refreshStaticImageTimeout=-1,p.getCurrentNavigation().extras.state){const v=this.router.getCurrentNavigation().extras.state;console.log(v," params"),this.navParams=v.data,this.camera=this.navParams.camera,this.imageUrl=this.navParams.current_url}}ionViewDidEnter(){this.timestamp=Math.floor((new Date).valueOf()/1e3)}ionViewDidLeave(){super.ionViewWillLeave(),this.previous_state!=this.screenOrientation.ORIENTATIONS.LANDSCAPE&&this.previous_state!=this.screenOrientation.ORIENTATIONS.LANDSCAPE_PRIMARY&&this.previous_state!=this.screenOrientation.ORIENTATIONS.LANDSCAPE_SECONDARY&&this.restoreState()}loadedData(){let n=new URL(this.imageUrl),t=new URL(this.camera.directImageUrl),a=new URL(this.camera.proxyImageUrl);(n.pathname==t.pathname||n.pathname==a.pathname)&&(clearTimeout(this.refreshStaticImageTimeout),this.refreshStaticImageTimeout=window.setTimeout(()=>{this.timestamp=Math.floor((new Date).valueOf()/1e3),this.changeDetectorRef.detectChanges(),this.changeDetectorRef.markForCheck()},this.camera.refresh_time))}videoLoadErrorHandler(){switch(this.currentUrlWithoutTimeStamp){case this.camera.directVideoUrl:this.imageUrl=this.camera.proxyVideoUrl,this.overlayImageUrl=c.s.Images.camera_overlay_video_proxy;break;case this.camera.proxyVideoUrl:this.imageUrl=this.camera.directImageUrl,this.overlayImageUrl=c.s.Images.camera_overlay_image;break;case this.camera.directImageUrl:this.imageUrl=this.camera.proxyImageUrl,this.overlayImageUrl=c.s.Images.camera_overlay_image_proxy;break;default:this.imageUrl=c.s.Images.camera_no_video,this.overlayImageUrl=c.s.Images.camera_null_image}}goBack(n=!1){var t=this;return(0,P.Z)(function*(){let a=(yield t.loadingCtrl.getTop())||(yield t.modalCtrl.getTop())||(yield t.toastCtrl.getTop())||(yield t.overlayCtrl.getTop());a&&a.dismiss()})()}dismiss(){super.goBack()}restoreState(){this.platform.is("mobile")&&(s.a.AppFunctionality.SwitchScreenToPortrait(),s.a.HideStatusBar||s.a.AppFunctionality.RestoreStatusBar())}capture(){this.fileTransfer=this.fT.create(),this.cameraCapturing=!0,clearTimeout(this.capturingTimeout),this.capturingTimeout=window.setTimeout(()=>{this.cameraCapturing=!1},2e3)}PTZUp(){this.camera.PTZUp()}PTZDown(){this.camera.PTZDown()}PTZRight(){this.camera.PTZRight()}PTZLeft(){this.camera.PTZLeft()}ionViewDidLoad(){this.previous_state=this.screenOrientation.type,super.ionViewDidLoad(),this.platform.is("cordova")&&this.platform.ready().then(n=>{s.a.AppFunctionality.HideStatusBar(),s.a.AppFunctionality.SwitchScreenToLandscape().then(t=>{console.info("Changed!",t)},t=>{console.error("Rejected!",t)}).catch(t=>{console.error("Reason!",t)})})}getImageForScreenShot(){return this.imageUrl==this.camera.directImageUrl||this.imageUrl==this.camera.directVideoUrl?this.getBase64Image(this.camera.directVideoUrl+"#"+this.timestamp):this.imageUrl==this.camera.proxyImageUrl||this.imageUrl==this.camera.proxyVideoUrl?this.getBase64Image(this.camera.proxyImageUrl+"#"+this.timestamp):void 0}downloadAndSavePicture(n){s.a.DefaultController.GetImage(n).subscribe(t=>this.file.writeFile(this.file.dataDirectory,"ESL_"+this.camera.name+"_"+this.timestamp,t,{replace:!0}).then(a=>{console.log("Image Saved!")}))}getBase64Image(n){let t=document.createElement("canvas"),a=document.createElement("img");a.src=n,t.width=a.width,t.height=a.height,t.getContext("2d").drawImage(a,0,0);let h=t.toDataURL("image/png");return a.remove(),t.remove(),h.replace(/^data:image\/(png|jpg);base64,/,"")}}return(r=l).\u0275fac=function(n){return new(n||r)(e.Y36(i.IN),e.Y36(S.t),e.Y36(i.Dh),e.Y36(i.yF),e.Y36(i.SH),e.Y36(_.E),e.Y36(i.IN),e.Y36(i.X1),e.Y36(O.V0),e.Y36(i.t4),e.Y36(y.sK),e.Y36(I.K),e.Y36(e.sBO),e.Y36(M.$),e.Y36(e.R0b),e.Y36(Z.Z),e.Y36(i.Br),e.Y36(u.F0),e.Y36(i.Dh),e.Y36(i.HT))},r.\u0275cmp=e.Xpm({type:r,selectors:[["full-screen-camera"]],features:[e.qOj],decls:20,vars:9,consts:[[2,"margin","0"],[2,"position","absolute","left","0px","top","0px","width","100%","height","100%"],[2,"background-color","#222"],[2,"width","100%","height","100%","background-color","black","position","absolute",3,"src","alt","error","load"],["fill","clear","tappable","",1,"fc-contract",2,"display","inline",3,"click"],["name","contract"],["fill","clear","tappable","",1,"fc-capture",2,"display","inline",3,"click"],["name","camera"],["fill","clear","tappable","","showWhen","android,ios",1,"fc-voice-cmd",2,"vertical-align","bottom","text-align","center",3,"touchstart","touchend"],["name","mic",1,"voice-mic-button"],[1,"top-badge"],["fill","clear","tappable","",1,"fc-up",3,"click"],["name","caret-down-outline"],["fill","clear","tappable","",1,"fc-down",3,"click"],["fill","clear","tappable","",1,"fc-left",3,"click"],["name","caret-back-outline"],["fill","clear","tappable","",1,"fc-right",3,"click"],["name","caret-forward-outline"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"img",3),e.NdJ("error",function(){return t.videoLoadErrorHandler()})("load",function(){return t.loadedData()}),e.qZA()(),e.TgZ(4,"ion-button",4),e.NdJ("click",function(){return t.dismiss()}),e._UZ(5,"ion-icon",5),e.qZA(),e.TgZ(6,"ion-button",6),e.NdJ("click",function(){return t.capture()}),e._UZ(7,"ion-icon",7),e.qZA(),e.TgZ(8,"ion-button",8),e.NdJ("touchstart",function(){return t.longPressStart()})("touchend",function(){return t.PressEnd()}),e._UZ(9,"ion-icon",9),e.TgZ(10,"ion-badge",10),e._uU(11),e.qZA()(),e.TgZ(12,"ion-button",11),e.NdJ("click",function(){return t.PTZUp()}),e._UZ(13,"ion-icon",12),e.qZA(),e.TgZ(14,"ion-button",13),e.NdJ("click",function(){return t.PTZDown()}),e._UZ(15,"ion-icon",12),e.qZA(),e.TgZ(16,"ion-button",14),e.NdJ("click",function(){return t.PTZLeft()}),e._UZ(17,"ion-icon",15),e.qZA(),e.TgZ(18,"ion-button",16),e.NdJ("click",function(){return t.PTZRight()}),e._UZ(19,"ion-icon",17),e.qZA()()()),2&n&&(e.xp6(3),e.Tol(t.cameraCapturing?"elementToFadeInAndOut":""),e.s9C("src",t.imageUrl,e.LSH),e.Q6J("alt",t.timestamp),e.xp6(1),e.Udp("pointer-events",t.cameraCapturing?"none":"all"),e.xp6(2),e.Udp("pointer-events",t.cameraCapturing?"none":"all"),e.xp6(5),e.Oqu(t.speech_language_symbol))},dependencies:[g.yp,g.YG,g.W2,g.gu],styles:['.scroll-content[_ngcontent-%COMP%]{margin:0}.camera-full-control-bg[_ngcontent-%COMP%]{position:fixed;bottom:0;padding:5px;width:100%;background:linear-gradient(to bottom,rgba(0,0,0,0) 0%,rgba(0,0,0,.01) 1%,rgba(0,0,0,.65) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00000000",endColorstr="#a6000000",GradientType=0)}button[_ngcontent-%COMP%]   .fc-camera[_ngcontent-%COMP%]{background:none;background-color:none;box-shadow:none}.fc-contract[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);position:absolute;top:0;left:5px;box-shadow:none}.fc-capture[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);position:absolute;bottom:5px;right:5px;box-shadow:none}.fc-voice-cmd[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);position:absolute;top:0;right:5px;box-shadow:none;width:55px;height:46px}.fc-voice-cmd[_ngcontent-%COMP%]   .voice-mic-button[_ngcontent-%COMP%]{position:absolute;left:20px;top:10px}.fc-voice-cmd[_ngcontent-%COMP%]   .top-badge[_ngcontent-%COMP%]{left:6px}.fc-up[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform:translate(-25px);background:rgba(0,0,0,.3);box-shadow:none}.fc-down[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-25px);background:rgba(0,0,0,.3);box-shadow:none}.fc-left[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-25px);background:rgba(0,0,0,.3);box-shadow:none}.fc-right[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-25px);background:rgba(0,0,0,.3);box-shadow:none}.button-md[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-voice-cmd[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-up[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-down[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-right[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-left[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-capture[_ngcontent-%COMP%]:hover:not(.disable-hover), .fc-contract[_ngcontent-%COMP%]:hover:not(.disable-hover), .button[_ngcontent-%COMP%]:active{background:none;background-color:none;box-shadow:none;transition:none;animation:none}.alert-md[_ngcontent-%COMP%]   div[ng-reflect-ng-switch=radio][_ngcontent-%COMP%]{overflow:scroll}ion-button[_ngcontent-%COMP%]{color:#fff}ion-icon[_ngcontent-%COMP%]{color:#fff}ion-badge[_ngcontent-%COMP%]{color:#fff}']}),l})()}];let x=(()=>{var r;class l{}return(r=l).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.Bz.forChild(w),u.Bz]}),l})(),F=(()=>{var r;class l{}return(r=l).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[b.ez,C.u5,g.Pc,x]}),l})()}}]);