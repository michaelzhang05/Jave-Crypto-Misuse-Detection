"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5034,9764],{59764:(b,A,_)=>{_.d(A,{T:()=>p});var h=_(15861),m=_(65879),d=_(56223),g=_(28662);let p=(()=>{var S;class P{mouseDownEventHandler(T){T.stopImmediatePropagation(),T.preventDefault()}keyEventHandler(T){var f=this;return(0,h.Z)(function*(){if(T.stopImmediatePropagation(),T.preventDefault(),"Enter"==T.key||" "==T.key){var e;let t=null===(e=document.activeElement)||void 0===e?void 0:e.className.toLowerCase();if(t&&(t.indexOf("range-knob-handle")>-1||t.indexOf("range-md")>-1)&&t.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let y=document.activeElement.getAttribute("aria-valuenow");if(y){let n=Number.parseFloat(y);if(n||0===n)return console.log("range-knob-handle value change to "+n),void f.model.update.emit(n)}}let u=f.el.nativeElement.nodeName.toLowerCase();const l=yield g.A.getInfo();["button","ion-checkbox","a"].indexOf(u)>-1?"android"!==l.operatingSystem.toLowerCase()&&f.el.nativeElement.click():"!android"!==l.operatingSystem.toLowerCase()&&f.clickOnElement(f.el)}})()}clickOnElement(T){if(document.createEvent){let f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),T.nativeElement.dispatchEvent(f)}}mouseDownOnElement(T){let f=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});T.nativeElement.dispatchEvent(f)}constructor(T,f,e){this.el=T,this.renderer=f,this.model=e,this.eventEmitter=new m.vpe}ngOnInit(){}}return(S=P).\u0275fac=function(T){return new(T||S)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(d.On))},S.\u0275dir=m.lG2({type:S,selectors:[["","component-click",""]],hostBindings:function(T,f){1&T&&m.NdJ("mousedown",function(t){return f.mouseDownEventHandler(t)})("keypress",function(t){return f.keyEventHandler(t)})},outputs:{eventEmitter:"eventEmitter"},features:[m._Bn([d.On])]}),P})()},17229:(b,A,_)=>{_.d(A,{Be:()=>e,Bg:()=>t,Fc:()=>c,HI:()=>y,IJ:()=>V,K_:()=>m,S8:()=>l,Sf:()=>n,T4:()=>s,Tl:()=>r,To:()=>g,Y9:()=>T,gJ:()=>S,gk:()=>p,h7:()=>P,oS:()=>h,p$:()=>f,uf:()=>o,yD:()=>a});var h=function(i){return i[i.ThingChanged=1]="ThingChanged",i[i.DateTime=2]="DateTime",i[i.GlobalVariableValue=3]="GlobalVariableValue",i[i.File=4]="File",i}(h||{}),m=function(i){return i[i.ThingChanged=1]="ThingChanged",i[i.CommandReceived=2]="CommandReceived",i[i.Schedule=3]="Schedule",i[i.GlobalVariableChange=4]="GlobalVariableChange",i}(m||{});class d{constructor(){this.ConditionType=h.ThingChanged}}class g extends d{constructor(){super(...arguments),this.ConditionType=h.ThingChanged}}class p extends d{constructor(){super(...arguments),this.ConditionType=h.DateTime,this._DaysOfWeek=[],this._DaysOfWeekNames=[]}}class S extends d{constructor(){super(...arguments),this.ConditionType=h.GlobalVariableValue}}class P extends d{constructor(){super(...arguments),this.ConditionType=h.File}}class I{constructor(){this.TriggerType=m.ThingChanged}}class T extends I{constructor(){super(...arguments),this.TriggerType=m.ThingChanged}}class f extends I{constructor(){super(...arguments),this.TriggerType=m.Schedule}}class e extends I{constructor(){super(...arguments),this.TriggerType=m.GlobalVariableChange}}var t=function(i){return i[i.ThingAction=1]="ThingAction",i[i.CsScript=2]="CsScript",i[i.CsClass=3]="CsClass",i[i.Delay=4]="Delay",i[i.SetGlobalVariable=5]="SetGlobalVariable",i[i.HttpAction=6]="HttpAction",i[i.ThingProperty=7]="ThingProperty",i[i.SendEmail=8]="SendEmail",i}(t||{});class u{}class l extends u{constructor(){super(...arguments),this.ActionType=t.ThingAction,this.ThingType=1}}class y extends u{constructor(){super(...arguments),this.ActionType=t.ThingProperty,this.ThingType=1}}class n extends u{constructor(){super(...arguments),this.ActionType=t.Delay,this.Delay=100}}class c extends u{constructor(){super(...arguments),this.ActionType=t.SetGlobalVariable}}class o extends u{constructor(){super(...arguments),this.ActionType=t.HttpAction}}class a extends u{constructor(){super(...arguments),this.ActionType=t.CsScript,this.name="Script"}}class r extends u{constructor(){super(...arguments),this.ActionType=t.CsClass,this.name="Script"}}class s extends u{constructor(){super(...arguments),this.ActionType=t.SendEmail}}class V{constructor(){this.Type=0,this.SortOrder=1,this.Enabled=1,this.Visible=1,this.uiDataTranslationEntities=[],this.voiceCommandThingEntities=[],this.Triggers=[],this.Actions=[],this.Conditions=[]}set EnabledUI(E){this.Enabled=E?1:0}get EnabledUI(){return 1==this.Enabled}set VisibleUI(E){this.Visible=E?1:0}get VisibleUI(){return 1==this.Visible}}},75128:(b,A,_)=>{_.d(A,{U:()=>T});var h=_(41923),m=_(20361),d=_(17229),g=_(19462),p=_(77144),S=_(1901),P=_(9952),I=_(15788);class T{GenerateThingsActionsFromRoomsAndFilter(e,t){let u=[];if(e)for(let l=0;l<e.length;l++){let y=e[l];if(y.devices.length>0){let n=[];for(let o=0;o<t.length;o++)n=n.concat(this.filterCategory(t[o],y.devices));let c=0;for(let o=0;o<n.length;o++)try{let a=n[o],r=new d.HI;if(r.ThingId=a.id,r.ThingType=S.a.Device,r.ThingPropertyOperator="1",r.ActionType=d.Bg.ThingProperty,r.Index=c++,r.Name=a.translated_name,(a.type==p.Y.Dimmer||a.type==p.Y.Shutter||a.type==p.Y.Switch||a.type==p.Y.RGB)&&(r.ThingPropertyValue=String(a.value),r.ThingDeviceType=a.type,r.ThingProperty="Value",u.push(r)),a.type==p.Y.MultiMedia){let s=a;r.ThingDeviceType=a.type,console.log(s.PowerState),s.PowerState?(r.ThingProperty="PowerState",r.ThingPropertyValue="true",u.push(r)):(r.ThingProperty="PowerState",r.ThingPropertyValue="false",u.push(r))}else if(a.type==p.Y.Thermostat){let s=new d.HI;s.ThingId=a.id,s.ThingPropertyOperator="1",s.ThingType=S.a.Device,s.ActionType=d.Bg.ThingProperty,s.ThingDeviceType=a.type,s.Index=c++,s.Name=a.translated_name,s.ThingProperty="AcMode",s.ThingPropertyValue=String(a.AcMode),r.ThingDeviceType=a.type,r.ThingPropertyValue=String(a.SetTemperature),r.ThingProperty="SetTemperature",u.push(s),u.push(r)}}catch{console.error("Unable to generate scene action for this device")}}}return u}getDeviceCategoryOrder(e){switch(e){case P.I.Lighting:return 1;case P.I.Curtains:return 2;case P.I.HVAC:return 3;case P.I.Fan:return 4;case P.I.Media:return 5;case P.I.Lock:return 6;case P.I.Appliances:return 7;case P.I.Other:return 8;case P.I.Valve:return 9;case P.I.Gate:return 10;case P.I.Siren:return 11;default:return 9999}}compare(e,t){return(e=0==e?999999:e)==(t=0==t?999999:t)?0:e<t?-1:1}filterCategory(e,t){console.time("filter_category");let u=t.filter(c=>c.visible).sort((c,o)=>{let a=this.compare(c.sort_id,o.sort_id);return 0==a&&(a=this.compare(this.getDeviceCategoryOrder(c.category),this.getDeviceCategoryOrder(o.category))),0==a&&(a=this.compare(c.translated_name,o.translated_name)),a}),l=[];console.log("filter type:"+e.type),l="all"==e.type?u.slice():e.category.length>0?u.filter(c=>e.category.indexOf(c.category)>-1):u.slice();let y=[];y=e.device_types.length>0?u.filter(c=>e.device_types.indexOf(c.type)>-1):u.slice();let n=[];return n=u.filter(e.category_and_type?c=>l.indexOf(c)>-1&&y.indexOf(c)>-1:c=>l.indexOf(c)>-1||y.indexOf(c)>-1),u=e.exclude?u.filter(c=>n.indexOf(c)<0):n,e.exclusionCategoryType&&e.exclusionCategoryType.length>0&&e.exclusionCategoryType.forEach(c=>{u=u.filter(o=>!(o.category==c.deviceCategory&&o.type==c.deviceType))}),u=u.filter(c=>this.is_valid_on_type(c.type)),console.timeEnd("filter_category"),u}is_valid_on_type(e){return e==p.Y.Dimmer||e==p.Y.Switch||e==p.Y.Shutter||e==p.Y.RGB||e==p.Y.Thermostat||e==p.Y.MultiMedia}getMonth(e){let t=e=Number(e);switch(e){case 0:t="jan";break;case 1:t="feb";break;case 2:t="mar";break;case 3:t="apr";break;case 4:t="may";break;case 5:t="jun";break;case 6:t="jul";break;case 7:t="aug";break;case 8:t="sep";break;case 9:t="oct";break;case 10:t="nov";break;case 11:t="dec"}return t}GetTaggedValue(e,t="span",u="",l=!1){return" <"+t+' class="'+u+'" '+(l?'style="color:'+e+';"':"")+"> "+e+" </"+t+"> "}GetAcStateName(e){switch(e=Number(e)){case h.p.off:return"off";case h.p.heat:return"heat";case h.p.cool:return"cool";case h.p.auto:return"auto";case h.p.dry:return"dry";case h.p.fan:return"fan";default:return"off"}}AcStateIcon(e){switch(e){case h.p.off:return g.s.Images.ac_off;case h.p.heat:return g.s.Images.ac_heat;case h.p.cool:return g.s.Images.ac_cool;case h.p.auto:return g.s.Images.ac_auto;case h.p.dry:return g.s.Images.ac_dry;case h.p.fan:return g.s.Images.ac_fan;default:return g.s.Images.ac_mode}}GetFanStateName(e){switch(e=Number(e)){case m.E.off:return"off";case m.E.auto:return"auto";case m.E.low:return"low";case m.E.medium:return"medium";case m.E.high:return"high";default:return"off"}}FanStateIcon(e){switch(e){case m.E.off:return g.s.Images.ac_off;case m.E.auto:return g.s.Images.ac_auto;case m.E.low:return g.s.Images.fan_slow;case m.E.medium:return g.s.Images.fan_medium;case m.E.high:return g.s.Images.fan_high;default:return g.s.Images.ac_fan}}getHTMLColor(e){let t=0,u=0,l=0,y=0;return t=(4278190080&e)>>>24,u=(16711680&e)>>>16,l=(65280&e)>>>8,y=255&e,"rgb("+u+","+l+","+y+")"}getOccupancyStatus(e){return 1==e||1==e||"true"==e?"occupied":"unoccupied"}getDoorBellStatus(e){return 1==e||1==e||"true"==e?"active":"idle"}getGeneralSensorValue(e){return 1==e||1==e||"true"==e?"active":"idle"}getSwitchState(e){return 1==e||1==e||"true"==e?"on":"off"}getLockState(e){return 1==e||1==e||"true"==e?"lock":"unlock"}getLockIntrusionState(e){return 1==e||1==e||"true"==e?"active":"idle"}getLockPrivacyState(e){return 1==e||1==e||"true"==e?"active":"idle"}getLockTamperState(e){return 1==e||1==e||"true"==e?"active":"idle"}getLockDLOState(e){return 1==e||1==e||"true"==e?"open":"close"}getDoorState(e){return 1==e||1==e||"true"==e?"open":"close"}getSceneSavingEntity(e){let t={id:e.Id,name:e.Name,roomId:e.RoomId,type:e.Type,enabled:e.Enabled,visible:e.Visible,imageId:e.ImageId,sortOrder:e.SortOrder,maxRunningInstances:Number.parseInt(e.MaxRunningInstances.toString()),minTimeBetweenRuns:Number.parseFloat(e.MinTimeBetweenRuns.toString())},u=[];if(e.Conditions)for(let c=0;c<e.Conditions.length;c++){let o=e.Conditions[c];o.ConditionType==d.oS.DateTime?u.push({id:o.Id,index:o.Index,conditionType:o.ConditionType,daysOfWeek:o.DaysOfWeek,fromTime:o.FromTime,toTime:o.ToTime}):o.ConditionType==d.oS.GlobalVariableValue?u.push({id:o.Id,index:o.Index,conditionType:o.ConditionType,globalVariable:o.GlobalVariable,globalVariableValue:o.GlobalVariableValue,globalVariableOperator:o.GlobalVariableOperator}):o.ConditionType==d.oS.ThingChanged?u.push({id:o.Id,index:o.Index,conditionType:o.ConditionType,thingId:o.ThingId,thingType:o.ThingType,property:o.Property,propertyValue:o.PropertyValue,propertyOperator:o.PropertyOperator}):o.ConditionType==d.oS.File&&u.push({id:o.Id,index:o.Index,conditionType:o.ConditionType,fileOperator:o.FileCondition,fileName:o.FileName})}let l=[];if(e.Triggers)for(let c=0;c<e.Triggers.length;c++){let o=e.Triggers[c],a={},r=[];if(o.TriggerType==d.K_.ThingChanged?a={id:o.Id,triggerType:o.TriggerType,thingId:o.ThingId,thingType:o.ThingType,silent:o.Silent?1:0,property:o.Property,propertyFromValue:o.PropertyFrom,propertyToValue:o.PropertyTo}:o.TriggerType==d.K_.GlobalVariableChange?a={id:o.Id,silent:o.Silent?1:0,triggerType:o.TriggerType,globalVariable:o.GlobalVariable,globalVariableFromValue:o.GlobalVariableFromValue,globalVariableToValue:o.GlobalVariableToValue}:o.TriggerType==d.K_.Schedule&&(a={id:o.Id,silent:o.Silent?1:0,triggerType:o.TriggerType,triggerAt:o.When,triggerAtTime:o.At}),o.Conditions)for(let s=0;s<o.Conditions.length;s++){let V=o.Conditions[s];V.ConditionType==d.oS.DateTime?r.push({id:V.Id,index:V.Index,conditionType:V.ConditionType,daysOfWeek:V.DaysOfWeek,fromTime:V.FromTime,toTime:V.ToTime}):V.ConditionType==d.oS.GlobalVariableValue?r.push({id:V.Id,index:V.Index,conditionType:V.ConditionType,globalVariable:V.GlobalVariable,globalVariableValue:V.GlobalVariableValue,globalVariableOperator:V.GlobalVariableOperator}):V.ConditionType==d.oS.ThingChanged?r.push({id:V.Id,index:V.Index,conditionType:V.ConditionType,thingId:V.ThingId,thingType:V.ThingType,property:V.Property,propertyValue:V.PropertyValue,propertyOperator:V.PropertyOperator}):V.ConditionType==d.oS.File&&r.push({id:V.Id,index:V.Index,conditionType:V.ConditionType,fileOperator:V.FileCondition,fileName:V.FileName})}l.push({triggerEntity:a,triggerConditionEntities:r})}let y=[];if(e.Actions)for(let c=0;c<e.Actions.length;c++){let o=e.Actions[c];if(o.ActionType==d.Bg.Delay){let a=o,r={id:a.Id,index:a.Index,actionType:a.ActionType,breakOnFail:a.BreakOnFail};a.Id&&(r.id=a.Id);let s=[];s.push({name:"Delay",value:a.Delay}),y.push({sceneActionEntity:r,sceneActionParameterEntities:s})}else if(o.ActionType==d.Bg.HttpAction){let r={id:o.Id,index:o.Index,actionType:o.ActionType,breakOnFail:o.BreakOnFail},s=[];s.push({name:"Url",value:o.Url}),y.push({sceneActionEntity:r,sceneActionParameterEntities:s})}else if(o.ActionType==d.Bg.SetGlobalVariable){let a=o,r={id:a.Id,index:a.Index,actionType:a.ActionType,breakOnFail:a.BreakOnFail},s=[];s.push({name:"VariableName",value:a.VariableName}),s.push({name:"VariableValue",value:a.VariableValue}),y.push({sceneActionEntity:r,sceneActionParameterEntities:s})}else if(o.ActionType==d.Bg.ThingProperty){let a=o,r={id:a.Id,index:a.Index,actionType:a.ActionType,breakOnFail:a.BreakOnFail},s=[];s.push({name:"ThingId",value:a.ThingId}),s.push({name:"ThingType",value:a.ThingType}),s.push({name:"ThingProperty",value:a.ThingProperty}),s.push({name:"ThingPropertyOperator",value:a.ThingPropertyOperator}),s.push({name:"ThingPropertyValue",value:a.ThingPropertyValue}),y.push({sceneActionEntity:r,sceneActionParameterEntities:s})}else if(o.ActionType==d.Bg.ThingAction){let a=o,r={id:a.Id,index:a.Index,actionType:a.ActionType,breakOnFail:a.BreakOnFail},s=[];s.push({name:"ThingType",value:a.ThingType}),s.push({name:"ThingId",value:a.ThingId}),s.push({name:"ThingAction",value:a.ThingAction}),s.push({name:"ThingActionParameters",value:this.getThingActionParameter(a.ThingActionParameters)}),y.push({sceneActionEntity:r,sceneActionParameterEntities:s})}else if(o.ActionType==d.Bg.CsScript){let a=[],s={id:o.Id,index:o.Index,actionType:o.ActionType,breakOnFail:o.BreakOnFail};a.push({name:o.name,value:o.value}),y.push({sceneActionEntity:s,sceneActionParameterEntities:a})}else if(o.ActionType==d.Bg.CsClass){let a=[],s={id:o.Id,index:o.Index,actionType:o.ActionType,breakOnFail:o.BreakOnFail};a.push({name:o.name,value:o.value}),y.push({sceneActionEntity:s,sceneActionParameterEntities:a})}else if(o.ActionType==d.Bg.SendEmail){let a=[],r=o,s={id:r.Id,index:r.Index,actionType:r.ActionType,breakOnFail:r.BreakOnFail};a.push({name:"EmailTo",value:r.EmailTo}),a.push({name:"EmailSubject",value:r.EmailSubject}),a.push({name:"EmailContent",value:r.EmailContent}),a.push({name:"EmailAttachments",value:r.EmailAttachments}),y.push({sceneActionEntity:s,sceneActionParameterEntities:a})}}let n={};return n.sceneEntity=t,n.triggerEntityDTOs=l,n.sceneActionEntityDTOs=y,n.sceneConditionEntities=u,n.voiceCommandThingEntities=e.voiceCommandThingEntities,n.uiDataTranslationEntities=e.uiDataTranslationEntities,e.PreviousEntityDTO&&(e.PreviousEntityDTO=I.b.mergeObject(e.PreviousEntityDTO,n),e.PreviousEntityDTO=I.b.mergeObject(e.PreviousEntityDTO,n)),n}GetAcState(e){switch(e=Number(e)){case 1:return"heating";case 2:return"cooling";case 4:return"dry";case 5:return"fan";default:return"idle"}}GetFanState(e){return 2==(e=Number(e))?"low":3==e?"medium":4==e?"high":"idle"}getSilentIcon(){return'&nbsp<ion-icon class="icon icon-md ion-md-notifications-off"></ion-icon>'}GetMinifyCode(e){return e?this.GetTaggedValue(e.length>20?e.substr(0,16)+"...":e,"span","value-tag"):""}getThingActionParameter(e){return e||""}GetAcModeName(e){switch(e=Number(e)){case h.p.off:return"off";case h.p.heat:return"heat";case h.p.cool:return"cool";case h.p.auto:return"auto";case h.p.dry:return"dry";case h.p.fan:return"fan";default:return"off"}}AcModeIcon(e){switch(e){case h.p.off:return g.s.Images.ac_off;case h.p.heat:return g.s.Images.ac_heat;case h.p.cool:return g.s.Images.ac_cool;case h.p.auto:return g.s.Images.ac_auto;case h.p.dry:return g.s.Images.ac_dry;case h.p.fan:return g.s.Images.ac_fan;default:return g.s.Images.ac_mode}}GetFanModeName(e){switch(e=Number(e)){case m.E.off:return"off";case m.E.auto:return"auto";case m.E.low:return"low";case m.E.medium:return"medium";case m.E.high:return"high";default:return"off"}}FanModeIcon(e){switch(e){case m.E.off:return g.s.Images.fan_off;case m.E.auto:return g.s.Images.fan_auto;case m.E.low:return g.s.Images.fan_slow;case m.E.medium:return g.s.Images.fan_medium;case m.E.high:return g.s.Images.fan_high;default:return g.s.Images.ac_fan}}getListOfProperties(e){let t=[];if(e.thingType==S.a.Room)t.push("OccupancySensingEnabled"),t.push("OccupancyState"),t.push("ForceOccupancyState"),t.push("ManualOccupancyState");else if(e.thingType==S.a.Scene)t.push("RunningInstances");else if(e.thingType==S.a.Device)if(e.is_device&&t.push("Online"),e.type==p.Y.Switch)t.push("Value");else if(e.type==p.Y.VirtualDevice){let u=e;if(u)for(let l of Object.keys(u.properties))"LastChanged"!=l&&"LastUpdated"!=l&&"OfflineReason"!=l&&"Online"!=l&&t.push(l)}else e.type==p.Y.Dimmer||e.type==p.Y.RemoteControl?t.push("Value"):e.type==p.Y.Thermostat?(t.push("SetTemperature"),t.push("RoomTemperature"),t.push("RoomHumidity"),t.push("AcMode"),t.push("AcState"),t.push("FanMode"),t.push("FanState"),t.push("PowerState")):e.type==p.Y.MultiMedia?(t.push("PowerState"),t.push("MediaPlayerStatus")):e.type==p.Y.DoorSensor||e.type==p.Y.MotionSensor?t.push("Value"):e.type==p.Y.Lock?(t.push("Value"),t.push("LastUnlocked"),t.push("LastUnlockedBy")):e.type==p.Y.DoorBell||e.type==p.Y.OccupancySensor?t.push("Value"):e.type==p.Y.Camera||(e.type==p.Y.FloodSensor||e.type==p.Y.HumiditySensor||e.type==p.Y.LightSensor||e.type==p.Y.SmokeSensor?t.push("Value"):e.type==p.Y.TemperatureSensor?(t.push("Value"),t.push("WarningOnLowTemperature"),t.push("WarningOnHighTemperature")):e.type==p.Y.RGB?(t.push("Value"),t.push("Animation"),t.push("AnimationSpeed"),t.push("PowerState")):e.type==p.Y.Shutter&&t.push("Value"));return t}getParameterDetailedDescriptionByPropertyOrActionParam(e,t,u=void 0){let l=[];if(e.thingType==S.a.Scene)"RunningInstances"==t&&l.push({Name:"value",Property:t,DeviceType:e.type,Type:"Number",ValueFrom:null,ValueTo:0});else if(e.thingType==S.a.Room)"SetOccupancySensingEnabled"!=t&&"OccupancySensingEnabled"!=t&&"OccupancyState"!=t&&"Value"!=t&&"ForceOccupancyState"!=t&&"ManualOccupancyState"!=t||l.push({Name:"value",Property:t,DeviceType:e.type,Type:"Boolean",ValueFrom:null,ValueTo:!0});else if(e.thingType==S.a.Device){switch(e.type){case p.Y.Switch:"Value"==t&&l.push({Name:"value",Property:t,DeviceType:e.type,Type:"Boolean",ValueFrom:null,ValueTo:!0});break;case p.Y.RGB:"PowerState"==t&&l.push({Name:"PowerState",Property:t,DeviceType:e.type,Type:"Boolean",ValueFrom:null,ValueTo:!0}),"Value"==t?l.push({Name:"color",Property:t,DeviceType:e.type,Type:"Color",ValueFrom:null,ValueTo:0}):"Animation"==t||u&&"StartAnimation"==u.Name?l.push({Name:"Animation",Property:t,DeviceType:e.type,Type:"Animation",ValueFrom:null,ValueTo:0,possible_animation:e.animations}):"AnimationSpeed"==t&&l.push({Name:"Animation",Type:"Number",Property:t,DeviceType:e.type,ValueTo:0});break;case p.Y.Thermostat:if("PowerState"==t)l.push(this.getProperty(e,"value",t,"Boolean",!0));else if("SetTemperature"==t)l.push({Name:"Temperature",Property:t,DeviceType:e.type,Type:"SetTemperature",ValueFrom:null,ValueTo:18});else if("SetWarningOnLowTemperature"==t)l.push({Name:"Temperature",Property:t,DeviceType:e.type,Type:"SetTemperature",ValueFrom:null,ValueTo:18});else if("SetWarningOnHighTemperature"==t)l.push({Name:"Temperature",Property:t,DeviceType:e.type,Type:"SetTemperature",ValueFrom:null,ValueTo:18});else if("SetRoomTemperature"==t||"RoomTemperature"==t)l.push({Name:"RoomTemperature",Property:t,DeviceType:e.type,Type:"RoomTemperature",ValueFrom:null,ValueTo:18});else if("RoomHumidity"==t)l.push({Name:"RoomHumidity",Property:t,DeviceType:e.type,Type:"Number",ValueFrom:null,ValueTo:80});else if("AcMode"==t){let n={Name:"AcMode",Property:t,Image:this.AcModeIcon(0),supported_ac_modes:[],DeviceType:e.type,Type:"SetAcMode",ValueFrom:null,ValueTo:0},c=e.supported_ac_modes;if(c){let o=[];for(let a=0;a<c.length;a++)o.push({key:c[a],selected:0==a,value:this.GetAcModeName(c[a])});n.supported_ac_modes=o}l.push(n)}else if("FanMode"==t){let n={Name:"FanMode",Property:t,Image:this.AcModeIcon(0),supported_fan_modes:[],DeviceType:e.type,Type:"SetFanMode",ValueFrom:null,ValueTo:0},c=e.supported_fan_modes;if(c){let o=[];for(let a=0;a<c.length;a++)o.push({key:c[a],selected:0==a,value:this.GetFanModeName(c[a])});n.supported_fan_modes=o}l.push(n)}else if("FanState"==t){let n={Name:"FanState",Property:t,Image:g.s.Images.fan_icon,supported_fan_states:[{key:0,value:this.GetFanState(0)},{key:1,value:this.GetFanState(1)},{key:2,value:this.GetFanState(2)},{key:3,value:this.GetFanState(3)},{key:4,value:this.GetFanState(4)}],DeviceType:e.type,Type:"FanState",ValueFrom:null,AcValue:"idle",ValueTo:0};l.push(n)}else if("AcState"==t){let n={Name:"AcState",Property:t,Image:g.s.Images.ac_icon,supported_ac_states:[{key:0,value:this.GetAcState(0)},{key:1,value:this.GetAcState(1)},{key:2,value:this.GetAcState(2)},{key:4,value:this.GetAcState(4)},{key:5,value:this.GetAcState(5)}],DeviceType:e.type,Type:"AcState",ValueFrom:null,ValueTo:0,AcValue:"idle"};l.push(n)}break;case p.Y.VirtualDevice:let y;if(u){if("Button"==t||"PressButton"==u.Name)return y={Name:"Button",Property:t,DeviceType:e.type,ValueTo:"",controls:e.device_ui.controls.filter(n=>2==n.type)},l.push(y),l;if("Toggle"==t||"SetToggle"==u.Name)return y={Name:"Toggle",Property:t,Type:"Toggle"==t?"String":"Boolean",DeviceType:e.type,ValueTo:"",controls:e.device_ui.controls.filter(n=>4==n.type)},l.push(y),l;if("Property"==t||"SetProperty"==u.Name)return y={Name:"Property",Property:t,Type:"String",DeviceType:e.type,ValueTo:"",controls:e.device_ui.controls.filter(n=>1==n.type)},l.push(y),y={Name:"Value",Property:t,DeviceType:e.type,ValueTo:"",Type:"String"},l.push(y),l;if("Slider"==t||"SetSlider"==u.Name)return y={Name:"Slider",Property:t,DeviceType:e.type,ValueTo:"",controls:e.device_ui.controls.filter(n=>3==n.type)},l.push(y),y={Name:"Value",Type:"Number",Property:t,DeviceType:e.type,ValueTo:0,controls:e.device_ui.controls.filter(n=>3==n.type)},l.push(y),y=void 0,l;y&&l.push(y)}t&&t.startsWith("UI.")&&l.push(this.getProperty(e,"value",t,"String",""));break;case p.Y.MultiMedia:if(u){if("SetPowerState"==u.Name)l.push({Name:"PowerState",Property:t,supported_ac_states:[{key:"true",value:"TurnOn"},{key:"false",value:"TurnOff"}],DeviceType:e.type,Type:"PowerState",ValueFrom:null,ValueTo:"true"});else if("SetSource"==u.Name){let n=e.SupportedSources,c=[];if(!(n||n.length<2))return;{let a=n.split(",");for(let r=0;r<a.length;r++){let s=a[r].split(/=(.+)/);s.length<2||c.push({key:s[1],value:s[0]})}}l.push({Name:"SourceStatus",Property:t,SupportedSources:c,DeviceType:e.type,Type:"SourceStatus",ValueFrom:null,ValueTo:""})}else if("SetTrack"==u.Name)l.push({Name:"Track",Property:t,DeviceType:e.type,Type:"String",ValueFrom:null,ValueTo:""});else if("SetVolume"==u.Name)l.push({Name:"Volume",Property:t,DeviceType:e.type,Type:"Number",ValueFrom:null,ValueTo:0});else if("SetSource"==u.Name){let n=e.SupportedSources,c=[];if(!(n||n.length<2))return;{let o=n.split(",");for(let r=0;r<o.length;r++){let s=o[r].split(/=(.+)/);s.length<2||c.push({key:s[1],value:s[0]})}l.push({Name:"SetSource",Property:t,SupportedSources:c,DeviceType:e.type,Type:"String",ValueFrom:null,ValueTo:0})}}else if("PowerState"==t)l.push({Name:"PowerState",Property:t,supported_ac_states:[{key:"true",value:"TurnOn"},{key:"false",value:"TurnOff"}],DeviceType:e.type,Type:"AcState",ValueFrom:null,ValueTo:"true"});else if("RunApp"==u.Name){let n=[],c=e.Apps.split(",");for(let a=0;a<c.length;a++){let r=c[a].split("=");n.push({value:r[0],key:r[1]})}l.push({Name:"Link",Property:t,Apps:n,DeviceType:e.type,Type:"String",ValueFrom:null,ValueTo:0})}"SetPowerState"==u.Name?l.push({Name:"SetPower",Property:t,supported_ac_states:[{key:"true",value:"TurnOn"},{key:"false",value:"TurnOff"}],ValueFrom:null,ValueTo:"true"}):"MediaPlayerStatus"==t&&l.push({Name:"MediaPlayerStatus",Property:t,supported_ac_states:[{key:1,value:"STOPPED"},{key:2,value:"PAUSED PLAYBACK"},{key:4,value:"PAUSED RECORDING"},{key:3,value:"PLAYING"},{key:5,value:"RECORDING"},{key:6,value:"TRANSITIONING PLAYBACK"},{key:0,value:"NO MEDIA PRESENT"}],DeviceType:e.type,Type:"AcState",ValueFrom:null,ValueTo:"TurnOn"})}}e.type==p.Y.MultiMedia?"PowerState"==t?l.push(this.getProperty(e,"value",t,"Boolean",!0)):"MediaPlayerStatus"==t&&l.push(this.getProperty(e,"value",t,"String","")):e.type==p.Y.OccupancySensor?l.push(this.getProperty(e,"value",t,"Boolean",!0)):e.type!=p.Y.MotionSensor&&e.type!=p.Y.FloodSensor&&e.type!=p.Y.DoorSensor&&e.type!=p.Y.SmokeSensor&&e.type!=p.Y.Lock&&e.type!=p.Y.OccupancySensor&&e.type!=p.Y.DoorBell||"Value"!=t&&"SetWarningOnActive"!=t&&"SetArmed"!=t&&"SetIncludeInOccupancySensing"!=t&&"WarningOnActive"!=t&&"Armed"!=t&&"IncludeInOccupancySensing"!=t?e.type!=p.Y.Dimmer&&e.type!=p.Y.Shutter&&e.type!=p.Y.RemoteControl||"Value"!=t?e.type==p.Y.TemperatureSensor?l.push({Name:"value",Property:t,DeviceType:e.type,Type:"Number",RangeType:"Temp",ValueFrom:null,ValueTo:100}):e.type==p.Y.LightSensor?l.push(this.getProperty(e,"value",t,"Number",100)):"Online"==t&&l.push(this.getProperty(e,"online",t,"Boolean",!1)):l.push(this.getProperty(e,"value",t,"Number",0)):l.push(this.getProperty(e,"value",t,"Boolean",!0))}return l}getProperty(e,t,u,l="Boolean",y=!0){return{Name:t,Property:u,DeviceType:e.type,Type:l,ValueFrom:null,ValueTo:y}}}}}]);