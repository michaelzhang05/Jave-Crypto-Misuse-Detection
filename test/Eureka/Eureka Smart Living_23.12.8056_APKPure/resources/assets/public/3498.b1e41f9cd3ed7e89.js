"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3498,9764],{73498:(R,v,g)=>{g.r(v),g.d(v,{RoomsManagementPageModule:()=>he});var w=g(96814),f=g(56223),s=g(73582),C=g(70160),u=g(15861),M=g(19462),h=g(8873),b=g(210),_=g(51140),p=g(56544),e=g(65879),d=g(34414),P=g(46729),N=g(6593),Z=g(63999),A=g(77935),L=g(59764),J=g(69705),D=g(48753);function q(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-button",9),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.disableEditing())}),e._UZ(1,"ion-icon",10),e.qZA()}}function U(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-button",9),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.CreateNewRoom())}),e._UZ(1,"ion-icon",11),e.qZA()}}function H(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-searchbar",12),e.NdJ("ionInput",function(n){e.CHM(o);const a=e.oxw();return e.KtG(a.search(n))}),e.ALo(4,"translate"),e.qZA()()()()}2&i&&(e.xp6(3),e.s9C("placeholder",e.lcZ(4,1,"search")))}function Q(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-item-sliding",14)(1,"ion-item",15)(2,"ion-avatar",16),e._UZ(3,"img",17),e.qZA(),e.TgZ(4,"h2",18),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA(),e._UZ(8,"ion-icon",19),e.qZA(),e.TgZ(9,"ion-item-options",20)(10,"ion-button",21),e.NdJ("click",function(){const a=e.CHM(o).$implicit,r=e.oxw(2);return e.KtG(r.EditRoom(a))}),e._UZ(11,"ion-icon",22),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"ion-button",23),e.NdJ("click",function(){const a=e.CHM(o).$implicit,r=e.oxw(2);return e.KtG(r.DuplicateRoom(a))}),e._UZ(15,"ion-icon",24),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"ion-button",25),e.NdJ("click",function(){const a=e.CHM(o).$implicit,r=e.oxw(2);return e.KtG(r.DeleteRoom(a))}),e._UZ(19,"ion-icon",26),e._uU(20),e.ALo(21,"translate"),e.qZA()()()}if(2&i){const o=l.$implicit,t=e.oxw(2);e.xp6(3),e.Q6J("src",o.imageId?t.getImageUrlById(o.imageId):t.IMAGES.default_room_image,e.LSH),e.xp6(1),e.Udp("text-decoration",0==o.visible?"line-through":"none")("opacity",0==o.enabled?"0.5":"1"),e.xp6(1),e.Oqu(o.name),e.xp6(2),e.Oqu(o.Name),e.xp6(5),e.hij(" ",e.lcZ(13,10,"edit")," "),e.xp6(4),e.hij(" ",e.lcZ(17,12,"duplicate")," "),e.xp6(4),e.hij(" ",e.lcZ(21,14,"delete")," ")}}function Y(i,l){if(1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,Q,22,16,"ion-item-sliding",13),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.filtered_list_of_room)}}function S(i,l){if(1&i&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()),2&i){const o=e.oxw(2);e.xp6(2),e.Oqu(o.room.Name+" "),e.xp6(1),e.Oqu(e.lcZ(4,2,"room-name-exists"))}}function B(i,l){if(1&i&&(e.TgZ(0,"ion-select-option",31),e._uU(1),e.qZA()),2&i){const o=l.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function F(i,l){1&i&&e._UZ(0,"ion-icon",36)}function G(i,l){1&i&&e._UZ(0,"ion-icon",36)}function K(i,l){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col"),e._UZ(5,"ion-input",38),e.qZA()()),2&i){const o=l.$implicit;e.xp6(3),e.Oqu(o.name),e.xp6(2),e.uIk("data-langId",o.id)("data-langName",o.name)}}function W(i,l){if(1&i&&(e.ynx(0),e.YNc(1,K,6,3,"ion-row",37),e.BQk()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.uiLanguages)}}function j(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-input",41),e.NdJ("ngModelChange",function(n){e.CHM(o);const a=e.oxw().index,r=e.oxw(3);return e.KtG(r.room.uiDataTranslationEntities[a].translation=n)}),e.qZA()}if(2&i){const o=e.oxw().index,t=e.oxw(3);e.Q6J("ngModel",t.room.uiDataTranslationEntities[o].translation)}}function V(i,l){if(1&i&&e._UZ(0,"ion-input",38),2&i){const o=e.oxw().$implicit;e.uIk("data-langId",o.id)("data-langName",o.name)}}function z(i,l){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col"),e.YNc(5,j,1,1,"ion-input",39),e.YNc(6,V,1,2,"ion-input",40),e.qZA()()),2&i){const o=l.$implicit,t=l.index,n=e.oxw(3);e.xp6(3),e.Oqu(o.name),e.xp6(2),e.Q6J("ngIf",n.room.uiDataTranslationEntities[t]&&n.room.uiDataTranslationEntities[t].uiLanguageId==o.id),e.xp6(1),e.Q6J("ngIf",!n.room.uiDataTranslationEntities[t])}}function $(i,l){if(1&i&&(e.ynx(0),e.YNc(1,z,7,3,"ion-row",37),e.BQk()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.uiLanguages)}}function X(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-input",41),e.NdJ("ngModelChange",function(n){e.CHM(o);const a=e.oxw().index,r=e.oxw(3);return e.KtG(r.room.uiDataTranslationEntities[a].translation=n)}),e.qZA()}if(2&i){const o=e.oxw().index,t=e.oxw(3);e.Q6J("ngModel",t.room.uiDataTranslationEntities[o].translation)}}function ee(i,l){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col"),e.YNc(5,X,1,1,"ion-input",39),e.qZA()()),2&i){const o=l.$implicit,t=l.index,n=e.oxw(3);e.xp6(3),e.Oqu(o.name),e.xp6(2),e.Q6J("ngIf",n.room.uiDataTranslationEntities[t])}}function ne(i,l){if(1&i&&(e.ynx(0),e.YNc(1,ee,6,2,"ion-row",37),e.BQk()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.uiLanguages)}}function te(i,l){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col"),e._UZ(5,"ion-input",38),e.qZA()()),2&i){const o=l.$implicit;e.xp6(3),e.Oqu(o.name),e.xp6(2),e.uIk("data-langId",o.id)("data-langName",o.name)}}function oe(i,l){if(1&i&&(e.ynx(0),e.YNc(1,te,6,3,"ion-row",37),e.BQk()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.uiLanguages)}}function ie(i,l){1&i&&e._UZ(0,"ion-icon",36)}function ae(i,l){1&i&&e._UZ(0,"ion-icon",36)}function re(i,l){if(1&i&&(e.TgZ(0,"ion-select-option",31),e._uU(1),e.qZA()),2&i){const o=l.$implicit;e.s9C("value",o.value),e.xp6(1),e.Oqu(o.name)}}function le(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-col",29)(6,"ion-select",42),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.scrollToSelected())})("ngModelChange",function(n){e.CHM(o);const a=e.oxw(2);return e.KtG(a.room.Visible=n)}),e.YNc(7,re,2,2,"ion-select-option",32),e.qZA()()()}if(2&i){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"visible")),e.xp6(3),e.Q6J("ngModel",o.room.Visible)("compareWith",o.compareWith),e.xp6(1),e.Q6J("ngForOf",o.visibilityOptions)}}function se(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-col",29)(6,"ion-select",42),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.scrollToSelected())})("ngModelChange",function(n){e.CHM(o);const a=e.oxw(2);return e.KtG(a.room.Type=n)}),e.TgZ(7,"ion-select-option",43),e._uU(8,"Apartment"),e.qZA(),e.TgZ(9,"ion-select-option",44),e._uU(10,"Hotel Room"),e.qZA(),e.TgZ(11,"ion-select-option",45),e._uU(12,"Common Facility"),e.qZA(),e.TgZ(13,"ion-select-option",46),e._uU(14,"Commercial Shop"),e.qZA()()()()}if(2&i){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,3,"type")),e.xp6(3),e.Q6J("ngModel",o.room.Type)("compareWith",o.compareWith)}}function ce(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-col")(6,"ion-input",47,48),e.NdJ("ngModelChange",function(n){e.CHM(o);const a=e.oxw(2);return e.KtG(a.room.SortOrder=n)}),e.qZA()()()}if(2&i){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,2,"sort-order")),e.xp6(3),e.Q6J("ngModel",o.room.SortOrder)}}function ge(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-col")(6,"ion-input",49,50),e.NdJ("ngModelChange",function(n){e.CHM(o);const a=e.oxw(2);return e.KtG(a.room.Location=n)}),e.qZA()()()}if(2&i){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,2,"location")),e.xp6(3),e.Q6J("ngModel",o.room.Location)}}function me(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-col")(6,"ion-input",51,52),e.NdJ("ngModelChange",function(n){e.CHM(o);const a=e.oxw(2);return e.KtG(a.room.LocationCode=n)}),e.qZA()()()}if(2&i){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,2,"location-code")),e.xp6(3),e.Q6J("ngModel",o.room.LocationCode)}}function _e(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-grid",27)(1,"ion-row")(2,"ion-col")(3,"ion-label"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"ion-col")(7,"ion-input",28),e.NdJ("ngModelChange",function(n){e.CHM(o);const a=e.oxw();return e.KtG(a.room.Name=n)})("ionBlur",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.checkRoomName(n.room.Name))}),e.qZA(),e.YNc(8,S,5,4,"span",7),e.qZA()(),e.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-label"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"ion-col",29)(15,"ion-select",30),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.scrollToSelected())})("ngModelChange",function(n){e.CHM(o);const a=e.oxw();return e.KtG(a.room.ParentId=n)}),e._UZ(16,"ion-select-option",31),e.YNc(17,B,2,2,"ion-select-option",32),e.qZA()()(),e.TgZ(18,"ion-row")(19,"ion-col")(20,"ion-label"),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"ion-col",29)(24,"img",33),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.selectImage(n.room.ImageId,n.room,"ImageId"))}),e.qZA()()(),e.TgZ(25,"ion-row")(26,"ion-col")(27,"p",34),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.showNameTraslation=!n.showNameTraslation)}),e._uU(28),e.ALo(29,"translate"),e.YNc(30,F,1,0,"ion-icon",35),e.YNc(31,G,1,0,"ion-icon",35),e.qZA()()(),e.YNc(32,W,2,1,"ng-container",7),e.YNc(33,$,2,1,"ng-container",7),e.YNc(34,ne,2,1,"ng-container",7),e.YNc(35,oe,2,1,"ng-container",7),e.TgZ(36,"ion-row")(37,"ion-col")(38,"p",34),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.showAdvancedOptions=!n.showAdvancedOptions)}),e._uU(39),e.ALo(40,"translate"),e.YNc(41,ie,1,0,"ion-icon",35),e.YNc(42,ae,1,0,"ion-icon",35),e.qZA()()(),e.YNc(43,le,8,6,"ion-row",7),e.YNc(44,se,15,5,"ion-row",7),e.YNc(45,ce,8,4,"ion-row",7),e.YNc(46,ge,8,4,"ion-row",7),e.YNc(47,me,8,4,"ion-row",7),e.qZA()}if(2&i){const o=e.oxw();e.Udp("direction",o.text_direction),e.xp6(4),e.Oqu(e.lcZ(5,29,"room-name")),e.xp6(3),e.Udp("border",o.roomNameAvailable?"none":"1px solid red"),e.Q6J("ngModel",o.room.Name),e.xp6(1),e.Q6J("ngIf",!o.roomNameAvailable),e.xp6(4),e.Oqu(e.lcZ(13,31,"parent")),e.xp6(3),e.Q6J("ngModel",o.room.ParentId)("compareWith",o.compareWith),e.xp6(1),e.Q6J("value",-1),e.xp6(1),e.Q6J("ngForOf",o.list_of_rooms),e.xp6(4),e.Oqu(e.lcZ(22,33,"image")),e.xp6(3),e.Q6J("src",o.room.ImageId?o.getImageUrlById(o.room.ImageId):o.IMAGES.file_system.image,e.LSH),e.xp6(4),e.hij("",e.lcZ(29,35,"name-translation"),"\xa0"),e.xp6(2),e.Q6J("ngIf",o.showNameTraslation),e.xp6(1),e.Q6J("ngIf",!o.showNameTraslation),e.xp6(1),e.Q6J("ngIf",o.showNameTraslation&&!o.AddingNewRoom&&0==o.room.uiDataTranslationEntities.length),e.xp6(1),e.Q6J("ngIf",o.showNameTraslation&&!o.AddingNewRoom&&1==o.room.uiDataTranslationEntities.length),e.xp6(1),e.Q6J("ngIf",o.showNameTraslation&&!o.AddingNewRoom&&o.room.uiDataTranslationEntities.length>1),e.xp6(1),e.Q6J("ngIf",o.showNameTraslation&&o.AddingNewRoom),e.xp6(4),e.hij("",e.lcZ(40,37,"advanced"),"\xa0"),e.xp6(2),e.Q6J("ngIf",o.showAdvancedOptions),e.xp6(1),e.Q6J("ngIf",!o.showAdvancedOptions),e.xp6(1),e.Q6J("ngIf",o.showAdvancedOptions),e.xp6(1),e.Q6J("ngIf",o.showAdvancedOptions),e.xp6(1),e.Q6J("ngIf",o.showAdvancedOptions),e.xp6(1),e.Q6J("ngIf",o.showAdvancedOptions),e.xp6(1),e.Q6J("ngIf",o.showAdvancedOptions)}}function de(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-button",53),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.SaveRoom())}),e._uU(4),e.ALo(5,"translate"),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(3),e.Q6J("disabled",!o.roomNameAvailable||""==o.room.Name||null==o.room.Name||null==o.room.Name||0==o.room.Name.length),e.xp6(1),e.hij(" ",e.lcZ(5,2,"save")," ")}}const ue=[{path:"",component:(()=>{var i;class l extends p.n{constructor(t,n,a,r,c,m,T,x,E,y,O,k,xe,Me,we,I,Ce){super(c,y,E,k,t,O,!1,I,T,Me,m),this.navCtrl=t,this.modalController=n,this.ionicApp=a,this.loadingCtrl=r,this.api=c,this.toastCtrl=T,this._sanitizer=x,this.alertCtrl=E,this.platform=y,this.zone=O,this.translate=k,this.navParams=xe,this.actionSheetCtrl=we,this.router=I,this.overlayCtrl=Ce,this.imageList=[],this.uiLanguages=[],this.values=[],this.text_direction="ltr",this.theAppState=h.a,this.errorHandler=()=>{this.LoadAllRooms()},this.list_of_rooms=[],this.filtered_list_of_room=[],this.roomEditable=!1,this.showAdvancedOptions=!1,this.showNameTraslation=!1,this.roomsImage=[],this.searchQuery="",this.CurrentSlideName="",this.AddingNewRoom=!1,this.roomNameAvailable=!0,this.visibilityOptions=[{selected:!0,value:1,name:this.translate.instant("yes")},{selected:!1,value:0,name:this.translate.instant("no")}],this.modalCtrl=this.modalController,this.text_direction=this.platform.isRTL?"rtl":"ltr",this.roomHelper=new _.J,this.imageList=[]}getLangaugeName(t){return this.uiLanguages.find(n=>n.id==t).name}ionViewWillLeave(){super.ionViewWillLeave(),this.unregisterBackButtonAction&&this.unregisterBackButtonAction.unsubscribe()}ionViewDidEnter(){var t=this;return(0,u.Z)(function*(){if(h.a.DefaultController){t.imageList=h.a.DefaultController.images,t.uiLanguages=h.a.DefaultController.languages;let n=yield t.loadingCtrl.create({showBackdrop:!0,backdropDismiss:!0});n.present(),t.LoadAllRooms().then(a=>{n.dismiss()})}console.log("ionViewDidEnter RoomsManagementPage"),t.unregisterBackButtonAction=t.platform.backButton.subscribeWithPriority(101,(0,u.Z)(function*(){let n=yield t.closeAllDialog();n&&n&&n.dismiss(),t.goBack()}))})()}closeAllDialog(){var t=this;return(0,u.Z)(function*(){return(yield t.loadingCtrl.getTop())||(yield t.modalController.getTop())||(yield t.toastCtrl.getTop())||(yield t.overlayCtrl.getTop())})()}LoadAllRooms(){var t=this;return(0,u.Z)(function*(){let n,a=!0;for(let c=0;c<M.s.RetryRequests;c++){console.log("Trying to load room entities",c+1+"/3");try{let m=yield h.a.DefaultController.LoadAllRoomEntities();m?(t.list_of_rooms=m,t.filtered_list_of_room=m):(console.log("no scene found"),t.showErrorToast(t.translate.instant("no-data-found")),t.NetworkAlertRetrySuccessCallBack=t.errorHandler,t.NotifyEvents("no data returned from the server.",!0)),a=!1;break}catch(m){n=m,a=!0}}a&&n&&(console.error("unable to load data"),t.NetworkAlertRetrySuccessCallBack=t.errorHandler,t.NotifyEvents(n,!0),t.navCtrl.pop());for(var r=0;r<t.list_of_rooms.length;r++){let c;t.list_of_rooms[r].imageId&&(c=t.imageList.find(m=>m.id==t.list_of_rooms[r].imageId)),t.roomsImage.push(c?c.main_url:M.s.Images.default_room_image)}})()}scrollToSelected(){setTimeout(function(){let t=document.getElementsByClassName("alert-radio-group")[0];t&&(t=t.querySelector('[aria-checked="true"]')),t&&setTimeout(function(){t.scrollIntoView()},400)},5)}search(t){this.initializeItems();const n=t.target.value;n&&n.length>=2&&(this.searchQuery=n,n&&""!=n.trim()&&(this.filtered_list_of_room=this.list_of_rooms.filter(a=>a.name.toLowerCase().indexOf(n.toLowerCase())>-1||a.roomName&&a.roomName.toLowerCase().indexOf(n.toLowerCase())>-1)))}initializeItems(){this.filtered_list_of_room=this.list_of_rooms}CreateNewRoom(){this.showAdvancedOptions=!1,this.room=new b.A,this.room.Name="",this.AddingNewRoom=!0,this.roomEditable=!0,this.CurrentSlideName=this.translate.instant("general")}SaveRoom(){var t=this;return(0,u.Z)(function*(){t.CurrentSlideName="";let n=yield t.loadingCtrl.create({showBackdrop:!0,backdropDismiss:!0});n.present(),t.AddingNewRoom&&(t.room.uiDataTranslationEntities=[]);let a=document.querySelectorAll("ion-input[data-langname]");for(var r=0;r<a.length;r++){a[r].value=a[r].value;let m={FieldName:"Name",TableName:"Room",UiLanguageId:Number(a[r].getAttribute("data-langid")),Translation:a[r].value.toString()};t.room.uiDataTranslationEntities.push(m)}let c=t.roomHelper.getRoomSavingEntity(t.room);h.a.DefaultController.SaveRoomEntity(t.AddingNewRoom?"create":"update",c,t.room.Id).then(m=>{h.a.DefaultController.LoadAllRooms(),t.LoadAllRooms().then(T=>{t.AddingNewRoom=!1,t.roomEditable=!1,t.room=new b.A,t.room.Name="",t.room.Visible=1,h.a.DefaultController.LoadAllDevices().then(x=>{n&&""!=n.innerHTML&&n.dismiss()})})}).catch(m=>{console.error("Unable to Save",m),n&&""!=n.innerHTML&&n.dismiss()})})()}EditRoom(t){var n=this;return(0,u.Z)(function*(){n.CurrentSlideName=n.translate.instant("general");let a=yield n.loadingCtrl.create({showBackdrop:!0,backdropDismiss:!0});t&&t.id&&(console.log("loading room item DTO:",t),a.present(),n.room=new b.A,n.AddingNewRoom=!1,n.roomEditable=!0,n.showAdvancedOptions=!1,n.showNameTraslation=!1,console.log(n.uiLanguages),h.a.DefaultController.LoadAllRoomEntityDTO(t.id).then(r=>{if(console.log(r),n.room.Id=r.roomEntity.id,n.room.Name=r.roomEntity.name,n.room.ParentId=r.roomEntity.parentId,n.room.Visible=r.roomEntity.visible,n.room.ImageId=r.roomEntity.imageId,n.room.SortOrder=r.roomEntity.sortOrder,n.room.Type=Number(r.roomEntity.type),n.room.Visible=Number(r.roomEntity.visible),n.room.Location=r.roomEntity.location,n.room.LocationCode=r.roomEntity.locationCode,n.room.uiDataTranslationEntities=r.uiDataTranslationEntities,r.uiDataTranslationEntities){console.log(r.uiDataTranslationEntities,"value.uiDataTranslationEntities"),console.log(n.room.uiDataTranslationEntities,"this.room.uiDataTranslationEntities");let m=[];for(var c=0;c<r.uiDataTranslationEntities.length;c++)m.push(r.uiDataTranslationEntities[c].uiLanguageId);m.unshift(m[0]-1),m.push(m[0]+1),n.uiLanguages.sort(function(T,x){return m.indexOf(x.id)-m.indexOf(T.id)}),console.log(m,"ids")}a&&""!=a.innerHTML&&a.dismiss()}))})()}DuplicateRoom(t){var n=this;return(0,u.Z)(function*(){var r;(yield n.alertCtrl.create({header:n.translate.instant("duplicate"),cssClass:"network-alert",message:n.translate.instant("are-you-sure-you-want-to-duplicate"),inputs:[{name:"newName",placeholder:n.translate.instant("new-name"),handler:r=>{}}],buttons:[{text:n.translate.instant("yes"),handler:(r=(0,u.Z)(function*(c){if(!c.newName||""==c.newName)return n.showToast(n.translate.instant("name-required")),!1;console.log("duplicate room,",t);let m=yield n.ShowSimpleLoadingController();h.a.DefaultController.LoadAllRoomEntityDTO(t.id).then(function(){var T=(0,u.Z)(function*(x){if(x){if(x.id=void 0,x.roomEntity.id=void 0,x.name=c.newName,x.roomEntity.name=c.newName,x.uiDataTranslationEntities)for(let y=0;y<x.uiDataTranslationEntities.length;y++)x.uiDataTranslationEntities[y].id=void 0;(yield h.a.DefaultController.SaveRoomEntity("create",x))&&(yield n.LoadAllRooms().then(()=>{n.refreshElement(),m.dismiss()}))}});return function(x){return T.apply(this,arguments)}}())}),function(m){return r.apply(this,arguments)})},{text:n.translate.instant("no"),role:"cancel"}],backdropDismiss:!0})).present()})()}ShowSimpleLoadingController(){var t=this;return(0,u.Z)(function*(){let n=t.loadingCtrl.create({backdropDismiss:!0});return(yield n).present(),n})()}goBack(){this.AddingNewRoom||this.roomEditable?this.disableEditing():(this.CurrentSlideName="",this.navCtrl.pop(),console.log("Navigating Page"))}disableEditing(){var t=this;return(0,u.Z)(function*(){(yield t.alertCtrl.create({header:t.translate.instant("cancel"),cssClass:"network-alert",message:t.translate.instant("are-you-sure-you-want-to-cancel-changes"),buttons:[{text:t.translate.instant("yes"),role:"null",handler:()=>{t.roomEditable=!1,t.AddingNewRoom=!1}},{text:t.translate.instant("no"),role:"cancel",handler:()=>{}}]})).present()})()}DeleteRoom(t){var n=this;return(0,u.Z)(function*(){var r;(yield n.alertCtrl.create({header:n.translate.instant("delete"),cssClass:"network-alert",message:n.translate.instant("are-you-sure-you-want-to-delete"),buttons:[{text:n.translate.instant("yes"),role:"null",handler:(r=(0,u.Z)(function*(){if(t&&t.id){let c=yield n.loadingCtrl.create({backdropDismiss:!0,showBackdrop:!0});yield c.present(),yield h.a.DefaultController.DeleteRoomEntity(t.id).then(m=>{n.LoadAllRooms().then(T=>{c&&""!=c.innerHTML&&c.dismiss(),n.refreshElement()})})}}),function(){return r.apply(this,arguments)})},{text:n.translate.instant("no"),role:"cancel",handler:()=>{}}]})).present()})()}checkRoomName(t){if(null!=t)return t&&this.list_of_rooms.find(n=>n.id!=this.room.Id&&n.name.toLowerCase()==t.toLowerCase())?(this.roomNameAvailable=!1,!1):(console.log(t),this.roomNameAvailable=!0,!0)}___imageSelectChange(t){if(t&&-1!=t.ImageId){let a,n=this.imageList.filter(r=>r.id==t.ImageId);t&&(this.room.ImageId=t.ImageId,a=document.getElementsByClassName("dark-control img-list")[0].getElementsByClassName("select-text")[0]),a&&n[0]&&(a.innerHTML=n[0].description,a.innerHTML=a.innerHTML.concat('<img class="country-image" style = "margin-bottom: -6px;margin-left: 20px;width: 27px; height: 25px;" src = '+n[0].main_url+" /> "))}}loadFlags(){if(this.imageList&&this.imageList.length>0)var t=this.imageList;let n;setTimeout(function(){let a=document.getElementsByClassName("alert-radio-label");for(let c=0;c<a.length;c++){let m=a[c+1];null!=t[c]&&(n=t[c].main_url,m.innerHTML.includes("<img")||(m.innerHTML=m.innerHTML.concat('<img class="country-image" style = "margin-bottom: -6px;float:inline-end;width: 27px; height: 25px;" src = '+n+" /> ")))}let r=document.getElementsByClassName("alert-radio-group")[0].querySelector('[aria-checked="true"]');r&&setTimeout(function(){r.scrollIntoView()},400)},5)}}return(i=l).\u0275fac=function(t){return new(t||i)(e.Y36(d.SH),e.Y36(d.IN),e.Y36(s.dr),e.Y36(d.HT),e.Y36(P.V0),e.Y36(d.Dh),e.Y36(d.yF),e.Y36(N.H7),e.Y36(d.Br),e.Y36(d.t4),e.Y36(e.R0b),e.Y36(Z.sK),e.Y36(d.X1),e.Y36(A.Z),e.Y36(d.BX),e.Y36(C.F0),e.Y36(d.Dh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rooms-management"]],features:[e.qOj],decls:16,vars:10,consts:[["hideBackButton","true",2,"background","transparent",3,"ngStyle"],[2,"width","40px","float","left","display","block"],["tappable","","component-click","","tabindex","0",1,"top-mic-button",2,"font-size","30px","text-align","center","vertical-align","middle",3,"click"],["name","chevron-back"],["slot","end"],["slot","end","slot","end","clear","",3,"click",4,"ngIf"],["padding",""],[4,"ngIf"],["style","text-align:start;",3,"direction",4,"ngIf"],["slot","end","slot","end","clear","",3,"click"],["name","close-circle"],["name","add"],["animated","true","debounce","500",3,"placeholder","ionInput"],["class","sliding-list-item",4,"ngFor","ngForOf"],[1,"sliding-list-item"],["detail-push",""],["slot","start"],[3,"src"],[2,"text-overflow","ellipsis","overflow","hidden"],["slot","end","name","chevron-back"],["side","end"],[1,"edit-button",3,"click"],["name","create"],[1,"duplicate-button",2,"background-color","#388",3,"click"],["name","copy"],[1,"delete-button",3,"click"],["name","close"],[2,"text-align","start"],["text-center","","type","text","required","",3,"ngModel","ngModelChange","ionBlur"],[2,"display","inline-flex"],[1,"dark-control",2,"max-width","96%","text-align","center","height","34px",3,"ngModel","compareWith","click","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[2,"width","50px","height","50px",3,"src","click"],[3,"click"],["name","caret-down",4,"ngIf"],["name","caret-down"],[4,"ngFor","ngForOf"],["text-center","","type","text","required",""],["text-center","","type","text","required","",3,"ngModel","ngModelChange",4,"ngIf"],["text-center","","type","text","required","",4,"ngIf"],["text-center","","type","text","required","",3,"ngModel","ngModelChange"],[1,"dark-control",2,"margin","3px 8px","text-align","center","height","34px",3,"ngModel","compareWith","click","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],["text-center","","name","sortOrder","min","0","type","number",3,"ngModel","ngModelChange"],["sortOrder",""],["text-center","","name","location","type","text",3,"ngModel","ngModelChange"],["location",""],["text-center","","name","location_code","type","text",3,"ngModel","ngModelChange"],["location_code",""],[1,"full-primary-button",2,"width","98%",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"div",1)(3,"a",2),e.NdJ("click",function(){return n.goBack()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ion-buttons",4),e.YNc(9,q,2,0,"ion-button",5),e.YNc(10,U,2,0,"ion-button",5),e.qZA()()(),e.TgZ(11,"ion-content",6),e.YNc(12,H,5,3,"ion-grid",7),e.YNc(13,Y,2,1,"ion-list",7),e.YNc(14,_e,48,39,"ion-grid",8),e.YNc(15,de,6,4,"ion-grid",7),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngStyle",n.theAppState.iontoolbarStyle),e.xp6(5),e.Oqu(n.room&&n.room.Name?n.room.Name:e.lcZ(7,8,"rooms")),e.xp6(3),e.Q6J("ngIf",n.roomEditable),e.xp6(1),e.Q6J("ngIf",!n.roomEditable),e.xp6(2),e.Q6J("ngIf",!n.roomEditable),e.xp6(1),e.Q6J("ngIf",!n.roomEditable),e.xp6(1),e.Q6J("ngIf",n.roomEditable),e.xp6(1),e.Q6J("ngIf",n.roomEditable))},dependencies:[w.sg,w.O5,w.PC,f.JJ,f.Q7,f.On,s.BJ,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.pK,s.Ie,s.IK,s.td,s.Q$,s.q_,s.Nd,s.VI,s.t9,s.n0,s.wd,s.sr,s.as,s.QI,s.j9,s.yf,L.T,J.t,D.c,Z.X$],styles:['.dark-control[_ngcontent-%COMP%], .device-btn[_ngcontent-%COMP%]{background:#333;max-width:99%;width:98%;height:45px;margin:4px;color:#fff;line-height:2.5}ion-slide[_ngcontent-%COMP%]{overflow:scroll}.list-md[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]{background:none;background-color:none}.slide-zoom[_ngcontent-%COMP%]{height:100%;background:none}.property-value-selector[_ngcontent-%COMP%]   .scale_50[_ngcontent-%COMP%]{background:none;box-shadow:none;width:50%}.property-value-selector[_ngcontent-%COMP%]   .scale_90[_ngcontent-%COMP%], .property-value-selector[_ngcontent-%COMP%]   .scale_100[_ngcontent-%COMP%]{background:none;box-shadow:none;width:90%}.ion-datetime[_ngcontent-%COMP%]{padding:0}.select-md[_ngcontent-%COMP%], .datetime-text[_ngcontent-%COMP%]{min-height:40px;border:1px solid gray;width:98%;display:block;flex:1;line-height:1.5;padding:6px;margin:5px;border-radius:5px;background:linear-gradient(to bottom,rgba(0,0,0,.1) 0%,rgba(0,0,0,.3) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#a6000000",endColorstr="#00000000",GradientType=0);border:2px solid rgba(150,150,150,.3)}.device-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:4px;right:4px}.badge-md[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:20px;font-size:small;background:#741598;padding:4px;border-radius:0}.row[_ngcontent-%COMP%]{margin:2px}.full-button[_ngcontent-%COMP%]{width:98%;display:block}.bottom-tag[_ngcontent-%COMP%]{border-bottom-right-radius:10px;width:250px;height:36px;line-height:2}.bottom-tag[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .bottom-tag[_ngcontent-%COMP%]   .button-clear-md[_ngcontent-%COMP%]{color:#fff}.condition-design[_ngcontent-%COMP%]{background:#182735;text-align:start;margin:3px 7px 0}.trigger-design[_ngcontent-%COMP%]{border:4px;margin-top:5px;padding-bottom:10px;background-color:#5353534d;box-shadow:1px 1px 3px #333;border-radius:3px}.color-tag[_ngcontent-%COMP%]{min-width:20px;display:inline-block;vertical-align:middle}.trigger-tag[_ngcontent-%COMP%]{color:#228b22}.full-label[_ngcontent-%COMP%]{white-space:normal;line-height:1.5}.device-tag[_ngcontent-%COMP%]{color:#00c8ff}.room-tag[_ngcontent-%COMP%]{color:tomato;font-size:smaller}.scroll-content[_ngcontent-%COMP%]{padding:2px!important}.property-tag[_ngcontent-%COMP%], .action-tag[_ngcontent-%COMP%]{color:gold}.value-tag[_ngcontent-%COMP%]{color:#7fff00}.number-tag[_ngcontent-%COMP%]{color:#0ff}.alert-md[_ngcontent-%COMP%]   .alert-checkbox-label[_ngcontent-%COMP%]{color:#fff!important}']}),l})()}];let pe=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[C.Bz.forChild(ue),C.Bz]}),l})();var fe=g(23934);let he=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[w.ez,f.u5,s.Pc,pe,Z.aw.forChild(),fe.o]}),l})()},59764:(R,v,g)=>{g.d(v,{T:()=>u});var w=g(15861),f=g(65879),s=g(56223),C=g(28662);let u=(()=>{var M;class h{mouseDownEventHandler(_){_.stopImmediatePropagation(),_.preventDefault()}keyEventHandler(_){var p=this;return(0,w.Z)(function*(){if(_.stopImmediatePropagation(),_.preventDefault(),"Enter"==_.key||" "==_.key){var e;let d=null===(e=document.activeElement)||void 0===e?void 0:e.className.toLowerCase();if(d&&(d.indexOf("range-knob-handle")>-1||d.indexOf("range-md")>-1)&&d.indexOf("range-knob-handle")>-1&&(console.log("range-knob-handle"),document.activeElement&&document.activeElement.getAttribute("aria-valuenow"))){let Z=document.activeElement.getAttribute("aria-valuenow");if(Z){let A=Number.parseFloat(Z);if(A||0===A)return console.log("range-knob-handle value change to "+A),void p.model.update.emit(A)}}let P=p.el.nativeElement.nodeName.toLowerCase();const N=yield C.A.getInfo();["button","ion-checkbox","a"].indexOf(P)>-1?"android"!==N.operatingSystem.toLowerCase()&&p.el.nativeElement.click():"!android"!==N.operatingSystem.toLowerCase()&&p.clickOnElement(p.el)}})()}clickOnElement(_){if(document.createEvent){let p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),_.nativeElement.dispatchEvent(p)}}mouseDownOnElement(_){let p=new MouseEvent("mousedown",{bubbles:!0,cancelable:!1});_.nativeElement.dispatchEvent(p)}constructor(_,p,e){this.el=_,this.renderer=p,this.model=e,this.eventEmitter=new f.vpe}ngOnInit(){}}return(M=h).\u0275fac=function(_){return new(_||M)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(s.On))},M.\u0275dir=f.lG2({type:M,selectors:[["","component-click",""]],hostBindings:function(_,p){1&_&&f.NdJ("mousedown",function(d){return p.mouseDownEventHandler(d)})("keypress",function(d){return p.keyEventHandler(d)})},outputs:{eventEmitter:"eventEmitter"},features:[f._Bn([s.On])]}),h})()},48753:(R,v,g)=>{g.d(v,{c:()=>f});var w=g(65879);let f=(()=>{var s;class C{constructor(M){this.elementRef=M}ngOnInit(){this.elementRef.nativeElement.classList.add("ion-padding")}}return(s=C).\u0275fac=function(M){return new(M||s)(w.Y36(w.SBq))},s.\u0275dir=w.lG2({type:s,selectors:[["","padding",""]]}),C})()}}]);